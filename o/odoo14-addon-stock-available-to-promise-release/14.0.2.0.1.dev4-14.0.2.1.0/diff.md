# Comparing `tmp/odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4-py3-none-any.whl.zip` & `tmp/odoo14_addon_stock_available_to_promise_release-14.0.2.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,46 +1,46 @@
-Zip file size: 70713 bytes, number of entries: 44
--rw-r--r--  2.0 unx     6521 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/README.rst
--rw-r--r--  2.0 unx       43 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/__init__.py
--rw-r--r--  2.0 unx      960 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/__manifest__.py
--rw-r--r--  2.0 unx    28362 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po
--rw-r--r--  2.0 unx    23871 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot
--rw-r--r--  2.0 unx     1092 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py
--rw-r--r--  2.0 unx      236 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/__init__.py
--rw-r--r--  2.0 unx     1085 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/product_product.py
--rw-r--r--  2.0 unx      805 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/res_company.py
--rw-r--r--  2.0 unx      520 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py
--rw-r--r--  2.0 unx      792 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py
--rw-r--r--  2.0 unx    24838 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/stock_move.py
--rw-r--r--  2.0 unx     7872 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/stock_picking.py
--rw-r--r--  2.0 unx     2818 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py
--rw-r--r--  2.0 unx     2901 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/models/stock_rule.py
--rw-r--r--  2.0 unx      240 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      220 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       80 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst
--rw-r--r--  2.0 unx     1895 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     1435 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst
--rw-r--r--  2.0 unx      297 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/static/description/icon.png
--rw-r--r--  2.0 unx    16721 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/static/description/index.html
--rw-r--r--  2.0 unx      132 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/__init__.py
--rw-r--r--  2.0 unx     4629 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/common.py
--rw-r--r--  2.0 unx    49812 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/test_reservation.py
--rw-r--r--  2.0 unx     5610 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py
--rw-r--r--  2.0 unx     3150 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py
--rw-r--r--  2.0 unx     2743 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py
--rw-r--r--  2.0 unx     1122 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml
--rw-r--r--  2.0 unx     2787 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml
--rw-r--r--  2.0 unx      611 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml
--rw-r--r--  2.0 unx     4736 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml
--rw-r--r--  2.0 unx     1938 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml
--rw-r--r--  2.0 unx     6717 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml
--rw-r--r--  2.0 unx       58 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/wizards/__init__.py
--rw-r--r--  2.0 unx      640 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py
--rw-r--r--  2.0 unx     1856 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml
--rw-r--r--  2.0 unx      646 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
--rw-r--r--  2.0 unx     1888 b- defN 23-Mar-13 08:19 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
--rw-r--r--  2.0 unx     7149 b- defN 23-Mar-13 08:20 odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-13 08:20 odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Mar-13 08:20 odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     5628 b- defN 23-Mar-13 08:20 odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/RECORD
-44 files, 235008 bytes uncompressed, 60963 bytes compressed:  74.1%
+Zip file size: 70434 bytes, number of entries: 44
+-rw-r--r--  2.0 unx     6528 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/README.rst
+-rw-r--r--  2.0 unx       43 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/__init__.py
+-rw-r--r--  2.0 unx      967 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/__manifest__.py
+-rw-r--r--  2.0 unx    28362 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po
+-rw-r--r--  2.0 unx    23871 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot
+-rw-r--r--  2.0 unx     1096 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py
+-rw-r--r--  2.0 unx      236 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/__init__.py
+-rw-r--r--  2.0 unx     1085 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/product_product.py
+-rw-r--r--  2.0 unx      805 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/res_company.py
+-rw-r--r--  2.0 unx      520 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py
+-rw-r--r--  2.0 unx      792 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py
+-rw-r--r--  2.0 unx    24076 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/stock_move.py
+-rw-r--r--  2.0 unx     7872 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/stock_picking.py
+-rw-r--r--  2.0 unx     2818 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py
+-rw-r--r--  2.0 unx     2901 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/models/stock_rule.py
+-rw-r--r--  2.0 unx      240 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      220 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       80 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst
+-rw-r--r--  2.0 unx     1895 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     1435 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst
+-rw-r--r--  2.0 unx      297 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/static/description/icon.png
+-rw-r--r--  2.0 unx    16735 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/static/description/index.html
+-rw-r--r--  2.0 unx      132 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/__init__.py
+-rw-r--r--  2.0 unx     4629 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/common.py
+-rw-r--r--  2.0 unx    49778 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/test_reservation.py
+-rw-r--r--  2.0 unx     5610 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py
+-rw-r--r--  2.0 unx     3150 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py
+-rw-r--r--  2.0 unx     2743 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py
+-rw-r--r--  2.0 unx     1122 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml
+-rw-r--r--  2.0 unx     2787 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml
+-rw-r--r--  2.0 unx      611 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml
+-rw-r--r--  2.0 unx     4736 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml
+-rw-r--r--  2.0 unx     1938 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml
+-rw-r--r--  2.0 unx     6717 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml
+-rw-r--r--  2.0 unx       58 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/wizards/__init__.py
+-rw-r--r--  2.0 unx      640 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py
+-rw-r--r--  2.0 unx     1856 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml
+-rw-r--r--  2.0 unx      646 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
+-rw-r--r--  2.0 unx     1888 b- defN 23-May-29 09:44 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
+-rw-r--r--  2.0 unx     7158 b- defN 23-May-29 09:44 odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-29 09:44 odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-29 09:44 odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     5608 b- defN 23-May-29 09:44 odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/RECORD
+44 files, 234233 bytes uncompressed, 60724 bytes compressed:  74.1%
```

## zipnote {}

```diff
@@ -114,20 +114,20 @@
 
 Filename: odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py
 Comment: 
 
 Filename: odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/METADATA
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/WHEEL
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/top_level.txt
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/RECORD
+Filename: odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_available_to_promise_release/README.rst

```diff
@@ -115,14 +115,15 @@
 Credits
 =======
 
 Authors
 ~~~~~~~
 
 * Camptocamp
+* BCIM
 
 Contributors
 ~~~~~~~~~~~~
 
 * Guewen Baconnier <guewen.baconnier@camptocamp.com>
 * Simone Orsi <simone.orsi@camptocamp.com>
 * Jacques-Etienne Baudoux <je@bcim.be>
```

## odoo/addons/stock_available_to_promise_release/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2019 Camptocamp (https://www.camptocamp.com)
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 
 {
     "name": "Stock Available to Promise Release",
-    "version": "14.0.2.0.0",
+    "version": "14.0.2.1.0",
     "summary": "Release Operations based on available to promise",
-    "author": "Camptocamp,Odoo Community Association (OCA)",
+    "author": "Camptocamp, BCIM, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/wms",
     "category": "Stock Management",
     "depends": ["stock"],
     "data": [
         "security/ir.model.access.csv",
         "views/product_product_views.xml",
         "views/stock_move_views.xml",
```

## odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py

```diff
@@ -26,10 +26,10 @@
             and sr.available_to_promise_defer_pull = true
         group by sp.id
 )
 update stock_picking
     set last_release_date = create_date
     from picks
     where stock_picking.id = picks.id
-        and not last_release_date
+        and last_release_date is null
     """
     )
```

## odoo/addons/stock_available_to_promise_release/models/stock_move.py

```diff
@@ -1,8 +1,9 @@
-# Copyright 2019-2020 Camptocamp (https://www.camptocamp.com)
+# Copyright 2019 Camptocamp (https://www.camptocamp.com)
+# Copyright 2020 Jacques-Etienne Baudoux (BCIM) <je@bcim.be>
 # Copyright 2023 Michael Tietz (MT Software) <mtietz@mt-software.de>
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html).
 import itertools
 import logging
 import operator as py_operator
 
 from odoo import _, api, fields, models
@@ -418,113 +419,100 @@
 
         As we only generate chained moves for the quantity available minus the
         quantity promised to older moves, to delay the reservation at the
         latest, we have to periodically retry to assign the remaining
         quantities.
         """
         procurement_requests = []
-        pulled_moves = self.env["stock.move"]
-        backorder_links = {}
+        released_moves = self.env["stock.move"]
         for move in self:
             available_qty, remaining_qty = move._is_releasable()
             if not available_qty:
                 continue
-
             if remaining_qty:
-                new_move = move._release_split(remaining_qty)
-                backorder_links[new_move.picking_id] = move.picking_id
+                move._release_split(remaining_qty)
+            released_moves |= move
 
-            move._before_release()
+        # Move the unreleased moves to a backorder.
+        # This behavior can be disabled by setting the flag
+        # no_backorder_at_release on the stock.route of the move.
+        released_pickings = released_moves.picking_id
+        unreleased_moves = released_pickings.move_lines - released_moves
+        unreleased_moves_to_bo = unreleased_moves.filtered(
+            lambda m: m.state not in ("done", "cancel")
+            and not m.rule_id.no_backorder_at_release
+        )
+        if unreleased_moves_to_bo:
+            unreleased_moves_to_bo._unreleased_to_backorder()
 
+        # Pull the released moves
+        for move in released_moves:
+            move._before_release()
             values = move._prepare_procurement_values()
             procurement_requests.append(
                 self.env["procurement.group"].Procurement(
                     move.product_id,
                     move.product_uom_qty,
                     move.product_uom,
                     move.location_id,
                     move.rule_id and move.rule_id.name or "/",
                     move.origin,
                     move.company_id,
                     values,
                 )
             )
-            pulled_moves |= move
-
-        # move the unreleased moves to a backorder
-        released_pickings = pulled_moves.picking_id
-        unreleased_moves = released_pickings.move_lines - pulled_moves
-        for unreleased_move in unreleased_moves:
-            if unreleased_move.state in ("done", "cancel"):
-                continue
-            # no split will occur as we keep the same qty, but the move
-            # will be assigned to a new stock.picking
-            original_picking = unreleased_move.picking_id
-            unreleased_move._release_split(unreleased_move.product_qty)
-            backorder_links[unreleased_move.picking_id] = original_picking
-
-        for backorder, origin in backorder_links.items():
-            if backorder != origin:
-                backorder._release_link_backorder(origin)
-
         self.env["procurement.group"].run_defer(procurement_requests)
 
-        pulled_moves._after_release_assign_moves()
-        pulled_moves._after_release_update_chain()
+        released_moves._after_release_assign_moves()
+        released_moves._after_release_update_chain()
 
-        return pulled_moves
+        return released_moves
 
     def _before_release(self):
         """Hook that aims to be overridden."""
 
     def _after_release_update_chain(self):
         picking_ids = set()
         moves = self
         while moves:
-            picking_ids.update(moves.mapped("picking_id").ids)
-            moves = moves.mapped("move_orig_ids")
+            picking_ids.update(moves.picking_id.ids)
+            moves = moves.move_orig_ids
         pickings = self.env["stock.picking"].browse(picking_ids)
         pickings._after_release_update_chain()
         # Set the highest priority on all pickings in the chain
         priorities = pickings.mapped("priority")
         if priorities:
             pickings.write({"priority": max(priorities)})
 
     def _after_release_assign_moves(self):
         move_ids = []
         for origin_moves in self._get_chained_moves_iterator("move_orig_ids"):
             move_ids += origin_moves.ids
         self.env["stock.move"].browse(move_ids)._action_assign()
 
     def _release_split(self, remaining_qty):
-        """Split move and create a new picking for it.
-
-        By default, when we split a move at release to isolate the remaining qty
-        into a new move, we also create a new picking for it so that we can
-        release it later as soon as the qty is available.
-        This behavior can be changed by setting the flag no_backorder_at_release
-        on the stock.route of the move. This will allow to create the backorder
-        at the end of the picking process and release the unreleased moves into
-        the same picking as long as the picking is not done. By doing so, we
-        can also cleanup the backorders of the linked pickings created when
-        a released move was not processed (no qty found, or no time to do it for
-         example).
-        """
-        context = self.env.context
-        self = self.with_context(release_available_to_promise=True)
-        new_move = self  # Work on the current move if split doesn't occur
-        new_move_vals = self._split(remaining_qty)
-        if new_move_vals:
-            new_move = self.create(new_move_vals)
-            new_move._action_confirm(merge=False)
-        # Picking assignment is needed here because `_split` copies the move
-        # thus the `_should_be_assigned` condition is not satisfied
-        # and the move is not assigned.
-        new_move._assign_picking()
-        return new_move.with_context(**context)
+        """Split move and put remaining_qty to a backorder move."""
+        new_move_vals = self.with_context(release_available_to_promise=True)._split(
+            remaining_qty
+        )
+        new_move = self.create(new_move_vals)
+        new_move._action_confirm(merge=False)
+        return new_move
+
+    def _unreleased_to_backorder(self):
+        """Move the unreleased moves to a new backorder picking"""
+        origin_pickings = {m.id: m.picking_id for m in self}
+        self.with_context(release_available_to_promise=True)._assign_picking()
+        backorder_links = {}
+        for move in self:
+            origin = origin_pickings[move.id]
+            if origin:
+                backorder_links[move.picking_id] = origin
+        for backorder, origin in backorder_links.items():
+            backorder._release_link_backorder(origin)
 
     def _assign_picking_post_process(self, new=False):
         super()._assign_picking_post_process(new)
         priorities = self.mapped("move_dest_ids.picking_id.priority")
         if priorities:
             self.picking_id.write({"priority": max(priorities)})
 
@@ -602,11 +590,11 @@
         return new_origin_moves
 
     def _search_picking_for_assignation_domain(self):
         domain = super()._search_picking_for_assignation_domain()
         if self.env.context.get("release_available_to_promise"):
             force_new_picking = not self.rule_id.no_backorder_at_release
             if force_new_picking:
-                domain = expression.AND([domain, [("id", "!=", self.picking_id.id)]])
+                domain = expression.AND([domain, [("id", ">", self.picking_id.id)]])
         if self.picking_type_id.prevent_new_move_after_release:
             domain = expression.AND([domain, [("last_release_date", "=", False)]])
         return domain
```

## odoo/addons/stock_available_to_promise_release/static/description/index.html

### odoo/addons/stock_available_to_promise_release/static/description/index.html

```diff
@@ -502,14 +502,15 @@
         </h1>
         <div class="section" id="authors">
           <h2>
             <a class="toc-backref" href="#id5">Authors</a>
           </h2>
           <ul class="simple">
             <li>Camptocamp</li>
+            <li>BCIM</li>
           </ul>
         </div>
         <div class="section" id="contributors">
           <h2>
             <a class="toc-backref" href="#id6">Contributors</a>
           </h2>
           <ul class="simple">
```

## odoo/addons/stock_available_to_promise_release/tests/test_reservation.py

```diff
@@ -635,15 +635,15 @@
                 }
             ],
         )
 
     def test_defer_multi_move_unreleased_in_backorder(self):
         """Unreleased moves are put in a backorder"""
         self.wh.delivery_route_id.write({"available_to_promise_defer_pull": True})
-        self._update_qty_in_location(self.loc_bin1, self.product1, 10.0)
+        self._update_qty_in_location(self.loc_bin1, self.product1, 15.0)
         self._update_qty_in_location(self.loc_bin1, self.product2, 10.0)
         pickings = self._create_picking_chain(
             self.wh,
             [
                 (self.product1, 20),
                 (self.product2, 10),
                 (self.product3, 20),
@@ -660,15 +660,14 @@
                     "state": "waiting",
                     "location_id": self.wh.wh_output_stock_loc_id.id,
                     "location_dest_id": self.loc_customer.id,
                 }
             ],
         )
 
-        cust_picking = pickings
         cust_picking.release_available_to_promise()
         backorder = cust_picking.backorder_ids
         self.assertRecordValues(
             backorder,
             [
                 {
                     "state": "waiting",
@@ -677,20 +676,20 @@
                     "last_release_date": False,
                 }
             ],
         )
         self.assertRecordValues(
             backorder.move_lines,
             [
-                # remaining 10 on product 1 because it was partially available
-                {"product_qty": 10.0, "product_id": self.product1.id},
                 # these 2 moves were not released, so they are moved to a
                 # backorder
                 {"product_qty": 20.0, "product_id": self.product3.id},
                 {"product_qty": 10.0, "product_id": self.product4.id},
+                # remaining 5 on product 1 because it was partially available
+                {"product_qty": 5.0, "product_id": self.product1.id},
             ],
         )
 
         out_picking = (
             self._pickings_in_group(pickings.group_id) - cust_picking - backorder
         )
         self.assertRecordValues(
@@ -702,15 +701,15 @@
                     "location_dest_id": self.wh.wh_output_stock_loc_id.id,
                 }
             ],
         )
         self.assertRecordValues(
             out_picking.move_lines,
             [
-                {"product_qty": 10.0, "product_id": self.product1.id},
+                {"product_qty": 15.0, "product_id": self.product1.id},
                 {"product_qty": 10.0, "product_id": self.product2.id},
             ],
         )
 
     def test_defer_creation_no_backorder_partial_available(self):
         """Test that the creation of a backorder is not done at release time
         when the field `ǹo_backorder_at_release` is set on the stock.route"""
```

## Comparing `odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/METADATA` & `odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-stock-available-to-promise-release
-Version: 14.0.2.0.1.dev4
+Version: 14.0.2.1.0
 Summary: Release Operations based on available to promise
 Home-page: https://github.com/OCA/wms
-Author: Camptocamp,Odoo Community Association (OCA)
+Author: Camptocamp, BCIM, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)
@@ -132,14 +132,15 @@
 Credits
 =======
 
 Authors
 ~~~~~~~
 
 * Camptocamp
+* BCIM
 
 Contributors
 ~~~~~~~~~~~~
 
 * Guewen Baconnier <guewen.baconnier@camptocamp.com>
 * Simone Orsi <simone.orsi@camptocamp.com>
 * Jacques-Etienne Baudoux <je@bcim.be>
```

## Comparing `odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/RECORD` & `odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,44 +1,44 @@
-odoo/addons/stock_available_to_promise_release/README.rst,sha256=4j8KxkdqyRjwJtK912bWcy84Nj3I0ZDV868tV4mzp3Q,6521
+odoo/addons/stock_available_to_promise_release/README.rst,sha256=_iUziEZVB2ZbJZG2RuyVqTjPY2bZ32cC62czfo700m4,6528
 odoo/addons/stock_available_to_promise_release/__init__.py,sha256=0XNpxETgFdVxFDEw03O8oL3NtTSk3we-HEZW2sPKzIU,43
-odoo/addons/stock_available_to_promise_release/__manifest__.py,sha256=rKbrF0YGZrf6DBWka4p7DqH9LfIXc75i1hMjHGUSSQ4,960
+odoo/addons/stock_available_to_promise_release/__manifest__.py,sha256=1b4R7QHjKfw-TAO0bJ90liWU7Ce2_RNVqCCfaHh4EYE,967
 odoo/addons/stock_available_to_promise_release/i18n/es_AR.po,sha256=N1vSN_pGuQDQ3pwP3s0WEStqOs9T064AjjMSdxzLOmw,28362
 odoo/addons/stock_available_to_promise_release/i18n/stock_available_to_promise_release.pot,sha256=o2wiBdtCmuqLUhpS3zVYlEgS465a8_J8z8bzRQQp1Xo,23871
-odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py,sha256=LZogyMtHNiPNey1C8wrl-wIojiTeKUhXNoqAwfYLIEg,1092
+odoo/addons/stock_available_to_promise_release/migrations/14.0.2.0.0/post-migrate.py,sha256=aHzEfYQPSa4W1IdFAkddgZH-lHfoAW_Yw39ZuC_i0i8,1096
 odoo/addons/stock_available_to_promise_release/models/__init__.py,sha256=uqJY4EIj4uSpHAIzXgd7sHs0cXs9lPGZk_Cvo6OWW2A,236
 odoo/addons/stock_available_to_promise_release/models/product_product.py,sha256=bijVQAUrQijedgKjy8uNi-nIAUCYRE-S0hnVfewRkFQ,1085
 odoo/addons/stock_available_to_promise_release/models/res_company.py,sha256=dI7V3bVwGflDOf6VR6EEjKHxS2ocQEeei_Fflz6tDBQ,805
 odoo/addons/stock_available_to_promise_release/models/res_config_settings.py,sha256=9eJIIqr5fwIoVJs4sc6kZaPO8pbjRkI3mjsJXbPFv_g,520
 odoo/addons/stock_available_to_promise_release/models/stock_location_route.py,sha256=0QeZvhXfxqAPir5VFWjKYOGAgnkNwaIemgi5GRCkKn0,792
-odoo/addons/stock_available_to_promise_release/models/stock_move.py,sha256=_eu2gumQPBnyhM1VjmEhPetNRp6vmcLIL-wmq0KjRcs,24838
+odoo/addons/stock_available_to_promise_release/models/stock_move.py,sha256=N0cgeEUAKASlwi3mNEDbCo_G29DLU7ZE_AEhIBhcN-A,24076
 odoo/addons/stock_available_to_promise_release/models/stock_picking.py,sha256=FUnpm31aZ-WpWNNjjgoTSgN6YItLPDDodsCTNWvOmx0,7872
 odoo/addons/stock_available_to_promise_release/models/stock_picking_type.py,sha256=FIR7udaqQ12uGQEotbhOF-kME8gyn5M-I7y5_JxNBX4,2818
 odoo/addons/stock_available_to_promise_release/models/stock_rule.py,sha256=le7OPXOA4qKV08F2mUb0BzsxDSrEGHfoa8sBEQU1QTo,2901
 odoo/addons/stock_available_to_promise_release/readme/CONFIGURE.rst,sha256=mHbRKM4EEAoatUNuyYJ05Hmv1qCXvpblFJuanrCuNvQ,240
 odoo/addons/stock_available_to_promise_release/readme/CONTRIBUTORS.rst,sha256=Twumo9shetCt0CaTEa5h2ebgkVk6RwkSiWw-FDDBDSc,220
 odoo/addons/stock_available_to_promise_release/readme/CREDITS.rst,sha256=qJic0c2qWDTloupuq6j69JdIEo70Xpy6-b4MZho00Og,80
 odoo/addons/stock_available_to_promise_release/readme/DESCRIPTION.rst,sha256=u6BF-r7RR1AguXGO29tjjlsNge-gchMj9oXvZ-QW5Q0,1895
 odoo/addons/stock_available_to_promise_release/readme/USAGE.rst,sha256=X0GVvslcQfQqXJZzsO04eoJFrNfFNvtA9qwTEiBpd8U,1435
 odoo/addons/stock_available_to_promise_release/security/ir.model.access.csv,sha256=KAldr7h33qGLg6Pkc9r6g_jIx1JWCZErF0O7vp8LU_Y,297
 odoo/addons/stock_available_to_promise_release/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_available_to_promise_release/static/description/index.html,sha256=DCUAFAVS7MFZcKIhbkYYE3FQiEapD91cCs-VhKT8RTc,16721
+odoo/addons/stock_available_to_promise_release/static/description/index.html,sha256=-SYmzihjDJUGtS5mD6VnWO2O3-GqZ35CVWkvKHrWXco,16735
 odoo/addons/stock_available_to_promise_release/tests/__init__.py,sha256=axx-5ybfOix3RX0UT4wwVdY48TqVOHxoUIWD2DbPEww,132
 odoo/addons/stock_available_to_promise_release/tests/common.py,sha256=8XwZlL1Ziab4TkZZXaHZQUMU2gZi56GqXlTszPvyhtM,4629
-odoo/addons/stock_available_to_promise_release/tests/test_reservation.py,sha256=bAThBZt31RVNNJkbTYDWvO5uZovizapc5ez1J1YscVQ,49812
+odoo/addons/stock_available_to_promise_release/tests/test_reservation.py,sha256=oS4NRuGEm56CkG-p9Hq1kIA3wMbGwlsZrcLh-9H4o74,49778
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease.py,sha256=Vcm7Ax6Bhpi9l_RL4if3a-lkj1TKIZpHXuUDHfAJnx4,5610
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_2steps.py,sha256=3K1fz4i7M2RJ043xF0F6Zn6kqKm-g1I8NNGXLEXuu4A,3150
 odoo/addons/stock_available_to_promise_release/tests/test_unrelease_3steps.py,sha256=EKzhFuxs0DxijAEWrWEkJIuPdHxs5S06mG67AAarJ_w,2743
 odoo/addons/stock_available_to_promise_release/views/product_product_views.xml,sha256=kVHGepbyB5kBrCLKufZf4L4Dp_JycobC3j1Wk6WiWPI,1122
 odoo/addons/stock_available_to_promise_release/views/res_config_settings.xml,sha256=W6y5nUMGtquYMwRdw53Gy3hzOcb7Nt7PBvHrONDYwsA,2787
 odoo/addons/stock_available_to_promise_release/views/stock_location_route_views.xml,sha256=X81u6joQ8Zh9dgOyrQylkaMHHXwGHkvcauoYtpBAEiI,611
 odoo/addons/stock_available_to_promise_release/views/stock_move_views.xml,sha256=_m0vsE904QBKd4s_P9QNXYSVHMccW0iZxyNz7v1FErg,4736
 odoo/addons/stock_available_to_promise_release/views/stock_picking_type_views.xml,sha256=rwBdVAe4CJZwcc1OWkNYp-4b74mxTrdfx-Ib5bdTgwE,1938
 odoo/addons/stock_available_to_promise_release/views/stock_picking_views.xml,sha256=BL95zUXB-zg4AshtaiWTIcTpJlYva7rr0dFdKO8eBDE,6717
 odoo/addons/stock_available_to_promise_release/wizards/__init__.py,sha256=wu2Gdq1bgromFuK-i0Ezz8K6GZw7GnYKYKfeD8ceV08,58
 odoo/addons/stock_available_to_promise_release/wizards/stock_release.py,sha256=uhWdd747jF1Omr74NBUQhge4JyAiMvrQJvMO-sSyWfs,640
 odoo/addons/stock_available_to_promise_release/wizards/stock_release_views.xml,sha256=viqqxc488JH0RzkI4i3kjX9IatCwOUDE8-iqbrBZWss,1856
 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease.py,sha256=TV15Vid4NET7q0skXC8DZPM4tH9kV2jShWi5HrF5BXg,646
 odoo/addons/stock_available_to_promise_release/wizards/stock_unrelease_views.xml,sha256=e6nJ3dPibK6GLQfsWal-nWHqtTAGI-XXf33L0hZRlPA,1888
-odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/METADATA,sha256=smrtfGiIQbm6rvpv7bEqsjurOrjL4jsmsYEDwqXGM3M,7149
-odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_stock_available_to_promise_release-14.0.2.0.1.dev4.dist-info/RECORD,,
+odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/METADATA,sha256=iq8fgDUGByqOiuQW4eCMWrNKe4v-kiUKy8GE8DvL6ts,7158
+odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_stock_available_to_promise_release-14.0.2.1.0.dist-info/RECORD,,
```

