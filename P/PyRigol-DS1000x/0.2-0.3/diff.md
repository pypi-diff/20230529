# Comparing `tmp/PyRigol_DS1000x-0.2.tar.gz` & `tmp/PyRigol_DS1000x-0.3.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "PyRigol_DS1000x-0.2.tar", last modified: Wed May 24 13:17:58 2023, max compression
+gzip compressed data, was "PyRigol_DS1000x-0.3.tar", last modified: Sun May 28 23:38:53 2023, max compression
```

## Comparing `PyRigol_DS1000x-0.2.tar` & `PyRigol_DS1000x-0.3.tar`

### file list

```diff
@@ -1,14 +1,14 @@
-drwxrwxrwx   0        0        0        0 2023-05-24 13:17:58.529892 PyRigol_DS1000x-0.2/
--rw-rw-rw-   0        0        0     1091 2023-05-24 00:39:39.000000 PyRigol_DS1000x-0.2/LICENSE
--rw-rw-rw-   0        0        0      591 2023-05-24 13:17:58.527890 PyRigol_DS1000x-0.2/PKG-INFO
-drwxrwxrwx   0        0        0        0 2023-05-24 13:17:58.497887 PyRigol_DS1000x-0.2/PyRigol_DS1000x/
--rw-rw-rw-   0        0        0    20777 2023-05-24 13:17:19.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x/PyRigol_DS1000x.py
--rw-rw-rw-   0        0        0      335 2023-05-24 00:43:17.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x/__init__.py
-drwxrwxrwx   0        0        0        0 2023-05-24 13:17:58.522889 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/
--rw-rw-rw-   0        0        0      591 2023-05-24 13:17:58.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      273 2023-05-24 13:17:58.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-05-24 13:17:58.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0        7 2023-05-24 13:17:58.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/requires.txt
--rw-rw-rw-   0        0        0       16 2023-05-24 13:17:58.000000 PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       42 2023-05-24 13:17:58.530891 PyRigol_DS1000x-0.2/setup.cfg
--rw-rw-rw-   0        0        0     1042 2023-05-24 13:11:48.000000 PyRigol_DS1000x-0.2/setup.py
+drwxrwxrwx   0        0        0        0 2023-05-28 23:38:53.454780 PyRigol_DS1000x-0.3/
+-rw-rw-rw-   0        0        0     1091 2023-05-24 00:39:39.000000 PyRigol_DS1000x-0.3/LICENSE
+-rw-rw-rw-   0        0        0      591 2023-05-28 23:38:53.454780 PyRigol_DS1000x-0.3/PKG-INFO
+drwxrwxrwx   0        0        0        0 2023-05-28 23:38:53.437130 PyRigol_DS1000x-0.3/PyRigol_DS1000x/
+-rw-rw-rw-   0        0        0    20960 2023-05-28 23:37:57.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x/PyRigol_DS1000x.py
+-rw-rw-rw-   0        0        0      335 2023-05-24 00:43:17.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x/__init__.py
+drwxrwxrwx   0        0        0        0 2023-05-28 23:38:53.453781 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/
+-rw-rw-rw-   0        0        0      591 2023-05-28 23:38:53.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      273 2023-05-28 23:38:53.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-05-28 23:38:53.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0        7 2023-05-28 23:38:53.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/requires.txt
+-rw-rw-rw-   0        0        0       16 2023-05-28 23:38:53.000000 PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       42 2023-05-28 23:38:53.454780 PyRigol_DS1000x-0.3/setup.cfg
+-rw-rw-rw-   0        0        0     1042 2023-05-24 13:11:48.000000 PyRigol_DS1000x-0.3/setup.py
```

### Comparing `PyRigol_DS1000x-0.2/LICENSE` & `PyRigol_DS1000x-0.3/LICENSE`

 * *Files identical despite different names*

### Comparing `PyRigol_DS1000x-0.2/PKG-INFO` & `PyRigol_DS1000x-0.3/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: PyRigol_DS1000x
-Version: 0.2
+Version: 0.3
 Summary: module to easily contorl a Rigol DS1000x series scope and quickly build a measurement setup
 Home-page: https://github.com/Minu-IU3IRR/PyRigol_DS1000x
 Author: Manuel Minutello
 License: MIT
 License-File: LICENSE
 
 module to easily implement a measurement with your Rigol DS1000x scope.
```

### Comparing `PyRigol_DS1000x-0.2/PyRigol_DS1000x/PyRigol_DS1000x.py` & `PyRigol_DS1000x-0.3/PyRigol_DS1000x/PyRigol_DS1000x.py`

 * *Files 2% similar despite different names*

```diff
@@ -147,1153 +147,1164 @@
 00000920: 2d3e 204e 6f6e 653a 0d0a 2020 2020 2020  -> None:..      
 00000930: 2020 7365 6c66 2e73 636f 7065 203d 2073    self.scope = s
 00000940: 636f 7065 0d0a 2020 2020 2020 2020 7365  cope..        se
 00000950: 6c66 2e6e 616d 6520 3d20 6e61 6d65 0d0a  lf.name = name..
 00000960: 2020 2020 2020 2020 7365 6c66 2e6e 756d          self.num
 00000970: 6265 7220 3d20 696e 7428 7365 6c66 2e6e  ber = int(self.n
 00000980: 616d 655b 2d31 5d29 0d0a 0d0a 2020 2020  ame[-1])....    
-00000990: 2020 2020 7365 6c66 2e5f 7661 6c69 645f      self._valid_
-000009a0: 6261 6e64 7769 7468 5f6c 696d 6974 203d  bandwith_limit =
-000009b0: 205b 274f 4646 272c 2027 3230 4d27 5d0d   ['OFF', '20M'].
-000009c0: 0a20 2020 2020 2020 2073 656c 662e 5f62  .        self._b
-000009d0: 616e 6477 6974 685f 6c69 6d69 7420 3d20  andwith_limit = 
-000009e0: 7365 6c66 2e62 616e 6477 6974 685f 6c69  self.bandwith_li
-000009f0: 6d69 7428 290d 0a0d 0a20 2020 2020 2020  mit()....       
-00000a00: 2073 656c 662e 5f76 616c 6964 5f61 7474   self._valid_att
-00000a10: 656e 7561 7469 6f6e 203d 205b 2730 2e30  enuation = ['0.0
-00000a20: 3127 2c20 2730 2e30 3227 2c20 2730 2e30  1', '0.02', '0.0
-00000a30: 3527 2c20 2730 2e31 272c 2027 302e 3227  5', '0.1', '0.2'
-00000a40: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00000a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000a60: 2020 2020 2020 2730 2e35 272c 2027 3127        '0.5', '1'
-00000a70: 2c20 2732 272c 2027 3527 2c20 2731 3027  , '2', '5', '10'
-00000a80: 2c20 2732 3027 2c20 2735 3027 2c20 2720  , '20', '50', ' 
-00000a90: 3130 3027 2c20 2732 3030 272c 2027 3530  100', '200', '50
-00000aa0: 3027 2c20 2731 3030 3027 5d0d 0a20 2020  0', '1000']..   
-00000ab0: 2020 2020 2073 656c 662e 5f70 726f 6265       self._probe
-00000ac0: 5f72 6174 696f 203d 2073 656c 662e 7072  _ratio = self.pr
-00000ad0: 6f62 655f 7261 7469 6f28 290d 0a20 2020  obe_ratio()..   
-00000ae0: 2020 2020 2073 656c 662e 5f73 6361 6c65       self._scale
-00000af0: 203d 2073 656c 662e 7363 616c 6528 290d   = self.scale().
-00000b00: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00000b10: 5f76 616c 6964 5f63 6f75 706c 696e 6720  _valid_coupling 
-00000b20: 3d20 5b27 4143 272c 2027 4443 272c 2027  = ['AC', 'DC', '
-00000b30: 474e 4427 5d0d 0a20 2020 2020 2020 2073  GND']..        s
-00000b40: 656c 662e 5f63 6f75 706c 696e 6720 3d20  elf._coupling = 
-00000b50: 7365 6c66 2e63 6f75 706c 696e 6728 290d  self.coupling().
-00000b60: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00000b70: 5f64 6973 706c 6179 203d 2073 656c 662e  _display = self.
-00000b80: 6469 7370 6c61 7928 290d 0a20 2020 2020  display()..     
-00000b90: 2020 2073 656c 662e 5f69 6e76 6572 7420     self._invert 
-00000ba0: 3d20 7365 6c66 2e69 6e76 6572 7428 290d  = self.invert().
-00000bb0: 0a20 2020 2020 2020 2073 656c 662e 5f6f  .        self._o
-00000bc0: 6666 7365 7420 3d20 7365 6c66 2e6f 6666  ffset = self.off
-00000bd0: 7365 7428 290d 0a20 2020 2020 2020 2073  set()..        s
-00000be0: 656c 662e 5f76 6f6c 7461 6765 5f72 616e  elf._voltage_ran
-00000bf0: 6765 203d 2073 656c 662e 7261 6e67 6528  ge = self.range(
-00000c00: 290d 0a0d 0a20 2020 2064 6566 205f 7365  )....    def _se
-00000c10: 745f 6765 7428 7365 6c66 2c20 636d 643a  t_get(self, cmd:
-00000c20: 2073 7472 2c20 7661 6c69 643a 206c 6973   str, valid: lis
-00000c30: 742c 206d 6f64 653a 2073 7472 203d 204e  t, mode: str = N
-00000c40: 6f6e 6529 3a0d 0a20 2020 2020 2020 2063  one):..        c
-00000c50: 6d64 203d 2063 6d64 2e66 6f72 6d61 7428  md = cmd.format(
-00000c60: 7365 6c66 2e6e 756d 6265 7229 0d0a 2020  self.number)..  
-00000c70: 2020 2020 2020 6966 206d 6f64 6520 6973        if mode is
-00000c80: 204e 6f6e 653a 0d0a 2020 2020 2020 2020   None:..        
-00000c90: 2020 2020 636d 6420 2b3d 2027 3f27 0d0a      cmd += '?'..
-00000ca0: 2020 2020 2020 2020 2020 2020 7661 6c20              val 
-00000cb0: 3d20 7365 6c66 2e73 636f 7065 2e71 7565  = self.scope.que
-00000cc0: 7279 2863 6d64 290d 0a20 2020 2020 2020  ry(cmd)..       
-00000cd0: 2020 2020 2072 6574 7572 6e20 7661 6c0d       return val.
-00000ce0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00000cf0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00000d00: 616c 6964 2069 7320 6e6f 7420 4e6f 6e65  alid is not None
-00000d10: 2061 6e64 206d 6f64 6520 6e6f 7420 696e   and mode not in
-00000d20: 2076 616c 6964 3a0d 0a20 2020 2020 2020   valid:..       
-00000d30: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
-00000d40: 7863 6570 7469 6f6e 2827 696e 7661 6c69  xception('invali
-00000d50: 6420 7661 6c75 6527 290d 0a20 2020 2020  d value')..     
-00000d60: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00000d70: 2020 2020 2020 2020 2020 2020 2020 636d                cm
-00000d80: 6420 2b3d 2066 2720 7b6d 6f64 657d 270d  d += f' {mode}'.
-00000d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000da0: 2073 656c 662e 7363 6f70 652e 7772 6974   self.scope.writ
-00000db0: 6528 636d 6429 0d0a 2020 2020 2020 2020  e(cmd)..        
-00000dc0: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00000dd0: 6f64 650d 0a0d 0a20 2020 2064 6566 2062  ode....    def b
-00000de0: 616e 6477 6974 685f 6c69 6d69 7428 7365  andwith_limit(se
-00000df0: 6c66 2c20 6d6f 6465 3a20 7374 7220 3d20  lf, mode: str = 
-00000e00: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
-00000e10: 7365 6c66 2e5f 6261 6e64 7769 7468 5f6c  self._bandwith_l
-00000e20: 696d 6974 203d 2073 656c 662e 5f73 6574  imit = self._set
-00000e30: 5f67 6574 2827 3a43 4841 4e6e 656c 7b7d  _get(':CHANnel{}
-00000e40: 3a42 574c 696d 6974 272c 0d0a 2020 2020  :BWLimit',..    
-00000e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e70: 2020 2020 2020 2020 2073 656c 662e 5f76           self._v
-00000e80: 616c 6964 5f62 616e 6477 6974 685f 6c69  alid_bandwith_li
-00000e90: 6d69 742c 206d 6f64 6529 0d0a 2020 2020  mit, mode)..    
-00000ea0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00000eb0: 5f62 616e 6477 6974 685f 6c69 6d69 740d  _bandwith_limit.
-00000ec0: 0a0d 0a20 2020 2064 6566 2063 6f75 706c  ...    def coupl
-00000ed0: 696e 6728 7365 6c66 2c20 6d6f 6465 3a20  ing(self, mode: 
-00000ee0: 7374 7220 3d20 4e6f 6e65 293a 0d0a 2020  str = None):..  
-00000ef0: 2020 2020 2020 7365 6c66 2e5f 636f 7570        self._coup
-00000f00: 6c69 6e67 203d 2073 656c 662e 5f73 6574  ling = self._set
-00000f10: 5f67 6574 280d 0a20 2020 2020 2020 2020  _get(..         
-00000f20: 2020 2027 3a43 4841 4e6e 656c 7b7d 3a43     ':CHANnel{}:C
-00000f30: 4f55 506c 696e 6727 2c20 7365 6c66 2e5f  OUPling', self._
-00000f40: 7661 6c69 645f 636f 7570 6c69 6e67 2c20  valid_coupling, 
-00000f50: 6d6f 6465 290d 0a20 2020 2020 2020 2072  mode)..        r
-00000f60: 6574 7572 6e20 7365 6c66 2e5f 636f 7570  eturn self._coup
-00000f70: 6c69 6e67 0d0a 0d0a 2020 2020 6465 6620  ling....    def 
-00000f80: 6469 7370 6c61 7928 7365 6c66 2c20 6d6f  display(self, mo
-00000f90: 6465 3a20 626f 6f6c 203d 204e 6f6e 6529  de: bool = None)
-00000fa0: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
-00000fb0: 5f64 6973 706c 6179 203d 2073 656c 662e  _display = self.
-00000fc0: 5f73 6574 5f67 6574 2827 3a43 4841 4e6e  _set_get(':CHANn
-00000fd0: 656c 7b7d 3a44 4953 506c 6179 272c 204e  el{}:DISPlay', N
-00000fe0: 6f6e 652c 206d 6f64 6529 0d0a 2020 2020  one, mode)..    
-00000ff0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00001000: 5f64 6973 706c 6179 0d0a 0d0a 2020 2020  _display....    
-00001010: 6465 6620 696e 7665 7274 2873 656c 662c  def invert(self,
-00001020: 206d 6f64 653a 2062 6f6f 6c20 3d20 4e6f   mode: bool = No
-00001030: 6e65 293a 0d0a 2020 2020 2020 2020 7365  ne):..        se
-00001040: 6c66 2e5f 696e 7665 7274 203d 2073 656c  lf._invert = sel
-00001050: 662e 5f73 6574 5f67 6574 2827 3a43 4841  f._set_get(':CHA
-00001060: 4e6e 656c 7b7d 3a49 4e56 6572 7427 2c20  Nnel{}:INVert', 
-00001070: 4e6f 6e65 2c20 6d6f 6465 290d 0a20 2020  None, mode)..   
-00001080: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00001090: 2e5f 696e 7665 7274 0d0a 0d0a 2020 2020  ._invert....    
-000010a0: 6465 6620 6f66 6673 6574 2873 656c 662c  def offset(self,
-000010b0: 2076 616c 3a20 666c 6f61 7420 3d20 4e6f   val: float = No
-000010c0: 6e65 293a 0d0a 2020 2020 2020 2020 6461  ne):..        da
-000010d0: 7461 5f76 616c 6964 203d 2046 616c 7365  ta_valid = False
-000010e0: 0d0a 2020 2020 2020 2020 6966 2076 616c  ..        if val
-000010f0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
-00001100: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00001110: 636c 6f73 6528 7365 6c66 2e5f 7072 6f62  close(self._prob
-00001120: 655f 7261 7469 6f2c 2031 2e30 293a 0d0a  e_ratio, 1.0):..
-00001130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001140: 6966 2073 656c 662e 5f76 6f6c 7461 6765  if self._voltage
-00001150: 5f72 616e 6765 203e 3d20 302e 353a 0d0a  _range >= 0.5:..
-00001160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001170: 2020 2020 6966 202d 3130 302e 3020 3c3d      if -100.0 <=
-00001180: 2076 616c 203c 3d20 3130 302e 303a 0d0a   val <= 100.0:..
-00001190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011a0: 2020 2020 2020 2020 6461 7461 5f76 616c          data_val
-000011b0: 6964 203d 2054 7275 650d 0a20 2020 2020  id = True..     
-000011c0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000011d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000011e0: 2020 2020 2020 6966 202d 322e 3020 3c3d        if -2.0 <=
-000011f0: 2076 616c 203c 3d20 322e 303a 0d0a 2020   val <= 2.0:..  
-00001200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001210: 2020 2020 2020 6461 7461 5f76 616c 6964        data_valid
-00001220: 203d 2054 7275 650d 0a20 2020 2020 2020   = True..       
-00001230: 2020 2020 2065 6c69 6620 6973 636c 6f73       elif isclos
-00001240: 6528 7365 6c66 2e5f 7072 6f62 655f 7261  e(self._probe_ra
-00001250: 7469 6f2c 2031 302e 3029 3a0d 0a20 2020  tio, 10.0):..   
-00001260: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00001270: 7365 6c66 2e5f 766f 6c74 6167 655f 7261  self._voltage_ra
-00001280: 6e67 6520 3e3d 2035 2e30 3a0d 0a20 2020  nge >= 5.0:..   
-00001290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000012a0: 2069 6620 2d31 3030 302e 3020 3c3d 2076   if -1000.0 <= v
-000012b0: 616c 203c 3d20 3130 3030 2e30 3a0d 0a20  al <= 1000.0:.. 
-000012c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000012d0: 2020 2020 2020 2064 6174 615f 7661 6c69         data_vali
-000012e0: 6420 3d20 5472 7565 0d0a 2020 2020 2020  d = True..      
-000012f0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00001300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001310: 2020 2020 2069 6620 2d32 302e 3020 3c3d       if -20.0 <=
-00001320: 2076 616c 203c 3d20 3230 2e30 3a0d 0a20   val <= 20.0:.. 
-00001330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001340: 2020 2020 2020 2064 6174 615f 7661 6c69         data_vali
-00001350: 6420 3d20 5472 7565 0d0a 2020 2020 2020  d = True..      
-00001360: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00001370: 2020 2020 2064 6174 615f 7661 6c69 6420       data_valid 
-00001380: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
-00001390: 2020 6966 2064 6174 615f 7661 6c69 643a    if data_valid:
-000013a0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-000013b0: 6c66 2e5f 6f66 6673 6574 203d 2073 656c  lf._offset = sel
-000013c0: 662e 5f73 6574 5f67 6574 2827 3a43 4841  f._set_get(':CHA
-000013d0: 4e6e 656c 7b7d 3a4f 4646 5365 7427 2c20  Nnel{}:OFFSet', 
-000013e0: 4e6f 6e65 2c20 7661 6c29 0d0a 2020 2020  None, val)..    
-000013f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00001400: 656c 662e 5f6f 6666 7365 740d 0a20 2020  elf._offset..   
-00001410: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00001420: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-00001430: 6365 7074 696f 6e28 2776 616c 7565 206f  ception('value o
-00001440: 7574 206f 6620 7261 6e67 6527 290d 0a0d  ut of range')...
-00001450: 0a20 2020 2064 6566 2072 616e 6765 2873  .    def range(s
-00001460: 656c 662c 2076 616c 3a20 666c 6f61 7420  elf, val: float 
-00001470: 3d20 4e6f 6e65 293a 0d0a 2020 2020 2020  = None):..      
-00001480: 2020 6966 2076 616c 2069 7320 6e6f 7420    if val is not 
-00001490: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-000014a0: 2020 2069 6620 6973 636c 6f73 6528 7365     if isclose(se
-000014b0: 6c66 2e5f 7072 6f62 655f 7261 7469 6f2c  lf._probe_ratio,
-000014c0: 2031 2e30 2920 616e 6420 6e6f 7420 302e   1.0) and not 0.
-000014d0: 3030 3820 3c3d 2076 616c 203c 3d20 3830  008 <= val <= 80
-000014e0: 2e30 206f 7220 5c0d 0a20 2020 2020 2020  .0 or \..       
-000014f0: 2020 2020 2020 2020 2020 2020 2069 7363               isc
-00001500: 6c6f 7365 2873 656c 662e 5f70 726f 6265  lose(self._probe
-00001510: 5f72 6174 696f 2c20 3130 2e30 2920 616e  _ratio, 10.0) an
-00001520: 6420 6e6f 7420 302e 3038 203c 3d20 7661  d not 0.08 <= va
-00001530: 6c20 3c3d 2038 3030 2e30 3a0d 0a20 2020  l <= 800.0:..   
-00001540: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00001550: 7365 2045 7863 6570 7469 6f6e 2827 7661  se Exception('va
-00001560: 6c75 6520 6f75 7420 6f66 2072 616e 6765  lue out of range
-00001570: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-00001580: 2e5f 766f 6c74 6167 655f 7261 6e67 6520  ._voltage_range 
-00001590: 3d20 7365 6c66 2e5f 7365 745f 6765 7428  = self._set_get(
-000015a0: 273a 4348 414e 6e65 6c7b 7d3a 5241 4e47  ':CHANnel{}:RANG
-000015b0: 6527 2c20 4e6f 6e65 2c20 7661 6c29 0d0a  e', None, val)..
-000015c0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000015d0: 656c 662e 5f76 6f6c 7461 6765 5f72 616e  elf._voltage_ran
-000015e0: 6765 0d0a 0d0a 2020 2020 6465 6620 6361  ge....    def ca
-000015f0: 6c5f 7469 6d65 6261 7365 5f64 656c 6179  l_timebase_delay
-00001600: 2873 656c 662c 2076 616c 3a20 666c 6f61  (self, val: floa
-00001610: 7420 3d20 4e6f 6e65 293a 0d0a 2020 2020  t = None):..    
-00001620: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00001630: 5f73 6574 5f67 6574 2827 3a43 4841 4e6e  _set_get(':CHANn
-00001640: 656c 7b7d 3a52 414e 4765 272c 204e 6f6e  el{}:RANGe', Non
-00001650: 652c 2076 616c 290d 0a0d 0a20 2020 2064  e, val)....    d
-00001660: 6566 2073 6361 6c65 2873 656c 662c 2076  ef scale(self, v
-00001670: 616c 3a20 666c 6f61 7420 3d20 4e6f 6e65  al: float = None
-00001680: 293a 0d0a 2020 2020 2020 2020 7365 6c66  ):..        self
-00001690: 2e5f 7363 616c 6520 3d20 7365 6c66 2e5f  ._scale = self._
-000016a0: 7365 745f 6765 7428 273a 4348 414e 6e65  set_get(':CHANne
-000016b0: 6c7b 7d3a 5343 414c 6527 2c20 4e6f 6e65  l{}:SCALe', None
-000016c0: 2c20 7661 6c29 0d0a 2020 2020 2020 2020  , val)..        
-000016d0: 7265 7475 726e 2073 656c 662e 5f73 6361  return self._sca
-000016e0: 6c65 0d0a 0d0a 2020 2020 6465 6620 7072  le....    def pr
-000016f0: 6f62 655f 7261 7469 6f28 7365 6c66 2c20  obe_ratio(self, 
-00001700: 7661 6c3a 2066 6c6f 6174 203d 204e 6f6e  val: float = Non
-00001710: 6529 3a0d 0a20 2020 2020 2020 2069 6620  e):..        if 
-00001720: 7661 6c20 6973 204e 6f6e 6520 6f72 2054  val is None or T
-00001730: 7275 6520 696e 205b 6973 636c 6f73 6528  rue in [isclose(
-00001740: 692c 2076 616c 2920 666f 7220 6920 696e  i, val) for i in
-00001750: 2073 656c 662e 5f76 616c 6964 5f61 7474   self._valid_att
-00001760: 656e 7561 7469 6f6e 5d3a 0d0a 2020 2020  enuation]:..    
-00001770: 2020 2020 2020 2020 7365 6c66 2e5f 7072          self._pr
-00001780: 6f62 655f 7261 7469 6f20 3d20 7365 6c66  obe_ratio = self
-00001790: 2e5f 7365 745f 6765 7428 273a 4348 414e  ._set_get(':CHAN
-000017a0: 6e65 6c7b 7d3a 5052 4f42 6527 2c20 4e6f  nel{}:PROBe', No
-000017b0: 6e65 2c20 7661 6c29 0d0a 2020 2020 2020  ne, val)..      
-000017c0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000017d0: 662e 5f70 726f 6265 5f72 6174 696f 0d0a  f._probe_ratio..
-000017e0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-000017f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00001800: 2045 7863 6570 7469 6f6e 2827 696e 7661   Exception('inva
-00001810: 6c69 6420 7661 6c75 6527 290d 0a0d 0a20  lid value').... 
-00001820: 2020 2023 2074 6f64 6f20 3a20 756e 6974     # todo : unit
-00001830: 732c 2076 6572 6e69 6572 0d0a 0d0a 0d0a  s, vernier......
-00001840: 636c 6173 7320 5761 7665 666f 726d 4d65  class WaveformMe
-00001850: 6173 7572 656d 656e 743a 0d0a 2020 2020  asurement:..    
-00001860: 2320 7469 6d65 730d 0a20 2020 2070 6572  # times..    per
-00001870: 696f 6420 3d20 2750 4552 696f 6427 2c20  iod = 'PERiod', 
-00001880: 310d 0a20 2020 2066 7265 7175 656e 6379  1..    frequency
-00001890: 203d 2027 4652 4551 7565 6e63 7927 2c20   = 'FREQuency', 
-000018a0: 310d 0a20 2020 2072 6169 7365 5f74 696d  1..    raise_tim
-000018b0: 6520 3d20 2752 5449 4d65 272c 2031 0d0a  e = 'RTIMe', 1..
-000018c0: 2020 2020 6661 6c6c 5f74 696d 6520 3d20      fall_time = 
-000018d0: 2746 5449 4d65 272c 2031 0d0a 2020 2020  'FTIMe', 1..    
-000018e0: 7769 6474 685f 706f 7320 3d20 2750 5749  width_pos = 'PWI
-000018f0: 4474 6827 2c20 310d 0a20 2020 2077 6964  Dth', 1..    wid
-00001900: 7468 5f6e 6567 203d 2027 4e57 4944 7468  th_neg = 'NWIDth
-00001910: 272c 2031 0d0a 2020 2020 6475 7479 5f70  ', 1..    duty_p
-00001920: 6f73 203d 2027 5044 5554 7927 2c20 310d  os = 'PDUTy', 1.
-00001930: 0a20 2020 2064 7574 795f 6e65 6720 3d20  .    duty_neg = 
-00001940: 274e 4455 5479 272c 2031 0d0a 2020 2020  'NDUTy', 1..    
-00001950: 7469 6d65 5f76 5f6d 6178 203d 2027 5456  time_v_max = 'TV
-00001960: 4d41 5827 2c20 310d 0a20 2020 2074 696d  MAX', 1..    tim
-00001970: 655f 765f 6d69 6e20 3d20 2754 564d 494e  e_v_min = 'TVMIN
-00001980: 272c 2031 0d0a 0d0a 2020 2020 2320 7075  ', 1....    # pu
-00001990: 6c73 6573 0d0a 2020 2020 7075 6c73 6573  lses..    pulses
-000019a0: 5f70 6f73 203d 2027 5050 554c 7365 7327  _pos = 'PPULses'
-000019b0: 2c20 310d 0a20 2020 2070 756c 7365 735f  , 1..    pulses_
-000019c0: 6e65 6720 3d20 274e 5055 4c73 6573 272c  neg = 'NPULses',
-000019d0: 2031 0d0a 2020 2020 6564 6765 735f 706f   1..    edges_po
-000019e0: 7320 3d20 2750 4544 4765 7327 2c20 310d  s = 'PEDGes', 1.
-000019f0: 0a20 2020 2065 6467 6573 5f6e 6567 203d  .    edges_neg =
-00001a00: 2027 4e45 4447 6573 272c 2031 0d0a 0d0a   'NEDGes', 1....
-00001a10: 2020 2020 2364 656c 6179 2061 6e64 2070      #delay and p
-00001a20: 6861 7365 0d0a 2020 2020 6465 6c61 795f  hase..    delay_
-00001a30: 7261 6973 655f 315f 3220 3d20 2752 4445  raise_1_2 = 'RDE
-00001a40: 4c61 7927 2c20 320d 0a20 2020 2064 656c  Lay', 2..    del
-00001a50: 6179 5f66 616c 6c5f 315f 3220 3d20 2746  ay_fall_1_2 = 'F
-00001a60: 4445 4c61 7927 2c20 320d 0a20 2020 2070  DELay', 2..    p
-00001a70: 6861 7365 5f72 6169 7365 5f31 5f32 203d  hase_raise_1_2 =
-00001a80: 2027 5250 4861 7365 272c 2032 0d0a 2020   'RPHase', 2..  
-00001a90: 2020 7068 6173 655f 6661 6c6c 5f31 5f32    phase_fall_1_2
-00001aa0: 203d 2027 4650 4861 7365 272c 2032 0d0a   = 'FPHase', 2..
-00001ab0: 0d0a 2020 2020 2320 766f 6c74 6167 650d  ..    # voltage.
-00001ac0: 0a20 2020 2076 5f6d 6178 203d 2027 564d  .    v_max = 'VM
-00001ad0: 4158 272c 2031 0d0a 2020 2020 765f 6d69  AX', 1..    v_mi
-00001ae0: 6e20 3d20 2756 4d49 4e27 2c20 310d 0a20  n = 'VMIN', 1.. 
-00001af0: 2020 2076 5f70 7020 3d20 2756 5050 272c     v_pp = 'VPP',
-00001b00: 2031 0d0a 2020 2020 765f 746f 7020 3d20   1..    v_top = 
-00001b10: 2756 544f 5027 2c20 310d 0a20 2020 2076  'VTOP', 1..    v
-00001b20: 5f62 6173 6520 3d20 2756 4241 5365 272c  _base = 'VBASe',
-00001b30: 2031 0d0a 2020 2020 765f 616d 7020 3d20   1..    v_amp = 
-00001b40: 2756 414d 5027 2c20 310d 0a20 2020 2076  'VAMP', 1..    v
-00001b50: 5f75 7070 6572 203d 2027 5655 5070 6572  _upper = 'VUPper
-00001b60: 272c 2031 0d0a 2020 2020 765f 6d69 6420  ', 1..    v_mid 
-00001b70: 3d20 2756 4d49 4427 2c20 310d 0a20 2020  = 'VMID', 1..   
-00001b80: 2076 5f6c 6f77 6572 203d 2027 564c 4f57   v_lower = 'VLOW
-00001b90: 6572 272c 2031 0d0a 2020 2020 765f 6176  er', 1..    v_av
-00001ba0: 6720 3d20 2756 4156 4727 2c20 310d 0a20  g = 'VAVG', 1.. 
-00001bb0: 2020 2076 5f72 6d73 203d 2027 5652 4d53     v_rms = 'VRMS
-00001bc0: 272c 2031 0d0a 2020 2020 6f76 6572 7368  ', 1..    oversh
-00001bd0: 6f6f 7420 3d20 274f 5645 5273 686f 6f74  oot = 'OVERshoot
-00001be0: 272c 2031 0d0a 2020 2020 7072 6573 686f  ', 1..    presho
-00001bf0: 6f74 203d 2027 5052 4553 686f 6f74 272c  ot = 'PREShoot',
-00001c00: 2031 0d0a 2020 2020 7065 7269 6f64 5f76   1..    period_v
-00001c10: 5f72 6d73 203d 2027 5056 524d 5327 2c20  _rms = 'PVRMS', 
-00001c20: 310d 0a20 2020 2076 6172 6961 6e63 6520  1..    variance 
-00001c30: 3d20 2756 4152 4961 6e63 6527 2c20 310d  = 'VARIance', 1.
-00001c40: 0a0d 0a20 2020 2023 206f 7468 6572 0d0a  ...    # other..
-00001c50: 2020 2020 7261 7465 5f70 6f73 203d 2027      rate_pos = '
-00001c60: 5053 4c45 5772 6174 6527 2c20 310d 0a20  PSLEWrate', 1.. 
-00001c70: 2020 2072 6174 655f 6e65 6720 3d20 274e     rate_neg = 'N
-00001c80: 534c 4557 7261 7465 272c 2031 0d0a 2020  SLEWrate', 1..  
-00001c90: 2020 6172 6561 203d 2027 4d41 5265 6127    area = 'MARea'
-00001ca0: 2c20 310d 0a20 2020 2070 6572 696f 645f  , 1..    period_
-00001cb0: 6172 6561 203d 2027 4d50 4152 6561 272c  area = 'MPARea',
-00001cc0: 2031 0d0a 0d0a 0d0a 636c 6173 7320 4d65   1......class Me
-00001cd0: 6173 7572 653a 0d0a 2020 2020 6465 6620  asure:..    def 
-00001ce0: 5f5f 696e 6974 5f5f 2873 656c 662c 2069  __init__(self, i
-00001cf0: 643a 2069 6e74 2c20 7363 6f70 652c 206d  d: int, scope, m
-00001d00: 6561 7375 7265 6d65 6e74 3a20 5761 7665  easurement: Wave
-00001d10: 666f 726d 4d65 6173 7572 656d 656e 742c  formMeasurement,
-00001d20: 2063 6861 6e6e 656c 5f61 3a20 4368 616e   channel_a: Chan
-00001d30: 6e65 6c2c 2063 6861 6e6e 656c 5f62 3a20  nel, channel_b: 
-00001d40: 4368 616e 6e65 6c20 3d20 4e6f 6e65 2c20  Channel = None, 
-00001d50: 6b65 793a 2073 7472 203d 204e 6f6e 6529  key: str = None)
-00001d60: 202d 3e20 4e6f 6e65 3a0d 0a20 2020 2020   -> None:..     
-00001d70: 2020 2073 656c 662e 7363 6f70 6520 3d20     self.scope = 
-00001d80: 7363 6f70 650d 0a20 2020 2020 2020 2073  scope..        s
-00001d90: 656c 662e 6d65 6173 7572 656d 656e 7420  elf.measurement 
-00001da0: 3d20 6d65 6173 7572 656d 656e 740d 0a20  = measurement.. 
-00001db0: 2020 2020 2020 2073 656c 662e 6368 616e         self.chan
-00001dc0: 6e65 6c5f 6120 3d20 6368 616e 6e65 6c5f  nel_a = channel_
-00001dd0: 610d 0a20 2020 2020 2020 2073 656c 662e  a..        self.
-00001de0: 6368 616e 6e65 6c5f 6220 3d20 6368 616e  channel_b = chan
-00001df0: 6e65 6c5f 620d 0a20 2020 2020 2020 2073  nel_b..        s
-00001e00: 656c 662e 6b65 7920 3d20 6b65 790d 0a20  elf.key = key.. 
-00001e10: 2020 2020 2020 2073 656c 662e 6964 203d         self.id =
-00001e20: 2069 640d 0a20 2020 2020 2020 2073 656c   id..        sel
-00001e30: 662e 6163 7469 7665 203d 2054 7275 650d  f.active = True.
-00001e40: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00001e50: 636d 6420 3d20 273a 4d45 4153 7572 653a  cmd = ':MEASure:
-00001e60: 4954 454d 270d 0a20 2020 2020 2020 2073  ITEM'..        s
-00001e70: 656c 662e 636d 645f 7461 696c 203d 2066  elf.cmd_tail = f
-00001e80: 2720 7b6d 6561 7375 7265 6d65 6e74 5b30  ' {measurement[0
-00001e90: 5d7d 270d 0a0d 0a20 2020 2020 2020 2069  ]}'....        i
-00001ea0: 6620 6368 616e 6e65 6c5f 6120 6973 206e  f channel_a is n
-00001eb0: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
-00001ec0: 2020 2020 2020 7365 6c66 2e63 6d64 5f74        self.cmd_t
-00001ed0: 6169 6c20 2b3d 2066 272c 7b73 656c 662e  ail += f',{self.
-00001ee0: 6368 616e 6e65 6c5f 612e 6e61 6d65 7d27  channel_a.name}'
-00001ef0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00001f00: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00001f10: 7365 2045 7863 6570 7469 6f6e 2827 7072  se Exception('pr
-00001f20: 696d 6172 7920 6368 616e 6e65 6c20 6e6f  imary channel no
-00001f30: 7420 7072 6f76 6964 6564 2729 0d0a 0d0a  t provided')....
-00001f40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00001f50: 6d65 6173 7572 656d 656e 745b 315d 203d  measurement[1] =
-00001f60: 3d20 323a 0d0a 2020 2020 2020 2020 2020  = 2:..          
-00001f70: 2020 6966 2063 6861 6e6e 656c 5f62 2069    if channel_b i
-00001f80: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00001f90: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00001fa0: 662e 636d 645f 7461 696c 202b 3d20 6627  f.cmd_tail += f'
-00001fb0: 2c7b 7365 6c66 2e63 6861 6e6e 656c 5f62  ,{self.channel_b
-00001fc0: 2e6e 616d 657d 270d 0a20 2020 2020 2020  .name}'..       
-00001fd0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00001fe0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00001ff0: 6520 4578 6365 7074 696f 6e28 2773 6563  e Exception('sec
-00002000: 6f6e 6420 6368 616e 6e65 6c20 6e6f 7420  ond channel not 
-00002010: 7072 6f76 6964 6564 2729 0d0a 0d0a 2020  provided')....  
-00002020: 2020 2020 2020 2320 7365 6e64 2074 6865        # send the
-00002030: 2063 6f6d 6d61 6e64 2074 6f20 7365 7475   command to setu
-00002040: 7020 7468 6520 6d65 6173 7572 656d 656e  p the measuremen
-00002050: 740d 0a20 2020 2020 2020 2073 656c 662e  t..        self.
-00002060: 7363 6f70 652e 7772 6974 6528 7365 6c66  scope.write(self
-00002070: 2e63 6d64 202b 2073 656c 662e 636d 645f  .cmd + self.cmd_
-00002080: 7461 696c 290d 0a0d 0a20 2020 2064 6566  tail)....    def
-00002090: 2072 6561 6428 7365 6c66 293a 0d0a 2020   read(self):..  
-000020a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000020b0: 662e 7363 6f70 652e 7175 6572 7928 7365  f.scope.query(se
-000020c0: 6c66 2e63 6d64 202b 2027 3f20 2720 2b20  lf.cmd + '? ' + 
-000020d0: 7365 6c66 2e63 6d64 5f74 6169 6c29 0d0a  self.cmd_tail)..
-000020e0: 0d0a 2020 2020 6465 6620 636c 6561 7228  ..    def clear(
-000020f0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00002100: 7365 6c66 2e73 636f 7065 2e77 7269 7465  self.scope.write
-00002110: 2866 273a 4d45 4153 7572 653a 434c 4561  (f':MEASure:CLEa
-00002120: 7220 4954 454d 7b73 656c 662e 6964 7d27  r ITEM{self.id}'
-00002130: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00002140: 6163 7469 7665 203d 2046 616c 7365 0d0a  active = False..
-00002150: 0d0a 2020 2020 6465 6620 7265 636f 7665  ..    def recove
-00002160: 7228 7365 6c66 293a 0d0a 2020 2020 2020  r(self):..      
-00002170: 2020 7365 6c66 2e73 636f 7065 2e77 7269    self.scope.wri
-00002180: 7465 2866 273a 4d45 4153 7572 653a 5245  te(f':MEASure:RE
-00002190: 436f 7665 7220 4954 454d 7b73 656c 662e  Cover ITEM{self.
-000021a0: 6964 7d27 290d 0a20 2020 2020 2020 2073  id}')..        s
-000021b0: 656c 662e 6163 7469 7665 203d 2054 7275  elf.active = Tru
-000021c0: 650d 0a0d 0a0d 0a63 6c61 7373 2043 6f75  e......class Cou
-000021d0: 6e74 6572 3a0d 0a20 2020 2064 6566 205f  nter:..    def _
-000021e0: 5f69 6e69 745f 5f28 7365 6c66 2c20 7363  _init__(self, sc
-000021f0: 6f70 6529 202d 3e20 4e6f 6e65 3a0d 0a20  ope) -> None:.. 
-00002200: 2020 2020 2020 2073 656c 662e 736f 7572         self.sour
-00002210: 6365 203d 204e 6f6e 650d 0a20 2020 2020  ce = None..     
-00002220: 2020 2073 656c 662e 7363 6f70 6520 3d20     self.scope = 
-00002230: 7363 6f70 650d 0a20 2020 2020 2020 2073  scope..        s
-00002240: 656c 662e 656e 6162 6c65 2829 0d0a 2020  elf.enable()..  
-00002250: 2020 2020 2020 7365 6c66 2e5f 6163 7469        self._acti
-00002260: 7665 203d 2046 616c 7365 0d0a 0d0a 2020  ve = False....  
-00002270: 2020 6465 6620 656e 6162 6c65 2873 656c    def enable(sel
-00002280: 662c 2063 6861 6e6e 656c 3a20 4368 616e  f, channel: Chan
-00002290: 6e65 6c20 3d20 4e6f 6e65 293a 0d0a 2020  nel = None):..  
-000022a0: 2020 2020 2020 6966 2063 6861 6e6e 656c        if channel
-000022b0: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-000022c0: 2020 2020 2020 2073 656c 662e 7265 6d6f         self.remo
-000022d0: 7665 2829 0d0a 2020 2020 2020 2020 2020  ve()..          
-000022e0: 2020 7365 6c66 2e5f 6163 7469 7665 203d    self._active =
-000022f0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00002300: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-00002310: 2020 2069 6620 6368 616e 6e65 6c20 696e     if channel in
-00002320: 2073 656c 662e 7363 6f70 652e 6368 616e   self.scope.chan
-00002330: 6e65 6c73 3a0d 0a20 2020 2020 2020 2020  nels:..         
-00002340: 2020 2020 2020 2073 656c 662e 736f 7572         self.sour
-00002350: 6365 203d 2063 6861 6e6e 656c 0d0a 2020  ce = channel..  
-00002360: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00002370: 6c66 2e5f 6163 7469 7665 203d 2054 7275  lf._active = Tru
-00002380: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
-00002390: 2020 2073 656c 662e 7363 6f70 652e 7772     self.scope.wr
-000023a0: 6974 6528 6627 3a4d 4541 5375 7265 3a43  ite(f':MEASure:C
-000023b0: 4f55 4e74 6572 3a53 4f55 5263 6520 7b73  OUNter:SOURce {s
-000023c0: 656c 662e 736f 7572 6365 2e6e 616d 657d  elf.source.name}
-000023d0: 2729 0d0a 2020 2020 2020 2020 2020 2020  ')..            
-000023e0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000023f0: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
-00002400: 6570 7469 6f6e 2827 696e 7661 6c69 6420  eption('invalid 
-00002410: 736f 7572 6365 2063 6861 6e6e 656c 2729  source channel')
-00002420: 0d0a 0d0a 2020 2020 6465 6620 7265 6164  ....    def read
-00002430: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00002440: 2069 6620 7365 6c66 2e5f 6163 7469 7665   if self._active
-00002450: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00002460: 6574 7572 6e20 666c 6f61 7428 7365 6c66  eturn float(self
-00002470: 2e73 636f 7065 2e71 7565 7279 2827 3a4d  .scope.query(':M
-00002480: 4541 5375 7265 3a43 4f55 4e74 6572 3a56  EASure:COUNter:V
-00002490: 414c 7565 3f27 2929 0d0a 2020 2020 2020  ALue?'))..      
-000024a0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000024b0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-000024c0: 0d0a 0d0a 2020 2020 6465 6620 7265 6d6f  ....    def remo
-000024d0: 7665 2873 656c 6629 3a0d 0a20 2020 2020  ve(self):..     
-000024e0: 2020 2073 656c 662e 6163 7469 7665 203d     self.active =
-000024f0: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00002500: 7365 6c66 2e73 636f 7065 2e77 7269 7465  self.scope.write
-00002510: 2866 273a 4d45 4153 7572 653a 434f 554e  (f':MEASure:COUN
-00002520: 7465 723a 534f 5552 6365 204f 4646 2729  ter:SOURce OFF')
-00002530: 0d0a 0d0a 0d0a 636c 6173 7320 5469 6d65  ......class Time
-00002540: 6261 7365 3a0d 0a20 2020 2064 6566 205f  base:..    def _
-00002550: 5f69 6e69 745f 5f28 7365 6c66 2c20 7363  _init__(self, sc
-00002560: 6f70 6529 202d 3e20 4e6f 6e65 3a0d 0a20  ope) -> None:.. 
-00002570: 2020 2020 2020 2073 656c 662e 7363 6f70         self.scop
-00002580: 6520 3d20 7363 6f70 650d 0a20 2020 2020  e = scope..     
-00002590: 2020 2073 656c 662e 5f64 656c 6179 5f65     self._delay_e
-000025a0: 6e61 626c 6520 3d20 5472 7565 2020 2320  nable = True  # 
-000025b0: 6f6e 6c79 2073 7461 7465 2069 6d70 6c65  only state imple
-000025c0: 6d65 6e74 6564 0d0a 2020 2020 2020 2020  mented..        
-000025d0: 7365 6c66 2e5f 6465 6c61 795f 6f66 6673  self._delay_offs
-000025e0: 6574 203d 204e 6f6e 650d 0a20 2020 2020  et = None..     
-000025f0: 2020 2073 656c 662e 5f64 656c 6179 5f73     self._delay_s
-00002600: 6361 6c65 203d 204e 6f6e 650d 0a20 2020  cale = None..   
-00002610: 2020 2020 2023 2074 6f64 6f2c 2072 6571       # todo, req
-00002620: 7569 7265 7320 7361 6d70 6c65 2072 6174  uires sample rat
-00002630: 6520 202d 3e3e 3e3e 3e3e 3e3e 3e3e 3e3e  e  ->>>>>>>>>>>>
-00002640: 3e3e 3e3e 3e3e 3e3e 3e20 7265 6164 7920  >>>>>>>>> ready 
-00002650: 746f 2069 6d70 6c65 6d65 6e74 0d0a 2020  to implement..  
-00002660: 2020 2020 2020 7365 6c66 2e5f 6d61 696e        self._main
-00002670: 5f6f 6666 7365 7420 3d20 4e6f 6e65 0d0a  _offset = None..
-00002680: 2020 2020 2020 2020 7365 6c66 2e5f 6d61          self._ma
-00002690: 696e 5f73 6361 6c65 203d 204e 6f6e 650d  in_scale = None.
-000026a0: 0a20 2020 2020 2020 2073 656c 662e 5f6d  .        self._m
-000026b0: 6f64 6520 3d20 4e6f 6e65 0d0a 2020 2020  ode = None..    
-000026c0: 2020 2020 2320 746f 646f 203a 2073 6574      # todo : set
-000026d0: 7570 0d0a 0d0a 2020 2020 6465 6620 656e  up....    def en
-000026e0: 6162 6c65 5f64 656c 6179 2873 656c 662c  able_delay(self,
-000026f0: 2073 7461 7465 3a20 626f 6f6c 203d 204e   state: bool = N
-00002700: 6f6e 6529 3a0d 0a20 2020 2020 2020 2063  one):..        c
-00002710: 6d64 203d 2027 3a54 494d 6562 6173 653a  md = ':TIMebase:
-00002720: 4445 4c61 793a 454e 4142 6c65 270d 0a20  DELay:ENABle'.. 
-00002730: 2020 2020 2020 2069 6620 7374 6174 6520         if state 
-00002740: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00002750: 2020 2020 2020 636d 6420 2b3d 2027 3f27        cmd += '?'
-00002760: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
-00002770: 6c20 3d20 7365 6c66 2e73 636f 7065 2e71  l = self.scope.q
-00002780: 7565 7279 2863 6d64 290d 0a20 2020 2020  uery(cmd)..     
-00002790: 2020 2020 2020 2076 616c 203d 2054 7275         val = Tru
-000027a0: 6520 6966 2076 616c 203d 3d20 2731 2720  e if val == '1' 
-000027b0: 656c 7365 2046 616c 7365 0d0a 2020 2020  else False..    
-000027c0: 2020 2020 2020 2020 7365 6c66 2e5f 6465          self._de
-000027d0: 6c61 795f 656e 6162 6c65 203d 2076 616c  lay_enable = val
-000027e0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-000027f0: 0a20 2020 2020 2020 2020 2020 2063 6d64  .            cmd
-00002800: 202b 3d20 2720 3127 2069 6620 7374 6174   += ' 1' if stat
-00002810: 6520 656c 7365 2027 2030 270d 0a20 2020  e else ' 0'..   
-00002820: 2020 2020 2020 2020 2073 656c 662e 7363           self.sc
-00002830: 6f70 652e 7772 6974 6528 636d 6429 0d0a  ope.write(cmd)..
-00002840: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00002850: 2e5f 6465 6c61 795f 656e 6162 6c65 203d  ._delay_enable =
-00002860: 2073 7461 7465 0d0a 2020 2020 2020 2020   state..        
-00002870: 7265 7475 726e 2073 656c 662e 5f64 656c  return self._del
-00002880: 6179 5f65 6e61 626c 650d 0a0d 0a0d 0a63  ay_enable......c
-00002890: 6c61 7373 2050 7952 6967 6f6c 5f44 5331  lass PyRigol_DS1
-000028a0: 3030 3078 3a0d 0a20 2020 2069 6d70 6f72  000x:..    impor
-000028b0: 7420 7079 7669 7361 0d0a 2020 2020 696d  t pyvisa..    im
-000028c0: 706f 7274 206d 6174 680d 0a20 2020 2069  port math..    i
-000028d0: 6d70 6f72 7420 7265 0d0a 0d0a 2020 2020  mport re....    
-000028e0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-000028f0: 662c 2056 4953 415f 7265 736f 7572 6365  f, VISA_resource
-00002900: 5f6d 616e 6167 6572 3a20 7079 7669 7361  _manager: pyvisa
-00002910: 2e52 6573 6f75 7263 654d 616e 6167 6572  .ResourceManager
-00002920: 2c20 6164 6472 6573 732c 2063 6f6e 6e65  , address, conne
-00002930: 6374 3a20 626f 6f6c 203d 2054 7275 6529  ct: bool = True)
-00002940: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
-00002950: 726d 203d 2056 4953 415f 7265 736f 7572  rm = VISA_resour
-00002960: 6365 5f6d 616e 6167 6572 0d0a 2020 2020  ce_manager..    
-00002970: 2020 2020 7365 6c66 2e69 6e74 6572 6661      self.interfa
-00002980: 6365 203d 204e 6f6e 650d 0a20 2020 2020  ce = None..     
-00002990: 2020 2073 656c 662e 6164 6472 6573 7320     self.address 
-000029a0: 3d20 6164 6472 6573 730d 0a20 2020 2020  = address..     
-000029b0: 2020 2073 656c 662e 636f 6e6e 6563 7465     self.connecte
-000029c0: 6420 3d20 4661 6c73 650d 0a0d 0a20 2020  d = False....   
-000029d0: 2020 2020 2023 2061 6371 7569 7369 7469       # acquisiti
-000029e0: 6f6e 0d0a 2020 2020 2020 2020 7365 6c66  on..        self
-000029f0: 2e5f 6163 7175 6972 655f 6d6f 6465 203d  ._acquire_mode =
-00002a00: 204e 6f6e 6520 2023 2064 6f6e 6520 696e   None  # done in
-00002a10: 2073 6574 7570 0d0a 2020 2020 2020 2020   setup..        
-00002a20: 7365 6c66 2e5f 7661 6c69 645f 6163 7175  self._valid_acqu
-00002a30: 6972 655f 6d6f 6465 203d 205b 274e 4f52  ire_mode = ['NOR
-00002a40: 4d27 2c20 2741 5645 5227 2c20 2750 4541  M', 'AVER', 'PEA
-00002a50: 4b27 2c20 2748 5245 5327 5d0d 0a0d 0a20  K', 'HRES'].... 
-00002a60: 2020 2020 2020 2073 656c 662e 7361 6d70         self.samp
-00002a70: 6c65 5f72 6174 6520 3d20 4e6f 6e65 2020  le_rate = None  
-00002a80: 2320 646f 6e65 2069 6e20 7365 7475 700d  # done in setup.
-00002a90: 0a20 2020 2020 2020 2073 656c 662e 6d65  .        self.me
-00002aa0: 6d6f 7279 5f64 6570 7468 203d 204e 6f6e  mory_depth = Non
-00002ab0: 6520 2023 2064 6f6e 6520 696e 2073 6574  e  # done in set
-00002ac0: 7570 0d0a 0d0a 2020 2020 2020 2020 2320  up....        # 
-00002ad0: 6c6f 6361 6c20 7374 6174 650d 0a20 2020  local state..   
-00002ae0: 2020 2020 2073 656c 662e 5f77 6176 6566       self._wavef
-00002af0: 6f72 6d5f 736f 7572 6365 203d 204e 6f6e  orm_source = Non
-00002b00: 6520 2023 2064 6f6e 6520 696e 2073 6574  e  # done in set
-00002b10: 7570 0d0a 0d0a 2020 2020 2020 2020 7365  up....        se
-00002b20: 6c66 2e5f 7761 7665 666f 726d 5f72 6561  lf._waveform_rea
-00002b30: 6469 6e67 5f6d 6f64 6520 3d20 4e6f 6e65  ding_mode = None
-00002b40: 2020 2320 646f 6e65 2069 6e20 7365 7475    # done in setu
-00002b50: 700d 0a20 2020 2020 2020 2073 656c 662e  p..        self.
-00002b60: 5f76 616c 6964 5f77 6176 6566 6f72 6d5f  _valid_waveform_
-00002b70: 6d6f 6465 203d 205b 274e 4f52 4d27 2c20  mode = ['NORM', 
-00002b80: 274d 4158 272c 2027 5241 5727 5d0d 0a0d  'MAX', 'RAW']...
-00002b90: 0a20 2020 2020 2020 2073 656c 662e 5f77  .        self._w
-00002ba0: 6176 6566 6f72 6d5f 7265 7475 726e 5f66  aveform_return_f
-00002bb0: 6f72 6d61 7420 3d20 4e6f 6e65 2020 2320  ormat = None  # 
-00002bc0: 646f 6e65 2069 6e20 7365 7475 700d 0a20  done in setup.. 
-00002bd0: 2020 2020 2020 2073 656c 662e 5f76 616c         self._val
-00002be0: 6964 5f77 6176 6566 6f72 6d5f 666f 726d  id_waveform_form
-00002bf0: 6174 203d 205b 2757 4f52 4427 2c20 2742  at = ['WORD', 'B
-00002c00: 5954 4527 2c20 2741 5343 275d 0d0a 0d0a  YTE', 'ASC']....
-00002c10: 2020 2020 2020 2020 2320 6d65 6173 7572          # measur
-00002c20: 656d 656e 740d 0a20 2020 2020 2020 2073  ement..        s
-00002c30: 656c 662e 5f6d 6561 7375 7265 6d65 6e74  elf._measurement
-00002c40: 733a 6c69 7374 5b4d 6561 7375 7265 5d20  s:list[Measure] 
-00002c50: 3d20 5b5d 0d0a 2020 2020 2020 2020 7365  = []..        se
-00002c60: 6c66 2e5f 6d61 785f 6d65 6173 7572 656d  lf._max_measurem
-00002c70: 656e 7473 203d 2036 2020 2320 746f 646f  ents = 6  # todo
-00002c80: 2c20 6368 6563 6b0d 0a0d 0a20 2020 2020  , check....     
-00002c90: 2020 2073 656c 662e 636f 756e 7465 7220     self.counter 
-00002ca0: 3d20 4e6f 6e65 2020 2320 646f 6e65 2069  = None  # done i
-00002cb0: 6e20 7365 7475 700d 0a0d 0a20 2020 2020  n setup....     
-00002cc0: 2020 2023 2076 616c 6964 6174 696f 6e0d     # validation.
-00002cd0: 0a20 2020 2020 2020 2073 656c 662e 5f76  .        self._v
-00002ce0: 616c 6964 5f63 6861 6e6e 656c 7320 3d20  alid_channels = 
-00002cf0: 5b27 4348 414e 3127 2c20 2743 4841 4e32  ['CHAN1', 'CHAN2
-00002d00: 272c 2027 4348 414e 3327 2c20 2743 4841  ', 'CHAN3', 'CHA
-00002d10: 4e34 275d 0d0a 2020 2020 2020 2020 7365  N4']..        se
-00002d20: 6c66 2e63 6861 6e6e 656c 7320 3d20 4e6f  lf.channels = No
-00002d30: 6e65 2020 2320 646f 6e65 2069 6e20 7365  ne  # done in se
-00002d40: 7475 700d 0a0d 0a20 2020 2020 2020 2023  tup....        #
-00002d50: 2063 6f6e 6e65 6374 696f 6e0d 0a20 2020   connection..   
-00002d60: 2020 2020 2069 6620 636f 6e6e 6563 743a       if connect:
-00002d70: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00002d80: 6c66 2e6f 7065 6e28 290d 0a0d 0a20 2020  lf.open()....   
-00002d90: 2023 202d 2d20 696e 7465 7266 6163 6520   # -- interface 
-00002da0: 6d61 6e61 6765 6d65 6e74 0d0a 0d0a 2020  management....  
-00002db0: 2020 6465 6620 7365 7475 7028 7365 6c66    def setup(self
-00002dc0: 293a 0d0a 2020 2020 2020 2020 7365 6c66  ):..        self
-00002dd0: 2e61 6371 7569 7265 5f6d 6f64 6528 290d  .acquire_mode().
-00002de0: 0a20 2020 2020 2020 2073 656c 662e 6163  .        self.ac
-00002df0: 7175 6972 655f 7361 6d70 6c65 5f72 6174  quire_sample_rat
-00002e00: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
-00002e10: 662e 6163 7175 6972 655f 6d65 6d6f 7279  f.acquire_memory
-00002e20: 5f64 6570 7468 2829 0d0a 0d0a 2020 2020  _depth()....    
-00002e30: 2020 2020 7365 6c66 2e77 6176 6566 6f72      self.wavefor
-00002e40: 6d5f 736f 7572 6365 2829 0d0a 2020 2020  m_source()..    
-00002e50: 2020 2020 7365 6c66 2e77 6176 6566 6f72      self.wavefor
-00002e60: 6d5f 7265 6164 5f6d 6f64 6528 290d 0a20  m_read_mode().. 
-00002e70: 2020 2020 2020 2073 656c 662e 7761 7665         self.wave
-00002e80: 666f 726d 5f72 6574 7572 6e5f 666f 726d  form_return_form
-00002e90: 6174 2827 4153 4327 290d 0a0d 0a20 2020  at('ASC')....   
-00002ea0: 2020 2020 2073 656c 662e 6368 616e 6e65       self.channe
-00002eb0: 6c73 203d 205b 4368 616e 6e65 6c28 7365  ls = [Channel(se
-00002ec0: 6c66 2c20 6929 2066 6f72 2069 2069 6e20  lf, i) for i in 
-00002ed0: 7365 6c66 2e5f 7661 6c69 645f 6368 616e  self._valid_chan
-00002ee0: 6e65 6c73 5d0d 0a20 2020 2020 2020 2073  nels]..        s
-00002ef0: 656c 662e 636f 756e 7465 7220 3d20 436f  elf.counter = Co
-00002f00: 756e 7465 7228 7365 6c66 290d 0a0d 0a20  unter(self).... 
-00002f10: 2020 2064 6566 2077 7269 7465 2873 656c     def write(sel
-00002f20: 662c 2064 6174 6129 3a0d 0a20 2020 2020  f, data):..     
-00002f30: 2020 2069 6620 7365 6c66 2e69 6e74 6572     if self.inter
-00002f40: 6661 6365 2069 7320 6e6f 7420 4e6f 6e65  face is not None
-00002f50: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
-00002f60: 7269 6e74 2866 2777 7269 7465 202d 3e7b  rint(f'write ->{
-00002f70: 6461 7461 7d27 290d 0a20 2020 2020 2020  data}')..       
-00002f80: 2020 2020 2073 656c 662e 696e 7465 7266       self.interf
-00002f90: 6163 652e 7772 6974 6528 6461 7461 290d  ace.write(data).
-00002fa0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00002fb0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00002fc0: 6520 4578 6365 7074 696f 6e28 2769 6e73  e Exception('ins
-00002fd0: 7472 756d 656e 7420 6e6f 7420 636f 6e6e  trument not conn
-00002fe0: 6563 7465 6427 290d 0a0d 0a20 2020 2064  ected')....    d
-00002ff0: 6566 2071 7565 7279 2873 656c 662c 2071  ef query(self, q
-00003000: 7565 7279 5f73 7472 696e 673a 2073 7472  uery_string: str
-00003010: 293a 0d0a 2020 2020 2020 2020 7072 696e  ):..        prin
-00003020: 7428 6627 7175 6572 7920 2d3e 7b71 7565  t(f'query ->{que
-00003030: 7279 5f73 7472 696e 677d 2729 0d0a 2020  ry_string}')..  
-00003040: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00003050: 2073 656c 662e 696e 7465 7266 6163 652e   self.interface.
-00003060: 7175 6572 7928 7175 6572 795f 7374 7269  query(query_stri
-00003070: 6e67 290d 0a20 2020 2020 2020 2072 6574  ng)..        ret
-00003080: 7572 6e20 7265 7370 6f6e 7365 0d0a 0d0a  urn response....
-00003090: 2020 2020 6465 6620 6f70 656e 2873 656c      def open(sel
-000030a0: 6629 3a0d 0a20 2020 2020 2020 2074 7279  f):..        try
-000030b0: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-000030c0: 656c 662e 696e 7465 7266 6163 6520 3d20  elf.interface = 
-000030d0: 7365 6c66 2e72 6d2e 6f70 656e 5f72 6573  self.rm.open_res
-000030e0: 6f75 7263 6528 7365 6c66 2e61 6464 7265  ource(self.addre
-000030f0: 7373 2c0d 0a20 2020 2020 2020 2020 2020  ss,..           
-00003100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003120: 2020 2020 2020 2020 7265 6164 5f74 6572          read_ter
-00003130: 6d69 6e61 7469 6f6e 3d27 5c6e 272c 0d0a  mination='\n',..
-00003140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003170: 2020 2077 7269 7465 5f74 6572 6d69 6e61     write_termina
-00003180: 7469 6f6e 3d27 5c6e 2729 0d0a 0d0a 2020  tion='\n')....  
-00003190: 2020 2020 2020 2020 2020 6d6f 6465 6c20            model 
-000031a0: 3d20 7365 6c66 2e69 6e74 6572 6661 6365  = self.interface
-000031b0: 2e6d 6f64 656c 5f6e 616d 650d 0a20 2020  .model_name..   
-000031c0: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
-000031d0: 6c20 3d3d 2027 4453 3130 3030 5a20 5365  l == 'DS1000Z Se
-000031e0: 7269 6573 273a 0d0a 2020 2020 2020 2020  ries':..        
-000031f0: 2020 2020 2020 2020 7365 6c66 2e63 6f6e          self.con
-00003200: 6e65 6374 6564 203d 2054 7275 650d 0a20  nected = True.. 
-00003210: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00003220: 656c 662e 7365 7475 7028 290d 0a20 2020  elf.setup()..   
-00003230: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00003240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003250: 7365 6c66 2e63 6f6e 6e65 6374 6564 203d  self.connected =
-00003260: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00003270: 2020 2020 2020 2020 7365 6c66 2e69 6e74          self.int
-00003280: 6572 6661 6365 2e63 6c6f 7365 2829 0d0a  erface.close()..
-00003290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032a0: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
-000032b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000032c0: 2020 2020 2020 6627 496e 7661 6c69 6420        f'Invalid 
-000032d0: 696e 7374 7275 6d65 6e74 206d 6f64 656c  instrument model
-000032e0: 2c20 6f6e 6c79 2044 5331 3030 305a 2053  , only DS1000Z S
-000032f0: 6572 6965 7320 7363 6f70 6573 2061 7265  eries scopes are
-00003300: 2073 7570 706f 7274 6564 2c20 676f 7420   supported, got 
-00003310: 3a20 7b6d 6f64 656c 7d27 290d 0a0d 0a20  : {model}').... 
-00003320: 2020 2020 2020 2065 7863 6570 7420 7365         except se
-00003330: 6c66 2e70 7976 6973 612e 6572 726f 7273  lf.pyvisa.errors
-00003340: 2e56 6973 6149 4f45 7272 6f72 3a0d 0a20  .VisaIOError:.. 
-00003350: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00003360: 636f 6e6e 6563 7465 6420 3d20 4661 6c73  connected = Fals
-00003370: 650d 0a20 2020 2020 2020 2020 2020 2072  e..            r
-00003380: 6169 7365 2045 7863 6570 7469 6f6e 2827  aise Exception('
-00003390: 436f 6e6e 6563 7469 6f6e 2046 6169 6c75  Connection Failu
-000033a0: 7265 2c20 756e 6162 6c65 2074 6f20 6f70  re, unable to op
-000033b0: 656e 2056 6973 6120 7265 736f 7572 6365  en Visa resource
-000033c0: 2729 0d0a 0d0a 2020 2020 2320 4945 4545  ')....    # IEEE
-000033d0: 2063 6f6d 7061 7469 626c 650d 0a0d 0a20   compatible.... 
-000033e0: 2020 2064 6566 2069 646e 2873 656c 6629     def idn(self)
-000033f0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00003400: 6e20 7365 6c66 2e71 7565 7279 2827 2a49  n self.query('*I
-00003410: 444e 3f27 290d 0a0d 0a20 2020 2023 202d  DN?')....    # -
-00003420: 2d20 6163 7175 6973 6974 696f 6e20 7374  - acquisition st
-00003430: 6174 650d 0a0d 0a20 2020 2064 6566 2061  ate....    def a
-00003440: 7574 6f73 6361 6c65 2873 656c 6629 3a0d  utoscale(self):.
-00003450: 0a20 2020 2020 2020 2022 2222 456e 6162  .        """Enab
-00003460: 6c65 2074 6865 2077 6176 6566 6f72 6d20  le the waveform 
-00003470: 6175 746f 2073 6574 7469 6e67 2066 756e  auto setting fun
-00003480: 6374 696f 6e2e 2054 6865 206f 7363 696c  ction. The oscil
-00003490: 6c6f 7363 6f70 6520 7769 6c6c 2061 7574  loscope will aut
-000034a0: 6f6d 6174 6963 616c 6c79 2061 646a 7573  omatically adjus
-000034b0: 7420 7468 6520 7665 7274 6963 616c 2073  t the vertical s
-000034c0: 6361 6c65 2c20 686f 7269 7a6f 6e74 616c  cale, horizontal
-000034d0: 2074 696d 6562 6173 652c 2061 6e64 2074   timebase, and t
-000034e0: 7269 6767 6572 206d 6f64 6520 6163 636f  rigger mode acco
-000034f0: 7264 696e 6720 746f 2074 6865 2069 6e70  rding to the inp
-00003500: 7574 2073 6967 6e61 6c20 746f 2072 6561  ut signal to rea
-00003510: 6c69 7a65 206f 7074 696d 756d 2077 6176  lize optimum wav
-00003520: 6566 6f72 6d20 6469 7370 6c61 7922 2222  eform display"""
-00003530: 0d0a 2020 2020 2020 2020 7365 6c66 2e77  ..        self.w
-00003540: 7269 7465 2827 3a41 5554 6f73 6361 6c65  rite(':AUToscale
-00003550: 2729 0d0a 0d0a 2020 2020 6465 6620 636c  ')....    def cl
-00003560: 6561 7228 7365 6c66 293a 0d0a 2020 2020  ear(self):..    
-00003570: 2020 2020 2222 2243 6c65 6172 2061 6c6c      """Clear all
-00003580: 2074 6865 2077 6176 6566 6f72 6d73 206f   the waveforms o
-00003590: 6e20 7468 6520 7363 7265 656e 2222 220d  n the screen""".
-000035a0: 0a20 2020 2020 2020 2073 656c 662e 7772  .        self.wr
-000035b0: 6974 6528 273a 434c 4561 7227 290d 0a0d  ite(':CLEar')...
-000035c0: 0a20 2020 2064 6566 2072 756e 2873 656c  .    def run(sel
-000035d0: 6629 3a0d 0a20 2020 2020 2020 2022 2222  f):..        """
-000035e0: 5374 6172 7473 2077 6176 6566 6f72 6d20  Starts waveform 
-000035f0: 6163 7175 6973 6974 696f 6e22 2222 0d0a  acquisition"""..
-00003600: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
-00003610: 7465 2827 3a52 554e 2729 0d0a 0d0a 2020  te(':RUN')....  
-00003620: 2020 6465 6620 7374 6f70 2873 656c 6629    def stop(self)
-00003630: 3a0d 0a20 2020 2020 2020 2022 2222 5374  :..        """St
-00003640: 6f70 7320 7761 7665 666f 726d 2061 6371  ops waveform acq
-00003650: 7569 7369 7469 6f6e 2222 220d 0a20 2020  uisition"""..   
-00003660: 2020 2020 2073 656c 662e 7772 6974 6528       self.write(
-00003670: 273a 5354 4f50 2729 0d0a 0d0a 2020 2020  ':STOP')....    
-00003680: 6465 6620 7369 6e67 6c65 2873 656c 6629  def single(self)
-00003690: 3a0d 0a20 2020 2020 2020 2022 2222 5365  :..        """Se
-000036a0: 7420 7468 6520 6f73 6369 6c6c 6f73 636f  t the oscillosco
-000036b0: 7065 2074 6f20 7468 6520 7369 6e67 6c65  pe to the single
-000036c0: 2074 7269 6767 6572 206d 6f64 652e 2222   trigger mode.""
-000036d0: 220d 0a20 2020 2020 2020 2073 656c 662e  "..        self.
-000036e0: 7772 6974 6528 273a 5349 4e47 6c65 2729  write(':SINGle')
-000036f0: 0d0a 0d0a 2020 2020 6465 6620 666f 7263  ....    def forc
-00003700: 655f 7472 6967 6765 7228 7365 6c66 293a  e_trigger(self):
-00003710: 0d0a 2020 2020 2020 2020 2222 2247 656e  ..        """Gen
-00003720: 6572 6174 6520 6120 7472 6967 6765 7220  erate a trigger 
-00003730: 7369 676e 616c 2066 6f72 6365 6675 6c6c  signal forcefull
-00003740: 792e 2054 6869 7320 636f 6d6d 616e 6420  y. This command 
-00003750: 6973 206f 6e6c 7920 6170 706c 6963 6162  is only applicab
-00003760: 6c65 2074 6f20 7468 6520 6e6f 726d 616c  le to the normal
-00003770: 2061 6e64 2073 696e 676c 6520 7472 6967   and single trig
-00003780: 6765 7220 6d6f 6465 7322 2222 0d0a 2020  ger modes"""..  
-00003790: 2020 2020 2020 7365 6c66 2e77 7269 7465        self.write
-000037a0: 2827 5446 4f52 6365 2729 0d0a 0d0a 2020  ('TFORce')....  
-000037b0: 2020 2320 2d2d 2061 6371 7569 7265 5f73    # -- acquire_s
-000037c0: 6563 7469 6f6e 0d0a 0d0a 2020 2020 6465  ection....    de
-000037d0: 6620 6176 6572 6167 6573 2873 656c 662c  f averages(self,
-000037e0: 206e 3a20 696e 7420 3d20 4e6f 6e65 293a   n: int = None):
-000037f0: 0d0a 2020 2020 2020 2020 2222 2253 6574  ..        """Set
-00003800: 206f 7220 7175 6572 7920 7468 6520 6e75   or query the nu
-00003810: 6d62 6572 206f 6620 6176 6572 6167 6573  mber of averages
-00003820: 2075 6e64 6572 2074 6865 2061 7665 7261   under the avera
-00003830: 6765 2061 6371 7569 7369 7469 6f6e 206d  ge acquisition m
-00003840: 6f64 652e 2222 220d 0a20 2020 2020 2020  ode."""..       
-00003850: 2063 6d64 203d 2027 3a41 4351 7569 7265   cmd = ':ACQuire
-00003860: 3a41 5645 5261 6765 7327 0d0a 2020 2020  :AVERages'..    
-00003870: 2020 2020 6966 206e 2069 7320 4e6f 6e65      if n is None
-00003880: 3a0d 0a20 2020 2020 2020 2020 2020 2063  :..            c
-00003890: 6d64 202b 3d20 273f 270d 0a20 2020 2020  md += '?'..     
-000038a0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-000038b0: 6c66 2e71 7565 7279 2863 6d64 290d 0a20  lf.query(cmd).. 
-000038c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000038d0: 2020 2020 2020 2020 2020 7661 6c20 3d20            val = 
-000038e0: 7365 6c66 2e6d 6174 682e 6c6f 6732 286e  self.math.log2(n
-000038f0: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00003900: 6f75 6e64 5f76 616c 203d 2072 6f75 6e64  ound_val = round
-00003910: 2876 616c 290d 0a20 2020 2020 2020 2020  (val)..         
-00003920: 2020 2069 6620 7365 6c66 2e6d 6174 682e     if self.math.
-00003930: 6973 636c 6f73 6528 7661 6c2c 2072 6f75  isclose(val, rou
-00003940: 6e64 5f76 616c 293a 0d0a 2020 2020 2020  nd_val):..      
-00003950: 2020 2020 2020 2020 2020 7661 6c20 3d20            val = 
-00003960: 696e 7428 7365 6c66 2e6d 6174 682e 6c6f  int(self.math.lo
-00003970: 6732 286e 2929 0d0a 2020 2020 2020 2020  g2(n))..        
-00003980: 2020 2020 2020 2020 636d 6420 2b3d 2066          cmd += f
-00003990: 2720 7b6e 7d27 0d0a 2020 2020 2020 2020  ' {n}'..        
-000039a0: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
-000039b0: 7465 2863 6d64 290d 0a20 2020 2020 2020  te(cmd)..       
-000039c0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-000039d0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000039e0: 6520 4578 6365 7074 696f 6e28 0d0a 2020  e Exception(..  
-000039f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a00: 2020 6627 6176 6572 6167 6520 6f75 7473    f'average outs
-00003a10: 6964 6520 7661 6c69 6420 7261 6e67 6520  ide valid range 
-00003a20: 325e 6e20 666f 7220 6e20 696e 2031 2d31  2^n for n in 1-1
-00003a30: 302c 2067 6976 656e 3a20 7b6e 7d27 290d  0, given: {n}').
-00003a40: 0a0d 0a20 2020 2064 6566 2061 6371 7569  ...    def acqui
-00003a50: 7265 5f6d 656d 6f72 795f 6465 7074 6828  re_memory_depth(
-00003a60: 7365 6c66 2c20 6465 7074 683a 696e 7420  self, depth:int 
-00003a70: 3d20 4e6f 6e65 293a 0d0a 2020 2020 2020  = None):..      
-00003a80: 2020 2222 2253 6574 206f 7220 7175 6572    """Set or quer
-00003a90: 7920 7468 6520 6d65 6d6f 7279 2064 6570  y the memory dep
-00003aa0: 7468 206f 6620 7468 6520 6f73 6369 6c6c  th of the oscill
-00003ab0: 6f73 636f 7065 2028 6e61 6d65 6c79 2074  oscope (namely t
-00003ac0: 6865 206e 756d 6265 7220 6f66 2077 6176  he number of wav
-00003ad0: 6566 6f72 6d20 706f 696e 7473 2074 6861  eform points tha
-00003ae0: 7420 6361 6e20 6265 2073 746f 7265 6420  t can be stored 
-00003af0: 696e 2061 2073 696e 676c 6520 7472 6967  in a single trig
-00003b00: 6765 7220 7361 6d70 6c65 292e 2054 6865  ger sample). The
-00003b10: 2064 6566 6175 6c74 2075 6e69 7420 6973   default unit is
-00003b20: 2070 7473 2028 706f 696e 7473 2920 6f72   pts (points) or
-00003b30: 2027 4155 544f 272e 2222 220d 0a20 2020   'AUTO'."""..   
-00003b40: 2020 2020 2063 6d64 203d 2027 3a41 4351       cmd = ':ACQ
-00003b50: 7569 7265 3a4d 4445 5074 6827 0d0a 2020  uire:MDEPth'..  
-00003b60: 2020 2020 2020 6966 2064 6570 7468 2069        if depth i
-00003b70: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00003b80: 2020 2020 2063 6d64 202b 3d20 273f 270d       cmd += '?'.
-00003b90: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-00003ba0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00003bb0: 2020 2076 616c 203d 2066 6c6f 6174 2873     val = float(s
-00003bc0: 656c 662e 7175 6572 7928 636d 6429 290d  elf.query(cmd)).
-00003bd0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00003be0: 6570 7420 5661 6c75 6545 7272 6f72 3a0d  ept ValueError:.
-00003bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003c00: 2076 616c 203d 202d 310d 0a20 2020 2020   val = -1..     
-00003c10: 2020 2020 2020 2073 656c 662e 6d65 6d6f         self.memo
-00003c20: 7279 5f64 6570 7468 203d 2076 616c 0d0a  ry_depth = val..
-00003c30: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00003c40: 2020 2020 2020 2020 2020 2070 6173 7320             pass 
-00003c50: 2023 2074 6f64 6f0d 0a20 2020 2020 2020   # todo..       
-00003c60: 2072 6574 7572 6e20 7365 6c66 2e6d 656d   return self.mem
-00003c70: 6f72 795f 6465 7074 680d 0a0d 0a20 2020  ory_depth....   
-00003c80: 2064 6566 2061 6371 7569 7265 5f6d 6f64   def acquire_mod
-00003c90: 6528 7365 6c66 2c20 6d6f 6465 3a20 7374  e(self, mode: st
-00003ca0: 7220 3d20 4e6f 6e65 293a 0d0a 2020 2020  r = None):..    
-00003cb0: 2020 2020 6622 2222 5365 7420 6f72 2071      f"""Set or q
-00003cc0: 7565 7279 2074 6865 2061 6371 7569 7369  uery the acquisi
-00003cd0: 7469 6f6e 206d 6f64 6520 6f66 2074 6865  tion mode of the
-00003ce0: 206f 7363 696c 6c6f 7363 6f70 652c 2076   oscilloscope, v
-00003cf0: 616c 6964 3a7b 7365 6c66 2e5f 7661 6c69  alid:{self._vali
-00003d00: 645f 6163 7175 6972 655f 6d6f 6465 7d20  d_acquire_mode} 
-00003d10: 2222 220d 0a20 2020 2020 2020 2063 6d64  """..        cmd
-00003d20: 203d 2027 3a41 4351 7569 7265 3a54 5950   = ':ACQuire:TYP
-00003d30: 4527 0d0a 2020 2020 2020 2020 6966 206d  E'..        if m
-00003d40: 6f64 6520 6973 204e 6f6e 653a 0d0a 2020  ode is None:..  
-00003d50: 2020 2020 2020 2020 2020 636d 6420 2b3d            cmd +=
-00003d60: 2027 3f27 0d0a 2020 2020 2020 2020 2020   '?'..          
-00003d70: 2020 6d6f 6465 203d 2073 656c 662e 7175    mode = self.qu
-00003d80: 6572 7928 636d 6429 0d0a 2020 2020 2020  ery(cmd)..      
-00003d90: 2020 2020 2020 7365 6c66 2e5f 6163 7175        self._acqu
-00003da0: 6972 655f 6d6f 6465 203d 206d 6f64 650d  ire_mode = mode.
-00003db0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00003dc0: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00003dd0: 6f64 6520 696e 2073 656c 662e 5f76 616c  ode in self._val
-00003de0: 6964 5f61 6371 7569 7265 5f6d 6f64 653a  id_acquire_mode:
-00003df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003e00: 2020 6966 2073 656c 662e 5f61 6371 7569    if self._acqui
-00003e10: 7265 5f6d 6f64 6520 213d 206d 6f64 653a  re_mode != mode:
-00003e20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00003e30: 2020 2020 2020 636d 6420 2b3d 2066 2720        cmd += f' 
-00003e40: 7b6d 6f64 657d 270d 0a20 2020 2020 2020  {mode}'..       
-00003e50: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00003e60: 662e 7772 6974 6528 636d 6429 0d0a 2020  f.write(cmd)..  
-00003e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e80: 2020 7365 6c66 2e5f 6163 7175 6972 655f    self._acquire_
-00003e90: 6d6f 6465 203d 206d 6f64 650d 0a20 2020  mode = mode..   
-00003ea0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00003eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ec0: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
-00003ed0: 6627 696e 7661 6c69 6420 6163 7175 6972  f'invalid acquir
-00003ee0: 6520 6d6f 6465 207b 6d6f 6465 7d27 290d  e mode {mode}').
-00003ef0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00003f00: 7365 6c66 2e5f 6163 7175 6972 655f 6d6f  self._acquire_mo
-00003f10: 6465 0d0a 0d0a 2020 2020 6465 6620 6163  de....    def ac
-00003f20: 7175 6972 655f 7361 6d70 6c65 5f72 6174  quire_sample_rat
-00003f30: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-00003f40: 2020 2222 2251 7565 7279 2074 6865 2063    """Query the c
-00003f50: 7572 7265 6e74 2073 616d 706c 6520 7261  urrent sample ra
-00003f60: 7465 2e20 5468 6520 6465 6661 756c 7420  te. The default 
-00003f70: 756e 6974 2069 7320 5361 2f73 2222 220d  unit is Sa/s""".
-00003f80: 0a20 2020 2020 2020 2076 616c 203d 2073  .        val = s
-00003f90: 656c 662e 7175 6572 7928 273a 4143 5175  elf.query(':ACQu
-00003fa0: 6972 653a 5352 4154 653f 2729 0d0a 2020  ire:SRATe?')..  
-00003fb0: 2020 2020 2020 7365 6c66 2e73 616d 706c        self.sampl
-00003fc0: 655f 7261 7465 203d 2076 616c 0d0a 2020  e_rate = val..  
-00003fd0: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00003fe0: 0d0a 0d0a 2020 2020 2320 2d2d 2063 616c  ....    # -- cal
-00003ff0: 6962 7261 7469 6f6e 0d0a 0d0a 2020 2020  ibration....    
-00004000: 6465 6620 7374 6172 745f 6361 6c28 7365  def start_cal(se
-00004010: 6c66 293a 0d0a 2020 2020 2020 2020 2222  lf):..        ""
-00004020: 2254 6865 206f 7363 696c 6c6f 7363 6f70  "The oscilloscop
-00004030: 6520 7374 6172 7473 2074 6f20 6578 6563  e starts to exec
-00004040: 7574 6520 7365 6c66 2d63 616c 6962 7261  ute self-calibra
-00004050: 7469 6f6e 2222 220d 0a20 2020 2020 2020  tion"""..       
-00004060: 2073 656c 662e 7772 6974 6528 273a 4341   self.write(':CA
-00004070: 4c69 6272 6174 653a 5354 4152 7427 290d  Librate:STARt').
-00004080: 0a0d 0a20 2020 2064 6566 2073 746f 705f  ...    def stop_
-00004090: 6361 6c28 7365 6c66 293a 0d0a 2020 2020  cal(self):..    
-000040a0: 2020 2020 2222 2245 7869 7420 7468 6520      """Exit the 
-000040b0: 7365 6c66 2d63 616c 6962 7261 7469 6f6e  self-calibration
-000040c0: 2061 7420 616e 7920 7469 6d65 2222 220d   at any time""".
-000040d0: 0a20 2020 2020 2020 2073 656c 662e 7772  .        self.wr
-000040e0: 6974 6528 273a 4341 4c69 6272 6174 653a  ite(':CALibrate:
-000040f0: 5155 4954 2729 0d0a 0d0a 2020 2020 2320  QUIT')....    # 
-00004100: 2d2d 206d 6561 7375 7265 6d65 6e74 2066  -- measurement f
-00004110: 756e 6374 696f 6e73 0d0a 2020 2020 6465  unctions..    de
-00004120: 6620 6164 645f 6d65 6173 7572 656d 656e  f add_measuremen
-00004130: 7428 7365 6c66 2c20 6d65 6173 3a20 5761  t(self, meas: Wa
-00004140: 7665 666f 726d 4d65 6173 7572 656d 656e  veformMeasuremen
-00004150: 742c 2063 6861 6e6e 656c 5f61 3a20 4368  t, channel_a: Ch
-00004160: 616e 6e65 6c2c 2063 6861 6e6e 656c 5f62  annel, channel_b
-00004170: 3a20 4368 616e 6e65 6c20 3d20 4e6f 6e65  : Channel = None
-00004180: 2c20 6b65 793d 4e6f 6e65 293a 0d0a 2020  , key=None):..  
-00004190: 2020 2020 2020 6966 206c 656e 2873 656c        if len(sel
-000041a0: 662e 5f6d 6561 7375 7265 6d65 6e74 7329  f._measurements)
-000041b0: 203e 2073 656c 662e 5f6d 6178 5f6d 6561   > self._max_mea
-000041c0: 7375 7265 6d65 6e74 733a 0d0a 2020 2020  surements:..    
-000041d0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000041e0: 2072 616e 6765 286c 656e 2873 656c 662e   range(len(self.
-000041f0: 5f6d 6561 7375 7265 6d65 6e74 7329 293a  _measurements)):
-00004200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004210: 2020 6966 206e 6f74 2073 656c 662e 5f6d    if not self._m
-00004220: 6561 7375 7265 6d65 6e74 5b69 5d2e 6163  easurement[i].ac
-00004230: 7469 7665 3a0d 0a20 2020 2020 2020 2020  tive:..         
-00004240: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00004250: 5f6d 6561 7375 7265 6d65 6e74 732e 706f  _measurements.po
-00004260: 7028 6929 0d0a 2020 2020 2020 2020 2020  p(i)..          
-00004270: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-00004280: 6d65 6173 7572 656d 656e 7473 2e61 7070  measurements.app
-00004290: 656e 6428 0d0a 2020 2020 2020 2020 2020  end(..          
-000042a0: 2020 2020 2020 2020 2020 2020 2020 4d65                Me
-000042b0: 6173 7572 6528 6c65 6e28 7365 6c66 2e5f  asure(len(self._
-000042c0: 6d65 6173 7572 656d 656e 7473 292b 312c  measurements)+1,
-000042d0: 2073 656c 662c 206d 6561 732c 2063 6861   self, meas, cha
-000042e0: 6e6e 656c 5f61 2c20 6368 616e 6e65 6c5f  nnel_a, channel_
-000042f0: 622c 206b 6579 2929 0d0a 2020 2020 2020  b, key))..      
-00004300: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00004310: 7475 726e 0d0a 2020 2020 2020 2020 2020  turn..          
-00004320: 2020 7365 6c66 2e5f 6d65 6173 7572 656d    self._measurem
-00004330: 656e 7473 2e70 6f70 2830 290d 0a20 2020  ents.pop(0)..   
-00004340: 2020 2020 2020 2020 2073 656c 662e 5f6d           self._m
-00004350: 6561 7375 7265 6d65 6e74 732e 6170 7065  easurements.appe
-00004360: 6e64 280d 0a20 2020 2020 2020 2020 2020  nd(..           
-00004370: 2020 2020 204d 6561 7375 7265 286c 656e       Measure(len
-00004380: 2873 656c 662e 5f6d 6561 7375 7265 6d65  (self._measureme
-00004390: 6e74 7329 2b31 2c20 7365 6c66 2c20 6d65  nts)+1, self, me
-000043a0: 6173 2c20 6368 616e 6e65 6c5f 612c 2063  as, channel_a, c
-000043b0: 6861 6e6e 656c 5f62 2c20 6b65 7929 290d  hannel_b, key)).
-000043c0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-000043d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000043e0: 2e5f 6d65 6173 7572 656d 656e 7473 2e61  ._measurements.a
-000043f0: 7070 656e 6428 0d0a 2020 2020 2020 2020  ppend(..        
-00004400: 2020 2020 2020 2020 4d65 6173 7572 6528          Measure(
-00004410: 6c65 6e28 7365 6c66 2e5f 6d65 6173 7572  len(self._measur
-00004420: 656d 656e 7473 292b 312c 2073 656c 662c  ements)+1, self,
-00004430: 206d 6561 732c 2063 6861 6e6e 656c 5f61   meas, channel_a
-00004440: 2c20 6368 616e 6e65 6c5f 622c 206b 6579  , channel_b, key
-00004450: 2929 0d0a 0d0a 2020 2020 6465 6620 5f67  ))....    def _g
-00004460: 6574 5f6d 6561 7375 7265 6d65 6e74 5f62  et_measurement_b
-00004470: 795f 6b65 7928 7365 6c66 2c20 6b65 7929  y_key(self, key)
-00004480: 3a0d 0a20 2020 2020 2020 2069 6620 7479  :..        if ty
-00004490: 7065 286b 6579 2920 3d3d 2069 6e74 3a0d  pe(key) == int:.
-000044a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000044b0: 3020 3c3d 206b 6579 203c 3d20 6c65 6e28  0 <= key <= len(
-000044c0: 7365 6c66 2e63 6861 6e6e 656c 7329 3a0d  self.channels):.
-000044d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000044e0: 2072 6574 7572 6e20 7365 6c66 2e5f 6d65   return self._me
-000044f0: 6173 7572 656d 656e 7473 5b6b 6579 5d0d  asurements[key].
-00004500: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00004510: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00004520: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
-00004530: 696f 6e28 276b 6579 206f 7574 206f 6620  ion('key out of 
-00004540: 7261 6e67 6527 290d 0a20 2020 2020 2020  range')..       
-00004550: 2065 6c69 6620 7479 7065 286b 6579 2920   elif type(key) 
-00004560: 3d3d 2073 7472 3a0d 0a20 2020 2020 2020  == str:..       
-00004570: 2020 2020 2066 6f72 206d 2069 6e20 7365       for m in se
-00004580: 6c66 2e5f 6d65 6173 7572 656d 656e 7473  lf._measurements
-00004590: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000045a0: 2020 2069 6620 6d2e 6b65 7920 3d3d 206b     if m.key == k
-000045b0: 6579 3a0d 0a20 2020 2020 2020 2020 2020  ey:..           
-000045c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000045d0: 6d0d 0a20 2020 2020 2020 2020 2020 2072  m..            r
-000045e0: 6169 7365 2045 7863 6570 7469 6f6e 2827  aise Exception('
-000045f0: 6b65 7920 6e6f 7420 666f 756e 6427 290d  key not found').
-00004600: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-00004610: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00004620: 6520 4578 6365 7074 696f 6e28 2769 6e76  e Exception('inv
-00004630: 616c 6964 206b 6579 2074 7970 6527 290d  alid key type').
-00004640: 0a0d 0a20 2020 2064 6566 2063 6c65 6172  ...    def clear
-00004650: 5f6d 6561 7375 7265 6d65 6e74 2873 656c  _measurement(sel
-00004660: 662c 206b 6579 293a 0d0a 2020 2020 2020  f, key):..      
-00004670: 2020 6964 203d 2073 656c 662e 5f67 6574    id = self._get
-00004680: 5f6d 6561 7375 7265 6d65 6e74 5f62 795f  _measurement_by_
-00004690: 6b65 7928 6b65 7929 2e69 642d 310d 0a20  key(key).id-1.. 
-000046a0: 2020 2020 2020 2073 656c 662e 5f6d 6561         self._mea
-000046b0: 7375 7265 6d65 6e74 735b 6964 5d2e 636c  surements[id].cl
-000046c0: 6561 7228 290d 0a0d 0a20 2020 2064 6566  ear()....    def
-000046d0: 2072 6561 645f 6d65 6173 7572 656d 656e   read_measuremen
-000046e0: 7428 7365 6c66 2c20 6b65 7929 3a0d 0a20  t(self, key):.. 
-000046f0: 2020 2020 2020 2072 6574 7572 6e20 666c         return fl
-00004700: 6f61 7428 7365 6c66 2e5f 6765 745f 6d65  oat(self._get_me
-00004710: 6173 7572 656d 656e 745f 6279 5f6b 6579  asurement_by_key
-00004720: 286b 6579 292e 7265 6164 2829 290d 0a0d  (key).read())...
-00004730: 0a20 2020 2023 202d 2d20 7761 7665 666f  .    # -- wavefo
-00004740: 726d 2067 6574 2066 756e 6374 696f 6e73  rm get functions
-00004750: 0d0a 0d0a 2020 2020 6465 6620 7761 7665  ....    def wave
-00004760: 666f 726d 5f72 6561 645f 6d6f 6465 2873  form_read_mode(s
-00004770: 656c 662c 206d 6f64 653d 4e6f 6e65 293a  elf, mode=None):
-00004780: 0d0a 2020 2020 2020 2020 636d 6420 3d20  ..        cmd = 
-00004790: 273a 5741 5665 666f 726d 3a4d 4f44 4527  ':WAVeform:MODE'
-000047a0: 0d0a 2020 2020 2020 2020 6966 206d 6f64  ..        if mod
-000047b0: 6520 6973 204e 6f6e 653a 0d0a 2020 2020  e is None:..    
-000047c0: 2020 2020 2020 2020 636d 6420 2b3d 2027          cmd += '
-000047d0: 3f27 0d0a 2020 2020 2020 2020 2020 2020  ?'..            
-000047e0: 6d6f 6465 203d 2073 656c 662e 7175 6572  mode = self.quer
-000047f0: 7928 636d 6429 0d0a 2020 2020 2020 2020  y(cmd)..        
-00004800: 656c 6966 206d 6f64 6520 696e 2073 656c  elif mode in sel
-00004810: 662e 5f76 616c 6964 5f77 6176 6566 6f72  f._valid_wavefor
-00004820: 6d5f 6d6f 6465 3a0d 0a20 2020 2020 2020  m_mode:..       
-00004830: 2020 2020 2063 6d64 202b 3d20 6627 207b       cmd += f' {
-00004840: 6d6f 6465 7d27 0d0a 2020 2020 2020 2020  mode}'..        
-00004850: 2020 2020 7365 6c66 2e77 7269 7465 2863      self.write(c
-00004860: 6d64 290d 0a20 2020 2020 2020 2065 6c73  md)..        els
-00004870: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00004880: 7261 6973 6520 4578 6365 7074 696f 6e28  raise Exception(
-00004890: 6627 696e 7661 6c69 6420 7761 7665 666f  f'invalid wavefo
-000048a0: 726d 206d 6f64 6520 7b6d 6f64 657d 2729  rm mode {mode}')
-000048b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-000048c0: 7761 7665 666f 726d 5f72 6574 7572 6e5f  waveform_return_
-000048d0: 666f 726d 6174 203d 206d 6f64 650d 0a20  format = mode.. 
-000048e0: 2020 2020 2020 2072 6574 7572 6e20 6d6f         return mo
-000048f0: 6465 0d0a 0d0a 2020 2020 6465 6620 7761  de....    def wa
-00004900: 7665 666f 726d 5f72 6574 7572 6e5f 666f  veform_return_fo
-00004910: 726d 6174 2873 656c 662c 2066 6f72 6d61  rmat(self, forma
-00004920: 743a 2073 7472 203d 204e 6f6e 6529 3a0d  t: str = None):.
-00004930: 0a20 2020 2020 2020 2063 6d64 203d 2027  .        cmd = '
-00004940: 3a57 4156 6566 6f72 6d3a 464f 524d 6174  :WAVeform:FORMat
-00004950: 270d 0a20 2020 2020 2020 2069 6620 666f  '..        if fo
-00004960: 726d 6174 2069 7320 4e6f 6e65 3a0d 0a20  rmat is None:.. 
-00004970: 2020 2020 2020 2020 2020 2063 6d64 202b             cmd +
-00004980: 3d20 273f 270d 0a20 2020 2020 2020 2020  = '?'..         
-00004990: 2020 2066 6f72 6d61 7420 3d20 7365 6c66     format = self
-000049a0: 2e71 7565 7279 2863 6d64 290d 0a20 2020  .query(cmd)..   
-000049b0: 2020 2020 2020 2020 2073 656c 662e 5f77           self._w
-000049c0: 6176 6566 6f72 6d5f 7265 7475 726e 5f66  aveform_return_f
-000049d0: 6f72 6d61 7420 3d20 666f 726d 6174 0d0a  ormat = format..
-000049e0: 2020 2020 2020 2020 656c 6966 2066 6f72          elif for
-000049f0: 6d61 7420 696e 2073 656c 662e 5f76 616c  mat in self._val
-00004a00: 6964 5f77 6176 6566 6f72 6d5f 666f 726d  id_waveform_form
-00004a10: 6174 3a0d 0a20 2020 2020 2020 2020 2020  at:..           
-00004a20: 2063 6d64 202b 3d20 6627 207b 666f 726d   cmd += f' {form
-00004a30: 6174 7d27 0d0a 2020 2020 2020 2020 2020  at}'..          
-00004a40: 2020 7365 6c66 2e5f 7761 7665 666f 726d    self._waveform
-00004a50: 5f72 6574 7572 6e5f 666f 726d 6174 203d  _return_format =
-00004a60: 2066 6f72 6d61 740d 0a20 2020 2020 2020   format..       
-00004a70: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00004a80: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
-00004a90: 696f 6e28 6627 696e 7661 6c69 6420 7761  ion(f'invalid wa
-00004aa0: 7665 666f 726d 206d 6f64 6520 7b66 6f72  veform mode {for
-00004ab0: 6d61 747d 2729 0d0a 2020 2020 2020 2020  mat}')..        
-00004ac0: 7265 7475 726e 2073 656c 662e 5f77 6176  return self._wav
-00004ad0: 6566 6f72 6d5f 7265 7475 726e 5f66 6f72  eform_return_for
-00004ae0: 6d61 740d 0a0d 0a20 2020 2064 6566 2077  mat....    def w
-00004af0: 6176 6566 6f72 6d5f 736f 7572 6365 2873  aveform_source(s
-00004b00: 656c 662c 2073 6f75 7263 653a 2073 7472  elf, source: str
-00004b10: 203d 204e 6f6e 6529 3a0d 0a20 2020 2020   = None):..     
-00004b20: 2020 2063 6d64 203d 2027 3a57 4156 6566     cmd = ':WAVef
-00004b30: 6f72 6d3a 534f 5552 6365 270d 0a20 2020  orm:SOURce'..   
-00004b40: 2020 2020 2069 6620 736f 7572 6365 2069       if source i
-00004b50: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
-00004b60: 2020 2020 2063 6d64 202b 3d20 273f 270d       cmd += '?'.
-00004b70: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-00004b80: 203d 2073 656c 662e 7175 6572 7928 636d   = self.query(cm
-00004b90: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
-00004ba0: 7365 6c66 2e5f 7761 7665 666f 726d 5f73  self._waveform_s
-00004bb0: 6f75 7263 6520 3d20 7661 6c0d 0a20 2020  ource = val..   
-00004bc0: 2020 2020 2065 6c69 6620 7365 6c66 2e72       elif self.r
-00004bd0: 652e 7375 6228 7227 5b61 2d7a 5d2c 272c  e.sub(r'[a-z],',
-00004be0: 2073 6f75 7263 6529 2069 6e20 7365 6c66   source) in self
-00004bf0: 2e5f 7661 6c69 645f 6368 616e 6e65 6c73  ._valid_channels
-00004c00: 3a20 2023 2061 6e79 206c 6f77 6572 6361  :  # any lowerca
-00004c10: 7365 2069 676e 6f72 6564 0d0a 2020 2020  se ignored..    
-00004c20: 2020 2020 2020 2020 6966 2073 6f75 7263          if sourc
-00004c30: 6520 213d 2073 656c 662e 5f77 6176 6566  e != self._wavef
-00004c40: 6f72 6d5f 736f 7572 6365 3a0d 0a20 2020  orm_source:..   
-00004c50: 2020 2020 2020 2020 2020 2020 2063 6d64               cmd
-00004c60: 202b 3d20 6627 207b 736f 7572 6365 7d27   += f' {source}'
-00004c70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004c80: 2020 7365 6c66 2e77 7269 7465 2863 6d64    self.write(cmd
-00004c90: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00004ca0: 2020 2073 656c 662e 5f77 6176 6566 6f72     self._wavefor
-00004cb0: 6d5f 736f 7572 6365 203d 2073 6f75 7263  m_source = sourc
-00004cc0: 650d 0a20 2020 2020 2020 2065 6c73 653a  e..        else:
-00004cd0: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00004ce0: 6973 6520 4578 6365 7074 696f 6e28 6627  ise Exception(f'
-00004cf0: 696e 7661 6c69 6420 7761 7665 666f 726d  invalid waveform
-00004d00: 2073 6f75 7263 6520 7b73 6f75 7263 657d   source {source}
-00004d10: 2729 0d0a 2020 2020 2020 2020 7265 7475  ')..        retu
-00004d20: 726e 2073 656c 662e 5f77 6176 6566 6f72  rn self._wavefor
-00004d30: 6d5f 736f 7572 6365 0d0a 0d0a 2020 2020  m_source....    
-00004d40: 6465 6620 6765 745f 7761 7665 666f 726d  def get_waveform
-00004d50: 5f70 7265 616d 626c 6528 7365 6c66 293a  _preamble(self):
-00004d60: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00004d70: 2057 6176 6566 6f72 6d50 7265 616d 626c   WaveformPreambl
-00004d80: 6528 7365 6c66 2e71 7565 7279 2827 3a57  e(self.query(':W
-00004d90: 4156 6566 6f72 6d3a 5052 4561 6d62 6c65  AVeform:PREamble
-00004da0: 3f27 2929 0d0a 0d0a 2020 2020 6465 6620  ?'))....    def 
-00004db0: 6765 745f 7761 7665 666f 726d 2873 656c  get_waveform(sel
-00004dc0: 662c 2063 6861 6e6e 656c 3d4e 6f6e 6529  f, channel=None)
-00004dd0: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
-00004de0: 7761 7665 666f 726d 5f73 6f75 7263 6528  waveform_source(
-00004df0: 6368 616e 6e65 6c29 0d0a 2020 2020 2020  channel)..      
-00004e00: 2020 7365 6c66 2e77 6176 6566 6f72 6d5f    self.waveform_
-00004e10: 7265 7475 726e 5f66 6f72 6d61 7428 2741  return_format('A
-00004e20: 5343 2729 0d0a 2020 2020 2020 2020 7365  SC')..        se
-00004e30: 6c66 2e77 6176 6566 6f72 6d5f 7265 6164  lf.waveform_read
-00004e40: 5f6d 6f64 6528 274e 4f52 4d27 290d 0a20  _mode('NORM').. 
-00004e50: 2020 2020 2020 2073 656c 662e 7374 6f70         self.stop
-00004e60: 2829 2020 2320 6461 7461 2063 616e 2062  ()  # data can b
-00004e70: 6520 7472 616e 7366 6572 7265 6420 6f6e  e transferred on
-00004e80: 6c79 2069 6e20 7374 6f70 2073 7461 7465  ly in stop state
-00004e90: 0d0a 2020 2020 2020 2020 2320 7665 7269  ..        # veri
-00004ea0: 6679 2064 6174 6120 6c65 6e67 7468 0d0a  fy data length..
-00004eb0: 2020 2020 2020 2020 7072 6561 6d62 6c65          preamble
-00004ec0: 203d 2073 656c 662e 6765 745f 7761 7665   = self.get_wave
-00004ed0: 666f 726d 5f70 7265 616d 626c 6528 290d  form_preamble().
-00004ee0: 0a20 2020 2020 2020 2077 6176 6566 6f72  .        wavefor
-00004ef0: 6d20 3d20 4e6f 6e65 0d0a 2020 2020 2020  m = None..      
-00004f00: 2020 6966 2070 7265 616d 626c 652e 706f    if preamble.po
-00004f10: 696e 7473 203e 2031 3536 3235 3a20 2023  ints > 15625:  #
-00004f20: 206d 6178 2076 616c 7565 2066 6f72 2061   max value for a
-00004f30: 7363 6969 2074 7261 6e73 6665 720d 0a20  scii transfer.. 
-00004f40: 2020 2020 2020 2020 2020 2073 6567 6d65             segme
-00004f50: 6e74 7320 3d20 5b5d 0d0a 2020 2020 2020  nts = []..      
-00004f60: 2020 2020 2020 706f 7369 7469 6f6e 203d        position =
-00004f70: 2031 0d0a 2020 2020 2020 2020 2020 2020   1..            
-00004f80: 7768 696c 6520 706f 7369 7469 6f6e 203c  while position <
-00004f90: 2070 7265 616d 626c 652e 706f 696e 7473   preamble.points
-00004fa0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004fb0: 2020 2073 656c 662e 7772 6974 6528 6627     self.write(f'
-00004fc0: 3a57 4156 3a53 5441 5220 7b70 6f73 6974  :WAV:STAR {posit
-00004fd0: 696f 6e7d 2729 0d0a 2020 2020 2020 2020  ion}')..        
-00004fe0: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
-00004ff0: 7465 2866 273a 5741 563a 5354 4f50 207b  te(f':WAV:STOP {
-00005000: 706f 7369 7469 6f6e 202b 2031 3536 3235  position + 15625
-00005010: 7d27 290d 0a20 2020 2020 2020 2020 2020  }')..           
-00005020: 2020 2020 2073 6567 6d65 6e74 732e 6170       segments.ap
-00005030: 7065 6e64 2873 656c 662e 7175 6572 7928  pend(self.query(
-00005040: 273a 5741 563a 4441 5441 3f27 2929 0d0a  ':WAV:DATA?'))..
-00005050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005060: 706f 7369 7469 6f6e 202b 3d20 3135 3632  position += 1562
-00005070: 350d 0a20 2020 2020 2020 2020 2020 2077  5..            w
-00005080: 6176 6566 6f72 6d20 3d20 5761 7665 666f  aveform = Wavefo
-00005090: 726d 2873 6567 6d65 6e74 732c 2070 7265  rm(segments, pre
-000050a0: 616d 626c 6529 0d0a 2020 2020 2020 2020  amble)..        
-000050b0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
-000050c0: 2020 2077 6176 6566 6f72 6d20 3d20 5761     waveform = Wa
-000050d0: 7665 666f 726d 2873 656c 662e 7175 6572  veform(self.quer
-000050e0: 7928 273a 5741 563a 4441 5441 3f27 292c  y(':WAV:DATA?'),
-000050f0: 2070 7265 616d 626c 6529 0d0a 2020 2020   preamble)..    
-00005100: 2020 2020 7365 6c66 2e72 756e 2829 0d0a      self.run()..
-00005110: 2020 2020 2020 2020 7265 7475 726e 2077          return w
-00005120: 6176 6566 6f72 6d0d 0a                   aveform..
+00000990: 2020 2020 7365 6c66 2e5f 6261 6e64 7769      self._bandwi
+000009a0: 7468 5f6c 696d 6974 203d 2073 656c 662e  th_limit = self.
+000009b0: 6261 6e64 7769 7468 5f6c 696d 6974 2829  bandwith_limit()
+000009c0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+000009d0: 2e5f 7661 6c69 645f 6174 7465 6e75 6174  ._valid_attenuat
+000009e0: 696f 6e20 3d20 2830 2e30 312c 2030 2e30  ion = (0.01, 0.0
+000009f0: 322c 2030 2e30 352c 2030 2e31 2c20 302e  2, 0.05, 0.1, 0.
+00000a00: 322c 2030 2e35 2c20 312c 2032 2c20 352c  2, 0.5, 1, 2, 5,
+00000a10: 2031 302c 2032 302c 2035 302c 2031 3030   10, 20, 50, 100
+00000a20: 2c20 3230 302c 2035 3030 2c20 3130 3030  , 200, 500, 1000
+00000a30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00000a40: 5f70 726f 6265 5f72 6174 696f 203d 2073  _probe_ratio = s
+00000a50: 656c 662e 7072 6f62 655f 7261 7469 6f28  elf.probe_ratio(
+00000a60: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00000a70: 5f73 6361 6c65 203d 2073 656c 662e 7363  _scale = self.sc
+00000a80: 616c 6528 290d 0a0d 0a20 2020 2020 2020  ale()....       
+00000a90: 2073 656c 662e 5f76 616c 6964 5f63 6f75   self._valid_cou
+00000aa0: 706c 696e 6720 3d20 5b27 4143 272c 2027  pling = ['AC', '
+00000ab0: 4443 272c 2027 474e 4427 5d0d 0a20 2020  DC', 'GND']..   
+00000ac0: 2020 2020 2073 656c 662e 5f63 6f75 706c       self._coupl
+00000ad0: 696e 6720 3d20 7365 6c66 2e63 6f75 706c  ing = self.coupl
+00000ae0: 696e 6728 290d 0a0d 0a20 2020 2020 2020  ing()....       
+00000af0: 2073 656c 662e 5f64 6973 706c 6179 203d   self._display =
+00000b00: 2073 656c 662e 6469 7370 6c61 7928 290d   self.display().
+00000b10: 0a20 2020 2020 2020 2073 656c 662e 5f69  .        self._i
+00000b20: 6e76 6572 7420 3d20 7365 6c66 2e69 6e76  nvert = self.inv
+00000b30: 6572 7428 290d 0a20 2020 2020 2020 2073  ert()..        s
+00000b40: 656c 662e 5f6f 6666 7365 7420 3d20 7365  elf._offset = se
+00000b50: 6c66 2e6f 6666 7365 7428 290d 0a20 2020  lf.offset()..   
+00000b60: 2020 2020 2073 656c 662e 5f76 6f6c 7461       self._volta
+00000b70: 6765 5f72 616e 6765 203d 2073 656c 662e  ge_range = self.
+00000b80: 7261 6e67 6528 290d 0a0d 0a20 2020 2064  range()....    d
+00000b90: 6566 205f 7365 745f 6765 7428 7365 6c66  ef _set_get(self
+00000ba0: 2c20 636d 643a 2073 7472 2c20 7661 6c69  , cmd: str, vali
+00000bb0: 643a 206c 6973 742c 206d 6f64 653a 2073  d: list, mode: s
+00000bc0: 7472 203d 204e 6f6e 6529 3a0d 0a20 2020  tr = None):..   
+00000bd0: 2020 2020 2022 2222 7365 7420 6f72 2067       """set or g
+00000be0: 6574 2076 616c 7565 2c20 636d 6420 3d20  et value, cmd = 
+00000bf0: 636f 6d6d 616e 6420 7374 7275 6374 7572  command structur
+00000c00: 6520 746f 6120 7070 656e 6420 273f 2720  e toa ppend '?' 
+00000c10: 696e 2063 6173 6520 6d6f 6465 2069 7320  in case mode is 
+00000c20: 4e6f 6e65 206f 7220 7661 6c75 6520 6966  None or value if
+00000c30: 2076 616c 7565 2069 7320 696e 2076 616c   value is in val
+00000c40: 6964 206f 7220 7661 6c69 6420 6973 204e  id or valid is N
+00000c50: 6f6e 6522 2222 0d0a 2020 2020 2020 2020  one"""..        
+00000c60: 636d 6420 3d20 636d 642e 666f 726d 6174  cmd = cmd.format
+00000c70: 2873 656c 662e 6e75 6d62 6572 290d 0a20  (self.number).. 
+00000c80: 2020 2020 2020 2069 6620 6d6f 6465 2069         if mode i
+00000c90: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+00000ca0: 2020 2020 2063 6d64 202b 3d20 273f 270d       cmd += '?'.
+00000cb0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
+00000cc0: 203d 2073 656c 662e 7363 6f70 652e 7175   = self.scope.qu
+00000cd0: 6572 7928 636d 6429 0d0a 2020 2020 2020  ery(cmd)..      
+00000ce0: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+00000cf0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00000d00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00000d10: 7661 6c69 6420 6973 206e 6f74 204e 6f6e  valid is not Non
+00000d20: 6520 616e 6420 6d6f 6465 206e 6f74 2069  e and mode not i
+00000d30: 6e20 7661 6c69 643a 0d0a 2020 2020 2020  n valid:..      
+00000d40: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00000d50: 4578 6365 7074 696f 6e28 2769 6e76 616c  Exception('inval
+00000d60: 6964 2076 616c 7565 2729 0d0a 2020 2020  id value')..    
+00000d70: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00000d80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00000d90: 6d64 202b 3d20 6627 207b 6d6f 6465 7d27  md += f' {mode}'
+00000da0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00000db0: 2020 7365 6c66 2e73 636f 7065 2e77 7269    self.scope.wri
+00000dc0: 7465 2863 6d64 290d 0a20 2020 2020 2020  te(cmd)..       
+00000dd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00000de0: 6d6f 6465 0d0a 0d0a 2020 2020 6465 6620  mode....    def 
+00000df0: 6261 6e64 7769 7468 5f6c 696d 6974 2873  bandwith_limit(s
+00000e00: 656c 662c 206d 6f64 653a 2062 6f6f 6c20  elf, mode: bool 
+00000e10: 3d20 4e6f 6e65 293a 0d0a 2020 2020 2020  = None):..      
+00000e20: 2020 636d 6420 3d20 4e6f 6e65 0d0a 2020    cmd = None..  
+00000e30: 2020 2020 2020 6966 206d 6f64 6520 6973        if mode is
+00000e40: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
+00000e50: 2020 2020 2020 2020 636d 6420 3d20 274f          cmd = 'O
+00000e60: 4646 270d 0a20 2020 2020 2020 2020 2020  FF'..           
+00000e70: 2069 6620 6d6f 6465 3a0d 0a20 2020 2020   if mode:..     
+00000e80: 2020 2020 2020 2020 2020 2063 6d64 203d             cmd =
+00000e90: 2027 3230 4d27 0d0a 2020 2020 2020 2020   '20M'..        
+00000ea0: 7365 6c66 2e5f 6261 6e64 7769 7468 5f6c  self._bandwith_l
+00000eb0: 696d 6974 203d 2073 656c 662e 5f73 6574  imit = self._set
+00000ec0: 5f67 6574 2866 273a 4348 414e 6e65 6c7b  _get(f':CHANnel{
+00000ed0: 7365 6c66 2e6e 756d 6265 727d 3a42 574c  self.number}:BWL
+00000ee0: 696d 6974 272c 204e 6f6e 652c 2063 6d64  imit', None, cmd
+00000ef0: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00000f00: 6e20 7365 6c66 2e5f 6261 6e64 7769 7468  n self._bandwith
+00000f10: 5f6c 696d 6974 0d0a 0d0a 2020 2020 6465  _limit....    de
+00000f20: 6620 636f 7570 6c69 6e67 2873 656c 662c  f coupling(self,
+00000f30: 206d 6f64 653a 2073 7472 203d 204e 6f6e   mode: str = Non
+00000f40: 6529 3a0d 0a20 2020 2020 2020 2073 656c  e):..        sel
+00000f50: 662e 5f63 6f75 706c 696e 6720 3d20 7365  f._coupling = se
+00000f60: 6c66 2e5f 7365 745f 6765 7428 0d0a 2020  lf._set_get(..  
+00000f70: 2020 2020 2020 2020 2020 6627 3a43 4841            f':CHA
+00000f80: 4e6e 656c 7b73 656c 662e 6e75 6d62 6572  Nnel{self.number
+00000f90: 7d3a 434f 5550 6c69 6e67 272c 2073 656c  }:COUPling', sel
+00000fa0: 662e 5f76 616c 6964 5f63 6f75 706c 696e  f._valid_couplin
+00000fb0: 672c 206d 6f64 6529 0d0a 2020 2020 2020  g, mode)..      
+00000fc0: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
+00000fd0: 6f75 706c 696e 670d 0a0d 0a20 2020 2064  oupling....    d
+00000fe0: 6566 2064 6973 706c 6179 2873 656c 662c  ef display(self,
+00000ff0: 206d 6f64 653a 2062 6f6f 6c20 3d20 4e6f   mode: bool = No
+00001000: 6e65 293a 0d0a 2020 2020 2020 2020 7365  ne):..        se
+00001010: 6c66 2e5f 6469 7370 6c61 7920 3d20 7365  lf._display = se
+00001020: 6c66 2e5f 7365 745f 6765 7428 6627 3a43  lf._set_get(f':C
+00001030: 4841 4e6e 656c 7b73 656c 662e 6e75 6d62  HANnel{self.numb
+00001040: 6572 7d3a 4449 5350 6c61 7927 2c20 4e6f  er}:DISPlay', No
+00001050: 6e65 2c20 6d6f 6465 290d 0a20 2020 2020  ne, mode)..     
+00001060: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00001070: 6469 7370 6c61 790d 0a0d 0a20 2020 2064  display....    d
+00001080: 6566 2069 6e76 6572 7428 7365 6c66 2c20  ef invert(self, 
+00001090: 6d6f 6465 3a20 626f 6f6c 203d 204e 6f6e  mode: bool = Non
+000010a0: 6529 3a0d 0a20 2020 2020 2020 2073 656c  e):..        sel
+000010b0: 662e 5f69 6e76 6572 7420 3d20 7365 6c66  f._invert = self
+000010c0: 2e5f 7365 745f 6765 7428 6627 3a43 4841  ._set_get(f':CHA
+000010d0: 4e6e 656c 7b73 656c 662e 6e75 6d62 6572  Nnel{self.number
+000010e0: 7d3a 494e 5665 7274 272c 204e 6f6e 652c  }:INVert', None,
+000010f0: 206d 6f64 6529 0d0a 2020 2020 2020 2020   mode)..        
+00001100: 7265 7475 726e 2073 656c 662e 5f69 6e76  return self._inv
+00001110: 6572 740d 0a0d 0a20 2020 2064 6566 206f  ert....    def o
+00001120: 6666 7365 7428 7365 6c66 2c20 7661 6c3a  ffset(self, val:
+00001130: 2066 6c6f 6174 203d 204e 6f6e 6529 3a0d   float = None):.
+00001140: 0a20 2020 2020 2020 2064 6174 615f 7661  .        data_va
+00001150: 6c69 6420 3d20 4661 6c73 650d 0a20 2020  lid = False..   
+00001160: 2020 2020 2069 6620 7661 6c20 6973 206e       if val is n
+00001170: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00001180: 2020 2020 2020 6966 2069 7363 6c6f 7365        if isclose
+00001190: 2873 656c 662e 5f70 726f 6265 5f72 6174  (self._probe_rat
+000011a0: 696f 2c20 312e 3029 3a0d 0a20 2020 2020  io, 1.0):..     
+000011b0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+000011c0: 6c66 2e5f 766f 6c74 6167 655f 7261 6e67  lf._voltage_rang
+000011d0: 6520 3e3d 2030 2e35 3a0d 0a20 2020 2020  e >= 0.5:..     
+000011e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000011f0: 6620 2d31 3030 2e30 203c 3d20 7661 6c20  f -100.0 <= val 
+00001200: 3c3d 2031 3030 2e30 3a0d 0a20 2020 2020  <= 100.0:..     
+00001210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001220: 2020 2064 6174 615f 7661 6c69 6420 3d20     data_valid = 
+00001230: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
+00001240: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00001250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001260: 2069 6620 2d32 2e30 203c 3d20 7661 6c20   if -2.0 <= val 
+00001270: 3c3d 2032 2e30 3a0d 0a20 2020 2020 2020  <= 2.0:..       
+00001280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001290: 2064 6174 615f 7661 6c69 6420 3d20 5472   data_valid = Tr
+000012a0: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
+000012b0: 656c 6966 2069 7363 6c6f 7365 2873 656c  elif isclose(sel
+000012c0: 662e 5f70 726f 6265 5f72 6174 696f 2c20  f._probe_ratio, 
+000012d0: 3130 2e30 293a 0d0a 2020 2020 2020 2020  10.0):..        
+000012e0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000012f0: 5f76 6f6c 7461 6765 5f72 616e 6765 203e  _voltage_range >
+00001300: 3d20 352e 303a 0d0a 2020 2020 2020 2020  = 5.0:..        
+00001310: 2020 2020 2020 2020 2020 2020 6966 202d              if -
+00001320: 3130 3030 2e30 203c 3d20 7661 6c20 3c3d  1000.0 <= val <=
+00001330: 2031 3030 302e 303a 0d0a 2020 2020 2020   1000.0:..      
+00001340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001350: 2020 6461 7461 5f76 616c 6964 203d 2054    data_valid = T
+00001360: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
+00001370: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00001380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001390: 6966 202d 3230 2e30 203c 3d20 7661 6c20  if -20.0 <= val 
+000013a0: 3c3d 2032 302e 303a 0d0a 2020 2020 2020  <= 20.0:..      
+000013b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000013c0: 2020 6461 7461 5f76 616c 6964 203d 2054    data_valid = T
+000013d0: 7275 650d 0a20 2020 2020 2020 2065 6c73  rue..        els
+000013e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000013f0: 6461 7461 5f76 616c 6964 203d 2054 7275  data_valid = Tru
+00001400: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+00001410: 6461 7461 5f76 616c 6964 3a0d 0a20 2020  data_valid:..   
+00001420: 2020 2020 2020 2020 2073 656c 662e 5f6f           self._o
+00001430: 6666 7365 7420 3d20 7365 6c66 2e5f 7365  ffset = self._se
+00001440: 745f 6765 7428 6627 3a43 4841 4e6e 656c  t_get(f':CHANnel
+00001450: 7b73 656c 662e 6e75 6d62 6572 7d3a 4f46  {self.number}:OF
+00001460: 4653 6574 272c 204e 6f6e 652c 2076 616c  FSet', None, val
+00001470: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00001480: 6574 7572 6e20 7365 6c66 2e5f 6f66 6673  eturn self._offs
+00001490: 6574 0d0a 2020 2020 2020 2020 656c 7365  et..        else
+000014a0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+000014b0: 6169 7365 2045 7863 6570 7469 6f6e 2827  aise Exception('
+000014c0: 7661 6c75 6520 6f75 7420 6f66 2072 616e  value out of ran
+000014d0: 6765 2729 0d0a 0d0a 2020 2020 6465 6620  ge')....    def 
+000014e0: 7261 6e67 6528 7365 6c66 2c20 7661 6c3a  range(self, val:
+000014f0: 2066 6c6f 6174 203d 204e 6f6e 6529 3a0d   float = None):.
+00001500: 0a20 2020 2020 2020 2069 6620 7661 6c20  .        if val 
+00001510: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
+00001520: 2020 2020 2020 2020 2020 6966 2069 7363            if isc
+00001530: 6c6f 7365 2873 656c 662e 5f70 726f 6265  lose(self._probe
+00001540: 5f72 6174 696f 2c20 312e 3029 2061 6e64  _ratio, 1.0) and
+00001550: 206e 6f74 2030 2e30 3038 203c 3d20 7661   not 0.008 <= va
+00001560: 6c20 3c3d 2038 302e 3020 6f72 205c 0d0a  l <= 80.0 or \..
+00001570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001580: 2020 2020 6973 636c 6f73 6528 7365 6c66      isclose(self
+00001590: 2e5f 7072 6f62 655f 7261 7469 6f2c 2031  ._probe_ratio, 1
+000015a0: 302e 3029 2061 6e64 206e 6f74 2030 2e30  0.0) and not 0.0
+000015b0: 3820 3c3d 2076 616c 203c 3d20 3830 302e  8 <= val <= 800.
+000015c0: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+000015d0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+000015e0: 696f 6e28 2776 616c 7565 206f 7574 206f  ion('value out o
+000015f0: 6620 7261 6e67 6527 290d 0a20 2020 2020  f range')..     
+00001600: 2020 2073 656c 662e 5f76 6f6c 7461 6765     self._voltage
+00001610: 5f72 616e 6765 203d 2073 656c 662e 5f73  _range = self._s
+00001620: 6574 5f67 6574 2866 273a 4348 414e 6e65  et_get(f':CHANne
+00001630: 6c7b 7365 6c66 2e6e 756d 6265 727d 3a52  l{self.number}:R
+00001640: 414e 4765 272c 204e 6f6e 652c 2076 616c  ANGe', None, val
+00001650: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00001660: 6e20 7365 6c66 2e5f 766f 6c74 6167 655f  n self._voltage_
+00001670: 7261 6e67 650d 0a0d 0a20 2020 2064 6566  range....    def
+00001680: 2063 616c 5f74 696d 6562 6173 655f 6465   cal_timebase_de
+00001690: 6c61 7928 7365 6c66 2c20 7661 6c3a 2066  lay(self, val: f
+000016a0: 6c6f 6174 203d 204e 6f6e 6529 3a0d 0a20  loat = None):.. 
+000016b0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000016c0: 6c66 2e5f 7365 745f 6765 7428 6627 3a43  lf._set_get(f':C
+000016d0: 4841 4e6e 656c 7b73 656c 662e 6e75 6d62  HANnel{self.numb
+000016e0: 6572 7d3a 5241 4e47 6527 2c20 4e6f 6e65  er}:RANGe', None
+000016f0: 2c20 7661 6c29 0d0a 0d0a 2020 2020 6465  , val)....    de
+00001700: 6620 7363 616c 6528 7365 6c66 2c20 7661  f scale(self, va
+00001710: 6c3a 2066 6c6f 6174 203d 204e 6f6e 6529  l: float = None)
+00001720: 3a0d 0a20 2020 2020 2020 2073 656c 662e  :..        self.
+00001730: 5f73 6361 6c65 203d 2073 656c 662e 5f73  _scale = self._s
+00001740: 6574 5f67 6574 2866 273a 4348 414e 6e65  et_get(f':CHANne
+00001750: 6c7b 7365 6c66 2e6e 756d 6265 727d 3a53  l{self.number}:S
+00001760: 4341 4c65 272c 204e 6f6e 652c 2076 616c  CALe', None, val
+00001770: 290d 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00001780: 6e20 7365 6c66 2e5f 7363 616c 650d 0a0d  n self._scale...
+00001790: 0a20 2020 2064 6566 2070 726f 6265 5f72  .    def probe_r
+000017a0: 6174 696f 2873 656c 662c 2076 616c 3a20  atio(self, val: 
+000017b0: 666c 6f61 7420 3d20 4e6f 6e65 293a 0d0a  float = None):..
+000017c0: 2020 2020 2020 2020 6966 2076 616c 2069          if val i
+000017d0: 7320 4e6f 6e65 206f 7220 5472 7565 2069  s None or True i
+000017e0: 6e20 5b69 7363 6c6f 7365 2869 2c20 7661  n [isclose(i, va
+000017f0: 6c29 2066 6f72 2069 2069 6e20 7365 6c66  l) for i in self
+00001800: 2e5f 7661 6c69 645f 6174 7465 6e75 6174  ._valid_attenuat
+00001810: 696f 6e5d 3a0d 0a20 2020 2020 2020 2020  ion]:..         
+00001820: 2020 2073 656c 662e 5f70 726f 6265 5f72     self._probe_r
+00001830: 6174 696f 203d 2073 656c 662e 5f73 6574  atio = self._set
+00001840: 5f67 6574 2866 273a 4348 414e 6e65 6c7b  _get(f':CHANnel{
+00001850: 7365 6c66 2e6e 756d 6265 727d 3a50 524f  self.number}:PRO
+00001860: 4265 272c 204e 6f6e 652c 2076 616c 290d  Be', None, val).
+00001870: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00001880: 7572 6e20 7365 6c66 2e5f 7072 6f62 655f  urn self._probe_
+00001890: 7261 7469 6f0d 0a20 2020 2020 2020 2065  ratio..        e
+000018a0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+000018b0: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
+000018c0: 6e28 2769 6e76 616c 6964 2076 616c 7565  n('invalid value
+000018d0: 2729 0d0a 0d0a 2020 2020 2320 746f 646f  ')....    # todo
+000018e0: 203a 2075 6e69 7473 2c20 7665 726e 6965   : units, vernie
+000018f0: 720d 0a0d 0a0d 0a63 6c61 7373 2057 6176  r......class Wav
+00001900: 6566 6f72 6d4d 6561 7375 7265 6d65 6e74  eformMeasurement
+00001910: 3a0d 0a20 2020 2023 2074 696d 6573 0d0a  :..    # times..
+00001920: 2020 2020 7065 7269 6f64 203d 2027 5045      period = 'PE
+00001930: 5269 6f64 272c 2031 0d0a 2020 2020 6672  Riod', 1..    fr
+00001940: 6571 7565 6e63 7920 3d20 2746 5245 5175  equency = 'FREQu
+00001950: 656e 6379 272c 2031 0d0a 2020 2020 7261  ency', 1..    ra
+00001960: 6973 655f 7469 6d65 203d 2027 5254 494d  ise_time = 'RTIM
+00001970: 6527 2c20 310d 0a20 2020 2066 616c 6c5f  e', 1..    fall_
+00001980: 7469 6d65 203d 2027 4654 494d 6527 2c20  time = 'FTIMe', 
+00001990: 310d 0a20 2020 2077 6964 7468 5f70 6f73  1..    width_pos
+000019a0: 203d 2027 5057 4944 7468 272c 2031 0d0a   = 'PWIDth', 1..
+000019b0: 2020 2020 7769 6474 685f 6e65 6720 3d20      width_neg = 
+000019c0: 274e 5749 4474 6827 2c20 310d 0a20 2020  'NWIDth', 1..   
+000019d0: 2064 7574 795f 706f 7320 3d20 2750 4455   duty_pos = 'PDU
+000019e0: 5479 272c 2031 0d0a 2020 2020 6475 7479  Ty', 1..    duty
+000019f0: 5f6e 6567 203d 2027 4e44 5554 7927 2c20  _neg = 'NDUTy', 
+00001a00: 310d 0a20 2020 2074 696d 655f 765f 6d61  1..    time_v_ma
+00001a10: 7820 3d20 2754 564d 4158 272c 2031 0d0a  x = 'TVMAX', 1..
+00001a20: 2020 2020 7469 6d65 5f76 5f6d 696e 203d      time_v_min =
+00001a30: 2027 5456 4d49 4e27 2c20 310d 0a0d 0a20   'TVMIN', 1.... 
+00001a40: 2020 2023 2070 756c 7365 730d 0a20 2020     # pulses..   
+00001a50: 2070 756c 7365 735f 706f 7320 3d20 2750   pulses_pos = 'P
+00001a60: 5055 4c73 6573 272c 2031 0d0a 2020 2020  PULses', 1..    
+00001a70: 7075 6c73 6573 5f6e 6567 203d 2027 4e50  pulses_neg = 'NP
+00001a80: 554c 7365 7327 2c20 310d 0a20 2020 2065  ULses', 1..    e
+00001a90: 6467 6573 5f70 6f73 203d 2027 5045 4447  dges_pos = 'PEDG
+00001aa0: 6573 272c 2031 0d0a 2020 2020 6564 6765  es', 1..    edge
+00001ab0: 735f 6e65 6720 3d20 274e 4544 4765 7327  s_neg = 'NEDGes'
+00001ac0: 2c20 310d 0a0d 0a20 2020 2023 6465 6c61  , 1....    #dela
+00001ad0: 7920 616e 6420 7068 6173 650d 0a20 2020  y and phase..   
+00001ae0: 2064 656c 6179 5f72 6169 7365 5f31 5f32   delay_raise_1_2
+00001af0: 203d 2027 5244 454c 6179 272c 2032 0d0a   = 'RDELay', 2..
+00001b00: 2020 2020 6465 6c61 795f 6661 6c6c 5f31      delay_fall_1
+00001b10: 5f32 203d 2027 4644 454c 6179 272c 2032  _2 = 'FDELay', 2
+00001b20: 0d0a 2020 2020 7068 6173 655f 7261 6973  ..    phase_rais
+00001b30: 655f 315f 3220 3d20 2752 5048 6173 6527  e_1_2 = 'RPHase'
+00001b40: 2c20 320d 0a20 2020 2070 6861 7365 5f66  , 2..    phase_f
+00001b50: 616c 6c5f 315f 3220 3d20 2746 5048 6173  all_1_2 = 'FPHas
+00001b60: 6527 2c20 320d 0a0d 0a20 2020 2023 2076  e', 2....    # v
+00001b70: 6f6c 7461 6765 0d0a 2020 2020 765f 6d61  oltage..    v_ma
+00001b80: 7820 3d20 2756 4d41 5827 2c20 310d 0a20  x = 'VMAX', 1.. 
+00001b90: 2020 2076 5f6d 696e 203d 2027 564d 494e     v_min = 'VMIN
+00001ba0: 272c 2031 0d0a 2020 2020 765f 7070 203d  ', 1..    v_pp =
+00001bb0: 2027 5650 5027 2c20 310d 0a20 2020 2076   'VPP', 1..    v
+00001bc0: 5f74 6f70 203d 2027 5654 4f50 272c 2031  _top = 'VTOP', 1
+00001bd0: 0d0a 2020 2020 765f 6261 7365 203d 2027  ..    v_base = '
+00001be0: 5642 4153 6527 2c20 310d 0a20 2020 2076  VBASe', 1..    v
+00001bf0: 5f61 6d70 203d 2027 5641 4d50 272c 2031  _amp = 'VAMP', 1
+00001c00: 0d0a 2020 2020 765f 7570 7065 7220 3d20  ..    v_upper = 
+00001c10: 2756 5550 7065 7227 2c20 310d 0a20 2020  'VUPper', 1..   
+00001c20: 2076 5f6d 6964 203d 2027 564d 4944 272c   v_mid = 'VMID',
+00001c30: 2031 0d0a 2020 2020 765f 6c6f 7765 7220   1..    v_lower 
+00001c40: 3d20 2756 4c4f 5765 7227 2c20 310d 0a20  = 'VLOWer', 1.. 
+00001c50: 2020 2076 5f61 7667 203d 2027 5641 5647     v_avg = 'VAVG
+00001c60: 272c 2031 0d0a 2020 2020 765f 726d 7320  ', 1..    v_rms 
+00001c70: 3d20 2756 524d 5327 2c20 310d 0a20 2020  = 'VRMS', 1..   
+00001c80: 206f 7665 7273 686f 6f74 203d 2027 4f56   overshoot = 'OV
+00001c90: 4552 7368 6f6f 7427 2c20 310d 0a20 2020  ERshoot', 1..   
+00001ca0: 2070 7265 7368 6f6f 7420 3d20 2750 5245   preshoot = 'PRE
+00001cb0: 5368 6f6f 7427 2c20 310d 0a20 2020 2070  Shoot', 1..    p
+00001cc0: 6572 696f 645f 765f 726d 7320 3d20 2750  eriod_v_rms = 'P
+00001cd0: 5652 4d53 272c 2031 0d0a 2020 2020 7661  VRMS', 1..    va
+00001ce0: 7269 616e 6365 203d 2027 5641 5249 616e  riance = 'VARIan
+00001cf0: 6365 272c 2031 0d0a 0d0a 2020 2020 2320  ce', 1....    # 
+00001d00: 6f74 6865 720d 0a20 2020 2072 6174 655f  other..    rate_
+00001d10: 706f 7320 3d20 2750 534c 4557 7261 7465  pos = 'PSLEWrate
+00001d20: 272c 2031 0d0a 2020 2020 7261 7465 5f6e  ', 1..    rate_n
+00001d30: 6567 203d 2027 4e53 4c45 5772 6174 6527  eg = 'NSLEWrate'
+00001d40: 2c20 310d 0a20 2020 2061 7265 6120 3d20  , 1..    area = 
+00001d50: 274d 4152 6561 272c 2031 0d0a 2020 2020  'MARea', 1..    
+00001d60: 7065 7269 6f64 5f61 7265 6120 3d20 274d  period_area = 'M
+00001d70: 5041 5265 6127 2c20 310d 0a0d 0a0d 0a63  PARea', 1......c
+00001d80: 6c61 7373 204d 6561 7375 7265 3a0d 0a20  lass Measure:.. 
+00001d90: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00001da0: 7365 6c66 2c20 6964 3a20 696e 742c 2073  self, id: int, s
+00001db0: 636f 7065 2c20 6d65 6173 7572 656d 656e  cope, measuremen
+00001dc0: 743a 2057 6176 6566 6f72 6d4d 6561 7375  t: WaveformMeasu
+00001dd0: 7265 6d65 6e74 2c20 6368 616e 6e65 6c5f  rement, channel_
+00001de0: 613a 2043 6861 6e6e 656c 2c20 6368 616e  a: Channel, chan
+00001df0: 6e65 6c5f 623a 2043 6861 6e6e 656c 203d  nel_b: Channel =
+00001e00: 204e 6f6e 652c 206b 6579 3a20 7374 7220   None, key: str 
+00001e10: 3d20 4e6f 6e65 2920 2d3e 204e 6f6e 653a  = None) -> None:
+00001e20: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+00001e30: 636f 7065 203d 2073 636f 7065 0d0a 2020  cope = scope..  
+00001e40: 2020 2020 2020 7365 6c66 2e6d 6561 7375        self.measu
+00001e50: 7265 6d65 6e74 203d 206d 6561 7375 7265  rement = measure
+00001e60: 6d65 6e74 0d0a 2020 2020 2020 2020 7365  ment..        se
+00001e70: 6c66 2e63 6861 6e6e 656c 5f61 203d 2063  lf.channel_a = c
+00001e80: 6861 6e6e 656c 5f61 0d0a 2020 2020 2020  hannel_a..      
+00001e90: 2020 7365 6c66 2e63 6861 6e6e 656c 5f62    self.channel_b
+00001ea0: 203d 2063 6861 6e6e 656c 5f62 0d0a 2020   = channel_b..  
+00001eb0: 2020 2020 2020 7365 6c66 2e6b 6579 203d        self.key =
+00001ec0: 206b 6579 0d0a 2020 2020 2020 2020 7365   key..        se
+00001ed0: 6c66 2e69 6420 3d20 6964 0d0a 2020 2020  lf.id = id..    
+00001ee0: 2020 2020 7365 6c66 2e61 6374 6976 6520      self.active 
+00001ef0: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
+00001f00: 2020 7365 6c66 2e63 6d64 203d 2027 3a4d    self.cmd = ':M
+00001f10: 4541 5375 7265 3a49 5445 4d27 0d0a 2020  EASure:ITEM'..  
+00001f20: 2020 2020 2020 7365 6c66 2e63 6d64 5f74        self.cmd_t
+00001f30: 6169 6c20 3d20 6627 207b 6d65 6173 7572  ail = f' {measur
+00001f40: 656d 656e 745b 305d 7d27 0d0a 0d0a 2020  ement[0]}'....  
+00001f50: 2020 2020 2020 6966 2063 6861 6e6e 656c        if channel
+00001f60: 5f61 2069 7320 6e6f 7420 4e6f 6e65 3a0d  _a is not None:.
+00001f70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00001f80: 662e 636d 645f 7461 696c 202b 3d20 6627  f.cmd_tail += f'
+00001f90: 2c7b 7365 6c66 2e63 6861 6e6e 656c 5f61  ,{self.channel_a
+00001fa0: 2e6e 616d 657d 270d 0a20 2020 2020 2020  .name}'..       
+00001fb0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00001fc0: 2020 2020 7261 6973 6520 4578 6365 7074      raise Except
+00001fd0: 696f 6e28 2770 7269 6d61 7279 2063 6861  ion('primary cha
+00001fe0: 6e6e 656c 206e 6f74 2070 726f 7669 6465  nnel not provide
+00001ff0: 6427 290d 0a0d 0a20 2020 2020 2020 2069  d')....        i
+00002000: 6620 7365 6c66 2e6d 6561 7375 7265 6d65  f self.measureme
+00002010: 6e74 5b31 5d20 3d3d 2032 3a0d 0a20 2020  nt[1] == 2:..   
+00002020: 2020 2020 2020 2020 2069 6620 6368 616e           if chan
+00002030: 6e65 6c5f 6220 6973 206e 6f74 204e 6f6e  nel_b is not Non
+00002040: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00002050: 2020 2020 7365 6c66 2e63 6d64 5f74 6169      self.cmd_tai
+00002060: 6c20 2b3d 2066 272c 7b73 656c 662e 6368  l += f',{self.ch
+00002070: 616e 6e65 6c5f 622e 6e61 6d65 7d27 0d0a  annel_b.name}'..
+00002080: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00002090: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000020a0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+000020b0: 6f6e 2827 7365 636f 6e64 2063 6861 6e6e  on('second chann
+000020c0: 656c 206e 6f74 2070 726f 7669 6465 6427  el not provided'
+000020d0: 290d 0a0d 0a20 2020 2020 2020 2023 2073  )....        # s
+000020e0: 656e 6420 7468 6520 636f 6d6d 616e 6420  end the command 
+000020f0: 746f 2073 6574 7570 2074 6865 206d 6561  to setup the mea
+00002100: 7375 7265 6d65 6e74 0d0a 2020 2020 2020  surement..      
+00002110: 2020 7365 6c66 2e73 636f 7065 2e77 7269    self.scope.wri
+00002120: 7465 2873 656c 662e 636d 6420 2b20 7365  te(self.cmd + se
+00002130: 6c66 2e63 6d64 5f74 6169 6c29 0d0a 0d0a  lf.cmd_tail)....
+00002140: 2020 2020 6465 6620 7265 6164 2873 656c      def read(sel
+00002150: 6629 3a0d 0a20 2020 2020 2020 2072 6574  f):..        ret
+00002160: 7572 6e20 7365 6c66 2e73 636f 7065 2e71  urn self.scope.q
+00002170: 7565 7279 2873 656c 662e 636d 6420 2b20  uery(self.cmd + 
+00002180: 273f 2027 202b 2073 656c 662e 636d 645f  '? ' + self.cmd_
+00002190: 7461 696c 290d 0a0d 0a20 2020 2064 6566  tail)....    def
+000021a0: 2063 6c65 6172 2873 656c 6629 3a0d 0a20   clear(self):.. 
+000021b0: 2020 2020 2020 2073 656c 662e 7363 6f70         self.scop
+000021c0: 652e 7772 6974 6528 6627 3a4d 4541 5375  e.write(f':MEASu
+000021d0: 7265 3a43 4c45 6172 2049 5445 4d7b 7365  re:CLEar ITEM{se
+000021e0: 6c66 2e69 647d 2729 0d0a 2020 2020 2020  lf.id}')..      
+000021f0: 2020 7365 6c66 2e61 6374 6976 6520 3d20    self.active = 
+00002200: 4661 6c73 650d 0a0d 0a20 2020 2064 6566  False....    def
+00002210: 2072 6563 6f76 6572 2873 656c 6629 3a0d   recover(self):.
+00002220: 0a20 2020 2020 2020 2073 656c 662e 7363  .        self.sc
+00002230: 6f70 652e 7772 6974 6528 6627 3a4d 4541  ope.write(f':MEA
+00002240: 5375 7265 3a52 4543 6f76 6572 2049 5445  Sure:RECover ITE
+00002250: 4d7b 7365 6c66 2e69 647d 2729 0d0a 2020  M{self.id}')..  
+00002260: 2020 2020 2020 7365 6c66 2e61 6374 6976        self.activ
+00002270: 6520 3d20 5472 7565 0d0a 0d0a 0d0a 636c  e = True......cl
+00002280: 6173 7320 436f 756e 7465 723a 0d0a 2020  ass Counter:..  
+00002290: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000022a0: 656c 662c 2073 636f 7065 2920 2d3e 204e  elf, scope) -> N
+000022b0: 6f6e 653a 0d0a 2020 2020 2020 2020 7365  one:..        se
+000022c0: 6c66 2e73 6f75 7263 6520 3d20 4e6f 6e65  lf.source = None
+000022d0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+000022e0: 636f 7065 203d 2073 636f 7065 0d0a 2020  cope = scope..  
+000022f0: 2020 2020 2020 7365 6c66 2e65 6e61 626c        self.enabl
+00002300: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00002310: 662e 5f61 6374 6976 6520 3d20 4661 6c73  f._active = Fals
+00002320: 650d 0a0d 0a20 2020 2064 6566 2065 6e61  e....    def ena
+00002330: 626c 6528 7365 6c66 2c20 6368 616e 6e65  ble(self, channe
+00002340: 6c3a 2043 6861 6e6e 656c 203d 204e 6f6e  l: Channel = Non
+00002350: 6529 3a0d 0a20 2020 2020 2020 2069 6620  e):..        if 
+00002360: 6368 616e 6e65 6c20 6973 204e 6f6e 653a  channel is None:
+00002370: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00002380: 6c66 2e72 656d 6f76 6528 290d 0a20 2020  lf.remove()..   
+00002390: 2020 2020 2020 2020 2073 656c 662e 5f61           self._a
+000023a0: 6374 6976 6520 3d20 4661 6c73 650d 0a20  ctive = False.. 
+000023b0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000023c0: 2020 2020 2020 2020 2020 6966 2063 6861            if cha
+000023d0: 6e6e 656c 2069 6e20 7365 6c66 2e73 636f  nnel in self.sco
+000023e0: 7065 2e63 6861 6e6e 656c 733a 0d0a 2020  pe.channels:..  
+000023f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00002400: 6c66 2e73 6f75 7263 6520 3d20 6368 616e  lf.source = chan
+00002410: 6e65 6c0d 0a20 2020 2020 2020 2020 2020  nel..           
+00002420: 2020 2020 2073 656c 662e 5f61 6374 6976       self._activ
+00002430: 6520 3d20 5472 7565 0d0a 2020 2020 2020  e = True..      
+00002440: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00002450: 636f 7065 2e77 7269 7465 2866 273a 4d45  cope.write(f':ME
+00002460: 4153 7572 653a 434f 554e 7465 723a 534f  ASure:COUNter:SO
+00002470: 5552 6365 207b 7365 6c66 2e73 6f75 7263  URce {self.sourc
+00002480: 652e 6e61 6d65 7d27 290d 0a20 2020 2020  e.name}')..     
+00002490: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000024a0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+000024b0: 6973 6520 4578 6365 7074 696f 6e28 2769  ise Exception('i
+000024c0: 6e76 616c 6964 2073 6f75 7263 6520 6368  nvalid source ch
+000024d0: 616e 6e65 6c27 290d 0a0d 0a20 2020 2064  annel')....    d
+000024e0: 6566 2072 6561 6428 7365 6c66 293a 0d0a  ef read(self):..
+000024f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00002500: 5f61 6374 6976 653a 0d0a 2020 2020 2020  _active:..      
+00002510: 2020 2020 2020 7265 7475 726e 2066 6c6f        return flo
+00002520: 6174 2873 656c 662e 7363 6f70 652e 7175  at(self.scope.qu
+00002530: 6572 7928 273a 4d45 4153 7572 653a 434f  ery(':MEASure:CO
+00002540: 554e 7465 723a 5641 4c75 653f 2729 290d  UNter:VALue?')).
+00002550: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00002560: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002570: 726e 204e 6f6e 650d 0a0d 0a20 2020 2064  rn None....    d
+00002580: 6566 2072 656d 6f76 6528 7365 6c66 293a  ef remove(self):
+00002590: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000025a0: 6374 6976 6520 3d20 4661 6c73 650d 0a20  ctive = False.. 
+000025b0: 2020 2020 2020 2073 656c 662e 7363 6f70         self.scop
+000025c0: 652e 7772 6974 6528 6627 3a4d 4541 5375  e.write(f':MEASu
+000025d0: 7265 3a43 4f55 4e74 6572 3a53 4f55 5263  re:COUNter:SOURc
+000025e0: 6520 4f46 4627 290d 0a0d 0a0d 0a63 6c61  e OFF')......cla
+000025f0: 7373 2054 696d 6562 6173 653a 0d0a 2020  ss Timebase:..  
+00002600: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00002610: 656c 662c 2073 636f 7065 2920 2d3e 204e  elf, scope) -> N
+00002620: 6f6e 653a 0d0a 2020 2020 2020 2020 7365  one:..        se
+00002630: 6c66 2e73 636f 7065 203d 2073 636f 7065  lf.scope = scope
+00002640: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00002650: 6465 6c61 795f 656e 6162 6c65 203d 2054  delay_enable = T
+00002660: 7275 6520 2023 206f 6e6c 7920 7374 6174  rue  # only stat
+00002670: 6520 696d 706c 656d 656e 7465 640d 0a20  e implemented.. 
+00002680: 2020 2020 2020 2073 656c 662e 5f64 656c         self._del
+00002690: 6179 5f6f 6666 7365 7420 3d20 4e6f 6e65  ay_offset = None
+000026a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+000026b0: 6465 6c61 795f 7363 616c 6520 3d20 4e6f  delay_scale = No
+000026c0: 6e65 0d0a 2020 2020 2020 2020 2320 746f  ne..        # to
+000026d0: 646f 2c20 7265 7175 6972 6573 2073 616d  do, requires sam
+000026e0: 706c 6520 7261 7465 2020 2d3e 3e3e 3e3e  ple rate  ->>>>>
+000026f0: 3e3e 3e3e 3e3e 3e3e 3e3e 3e3e 3e3e 3e3e  >>>>>>>>>>>>>>>>
+00002700: 2072 6561 6479 2074 6f20 696d 706c 656d   ready to implem
+00002710: 656e 740d 0a20 2020 2020 2020 2073 656c  ent..        sel
+00002720: 662e 5f6d 6169 6e5f 6f66 6673 6574 203d  f._main_offset =
+00002730: 204e 6f6e 650d 0a20 2020 2020 2020 2073   None..        s
+00002740: 656c 662e 5f6d 6169 6e5f 7363 616c 6520  elf._main_scale 
+00002750: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00002760: 7365 6c66 2e5f 6d6f 6465 203d 204e 6f6e  self._mode = Non
+00002770: 650d 0a20 2020 2020 2020 2023 2074 6f64  e..        # tod
+00002780: 6f20 3a20 7365 7475 700d 0a0d 0a20 2020  o : setup....   
+00002790: 2064 6566 2065 6e61 626c 655f 6465 6c61   def enable_dela
+000027a0: 7928 7365 6c66 2c20 7374 6174 653a 2062  y(self, state: b
+000027b0: 6f6f 6c20 3d20 4e6f 6e65 293a 0d0a 2020  ool = None):..  
+000027c0: 2020 2020 2020 636d 6420 3d20 273a 5449        cmd = ':TI
+000027d0: 4d65 6261 7365 3a44 454c 6179 3a45 4e41  Mebase:DELay:ENA
+000027e0: 426c 6527 0d0a 2020 2020 2020 2020 6966  Ble'..        if
+000027f0: 2073 7461 7465 2069 7320 4e6f 6e65 3a0d   state is None:.
+00002800: 0a20 2020 2020 2020 2020 2020 2063 6d64  .            cmd
+00002810: 202b 3d20 273f 270d 0a20 2020 2020 2020   += '?'..       
+00002820: 2020 2020 2076 616c 203d 2073 656c 662e       val = self.
+00002830: 7363 6f70 652e 7175 6572 7928 636d 6429  scope.query(cmd)
+00002840: 0d0a 2020 2020 2020 2020 2020 2020 7661  ..            va
+00002850: 6c20 3d20 5472 7565 2069 6620 7661 6c20  l = True if val 
+00002860: 3d3d 2027 3127 2065 6c73 6520 4661 6c73  == '1' else Fals
+00002870: 650d 0a20 2020 2020 2020 2020 2020 2073  e..            s
+00002880: 656c 662e 5f64 656c 6179 5f65 6e61 626c  elf._delay_enabl
+00002890: 6520 3d20 7661 6c0d 0a20 2020 2020 2020  e = val..       
+000028a0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+000028b0: 2020 2020 636d 6420 2b3d 2027 2031 2720      cmd += ' 1' 
+000028c0: 6966 2073 7461 7465 2065 6c73 6520 2720  if state else ' 
+000028d0: 3027 0d0a 2020 2020 2020 2020 2020 2020  0'..            
+000028e0: 7365 6c66 2e73 636f 7065 2e77 7269 7465  self.scope.write
+000028f0: 2863 6d64 290d 0a20 2020 2020 2020 2020  (cmd)..         
+00002900: 2020 2073 656c 662e 5f64 656c 6179 5f65     self._delay_e
+00002910: 6e61 626c 6520 3d20 7374 6174 650d 0a20  nable = state.. 
+00002920: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00002930: 6c66 2e5f 6465 6c61 795f 656e 6162 6c65  lf._delay_enable
+00002940: 0d0a 0d0a 0d0a 636c 6173 7320 5079 5269  ......class PyRi
+00002950: 676f 6c5f 4453 3130 3030 783a 0d0a 2020  gol_DS1000x:..  
+00002960: 2020 696d 706f 7274 2070 7976 6973 610d    import pyvisa.
+00002970: 0a20 2020 2069 6d70 6f72 7420 6d61 7468  .    import math
+00002980: 0d0a 2020 2020 696d 706f 7274 2072 650d  ..    import re.
+00002990: 0a0d 0a20 2020 2064 6566 205f 5f69 6e69  ...    def __ini
+000029a0: 745f 5f28 7365 6c66 2c20 5649 5341 5f72  t__(self, VISA_r
+000029b0: 6573 6f75 7263 655f 6d61 6e61 6765 723a  esource_manager:
+000029c0: 2070 7976 6973 612e 5265 736f 7572 6365   pyvisa.Resource
+000029d0: 4d61 6e61 6765 722c 2061 6464 7265 7373  Manager, address
+000029e0: 2c20 636f 6e6e 6563 743a 2062 6f6f 6c20  , connect: bool 
+000029f0: 3d20 5472 7565 293a 0d0a 2020 2020 2020  = True):..      
+00002a00: 2020 7365 6c66 2e72 6d20 3d20 5649 5341    self.rm = VISA
+00002a10: 5f72 6573 6f75 7263 655f 6d61 6e61 6765  _resource_manage
+00002a20: 720d 0a20 2020 2020 2020 2073 656c 662e  r..        self.
+00002a30: 696e 7465 7266 6163 6520 3d20 4e6f 6e65  interface = None
+00002a40: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00002a50: 6464 7265 7373 203d 2061 6464 7265 7373  ddress = address
+00002a60: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00002a70: 6f6e 6e65 6374 6564 203d 2046 616c 7365  onnected = False
+00002a80: 0d0a 0d0a 2020 2020 2020 2020 2320 6163  ....        # ac
+00002a90: 7175 6973 6974 696f 6e0d 0a20 2020 2020  quisition..     
+00002aa0: 2020 2073 656c 662e 5f61 6371 7569 7265     self._acquire
+00002ab0: 5f6d 6f64 6520 3d20 4e6f 6e65 2020 2320  _mode = None  # 
+00002ac0: 646f 6e65 2069 6e20 7365 7475 700d 0a20  done in setup.. 
+00002ad0: 2020 2020 2020 2073 656c 662e 5f76 616c         self._val
+00002ae0: 6964 5f61 6371 7569 7265 5f6d 6f64 6520  id_acquire_mode 
+00002af0: 3d20 5b27 4e4f 524d 272c 2027 4156 4552  = ['NORM', 'AVER
+00002b00: 272c 2027 5045 414b 272c 2027 4852 4553  ', 'PEAK', 'HRES
+00002b10: 275d 0d0a 0d0a 2020 2020 2020 2020 7365  ']....        se
+00002b20: 6c66 2e73 616d 706c 655f 7261 7465 203d  lf.sample_rate =
+00002b30: 204e 6f6e 6520 2023 2064 6f6e 6520 696e   None  # done in
+00002b40: 2073 6574 7570 0d0a 2020 2020 2020 2020   setup..        
+00002b50: 7365 6c66 2e6d 656d 6f72 795f 6465 7074  self.memory_dept
+00002b60: 6820 3d20 4e6f 6e65 2020 2320 646f 6e65  h = None  # done
+00002b70: 2069 6e20 7365 7475 700d 0a0d 0a20 2020   in setup....   
+00002b80: 2020 2020 2023 206c 6f63 616c 2073 7461       # local sta
+00002b90: 7465 0d0a 2020 2020 2020 2020 7365 6c66  te..        self
+00002ba0: 2e5f 7761 7665 666f 726d 5f73 6f75 7263  ._waveform_sourc
+00002bb0: 6520 3d20 4e6f 6e65 2020 2320 646f 6e65  e = None  # done
+00002bc0: 2069 6e20 7365 7475 700d 0a0d 0a20 2020   in setup....   
+00002bd0: 2020 2020 2073 656c 662e 5f77 6176 6566       self._wavef
+00002be0: 6f72 6d5f 7265 6164 696e 675f 6d6f 6465  orm_reading_mode
+00002bf0: 203d 204e 6f6e 6520 2023 2064 6f6e 6520   = None  # done 
+00002c00: 696e 2073 6574 7570 0d0a 2020 2020 2020  in setup..      
+00002c10: 2020 7365 6c66 2e5f 7661 6c69 645f 7761    self._valid_wa
+00002c20: 7665 666f 726d 5f6d 6f64 6520 3d20 5b27  veform_mode = ['
+00002c30: 4e4f 524d 272c 2027 4d41 5827 2c20 2752  NORM', 'MAX', 'R
+00002c40: 4157 275d 0d0a 0d0a 2020 2020 2020 2020  AW']....        
+00002c50: 7365 6c66 2e5f 7761 7665 666f 726d 5f72  self._waveform_r
+00002c60: 6574 7572 6e5f 666f 726d 6174 203d 204e  eturn_format = N
+00002c70: 6f6e 6520 2023 2064 6f6e 6520 696e 2073  one  # done in s
+00002c80: 6574 7570 0d0a 2020 2020 2020 2020 7365  etup..        se
+00002c90: 6c66 2e5f 7661 6c69 645f 7761 7665 666f  lf._valid_wavefo
+00002ca0: 726d 5f66 6f72 6d61 7420 3d20 5b27 574f  rm_format = ['WO
+00002cb0: 5244 272c 2027 4259 5445 272c 2027 4153  RD', 'BYTE', 'AS
+00002cc0: 4327 5d0d 0a0d 0a20 2020 2020 2020 2023  C']....        #
+00002cd0: 206d 6561 7375 7265 6d65 6e74 0d0a 2020   measurement..  
+00002ce0: 2020 2020 2020 7365 6c66 2e5f 6d65 6173        self._meas
+00002cf0: 7572 656d 656e 7473 3a6c 6973 745b 4d65  urements:list[Me
+00002d00: 6173 7572 655d 203d 205b 5d0d 0a20 2020  asure] = []..   
+00002d10: 2020 2020 2073 656c 662e 5f6d 6178 5f6d       self._max_m
+00002d20: 6561 7375 7265 6d65 6e74 7320 3d20 3620  easurements = 6 
+00002d30: 2023 2074 6f64 6f2c 2063 6865 636b 0d0a   # todo, check..
+00002d40: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00002d50: 6f75 6e74 6572 203d 204e 6f6e 6520 2023  ounter = None  #
+00002d60: 2064 6f6e 6520 696e 2073 6574 7570 0d0a   done in setup..
+00002d70: 0d0a 2020 2020 2020 2020 2320 7661 6c69  ..        # vali
+00002d80: 6461 7469 6f6e 0d0a 2020 2020 2020 2020  dation..        
+00002d90: 7365 6c66 2e5f 7661 6c69 645f 6368 616e  self._valid_chan
+00002da0: 6e65 6c73 203d 205b 2743 4841 4e31 272c  nels = ['CHAN1',
+00002db0: 2027 4348 414e 3227 2c20 2743 4841 4e33   'CHAN2', 'CHAN3
+00002dc0: 272c 2027 4348 414e 3427 5d0d 0a20 2020  ', 'CHAN4']..   
+00002dd0: 2020 2020 2073 656c 662e 6368 616e 6e65       self.channe
+00002de0: 6c73 203d 204e 6f6e 6520 2023 2064 6f6e  ls = None  # don
+00002df0: 6520 696e 2073 6574 7570 0d0a 0d0a 2020  e in setup....  
+00002e00: 2020 2020 2020 2320 636f 6e6e 6563 7469        # connecti
+00002e10: 6f6e 0d0a 2020 2020 2020 2020 6966 2063  on..        if c
+00002e20: 6f6e 6e65 6374 3a0d 0a20 2020 2020 2020  onnect:..       
+00002e30: 2020 2020 2073 656c 662e 6f70 656e 2829       self.open()
+00002e40: 0d0a 0d0a 2020 2020 2320 2d2d 2069 6e74  ....    # -- int
+00002e50: 6572 6661 6365 206d 616e 6167 656d 656e  erface managemen
+00002e60: 740d 0a0d 0a20 2020 2064 6566 2073 6574  t....    def set
+00002e70: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
+00002e80: 2020 2073 656c 662e 6163 7175 6972 655f     self.acquire_
+00002e90: 6d6f 6465 2829 0d0a 2020 2020 2020 2020  mode()..        
+00002ea0: 7365 6c66 2e61 6371 7569 7265 5f73 616d  self.acquire_sam
+00002eb0: 706c 655f 7261 7465 2829 0d0a 2020 2020  ple_rate()..    
+00002ec0: 2020 2020 7365 6c66 2e61 6371 7569 7265      self.acquire
+00002ed0: 5f6d 656d 6f72 795f 6465 7074 6828 290d  _memory_depth().
+00002ee0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00002ef0: 7761 7665 666f 726d 5f73 6f75 7263 6528  waveform_source(
+00002f00: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002f10: 7761 7665 666f 726d 5f72 6561 645f 6d6f  waveform_read_mo
+00002f20: 6465 2829 0d0a 2020 2020 2020 2020 7365  de()..        se
+00002f30: 6c66 2e77 6176 6566 6f72 6d5f 7265 7475  lf.waveform_retu
+00002f40: 726e 5f66 6f72 6d61 7428 2741 5343 2729  rn_format('ASC')
+00002f50: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00002f60: 2e63 6861 6e6e 656c 7320 3d20 5b43 6861  .channels = [Cha
+00002f70: 6e6e 656c 2873 656c 662c 2069 2920 666f  nnel(self, i) fo
+00002f80: 7220 6920 696e 2073 656c 662e 5f76 616c  r i in self._val
+00002f90: 6964 5f63 6861 6e6e 656c 735d 0d0a 2020  id_channels]..  
+00002fa0: 2020 2020 2020 7365 6c66 2e63 6f75 6e74        self.count
+00002fb0: 6572 203d 2043 6f75 6e74 6572 2873 656c  er = Counter(sel
+00002fc0: 6629 0d0a 0d0a 2020 2020 6465 6620 7772  f)....    def wr
+00002fd0: 6974 6528 7365 6c66 2c20 6461 7461 293a  ite(self, data):
+00002fe0: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+00002ff0: 662e 696e 7465 7266 6163 6520 6973 206e  f.interface is n
+00003000: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00003010: 2020 2020 2020 7072 696e 7428 6627 7772        print(f'wr
+00003020: 6974 6520 2d3e 7b64 6174 617d 2729 0d0a  ite ->{data}')..
+00003030: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00003040: 2e69 6e74 6572 6661 6365 2e77 7269 7465  .interface.write
+00003050: 2864 6174 6129 0d0a 2020 2020 2020 2020  (data)..        
+00003060: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00003070: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00003080: 6f6e 2827 696e 7374 7275 6d65 6e74 206e  on('instrument n
+00003090: 6f74 2063 6f6e 6e65 6374 6564 2729 0d0a  ot connected')..
+000030a0: 0d0a 2020 2020 6465 6620 7175 6572 7928  ..    def query(
+000030b0: 7365 6c66 2c20 7175 6572 795f 7374 7269  self, query_stri
+000030c0: 6e67 3a20 7374 7229 3a0d 0a20 2020 2020  ng: str):..     
+000030d0: 2020 2070 7269 6e74 2866 2771 7565 7279     print(f'query
+000030e0: 202d 3e7b 7175 6572 795f 7374 7269 6e67   ->{query_string
+000030f0: 7d27 290d 0a20 2020 2020 2020 2072 6573  }')..        res
+00003100: 706f 6e73 6520 3d20 7365 6c66 2e69 6e74  ponse = self.int
+00003110: 6572 6661 6365 2e71 7565 7279 2871 7565  erface.query(que
+00003120: 7279 5f73 7472 696e 6729 0d0a 2020 2020  ry_string)..    
+00003130: 2020 2020 7265 7475 726e 2072 6573 706f      return respo
+00003140: 6e73 650d 0a0d 0a20 2020 2064 6566 206f  nse....    def o
+00003150: 7065 6e28 7365 6c66 293a 0d0a 2020 2020  pen(self):..    
+00003160: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00003170: 2020 2020 2020 7365 6c66 2e69 6e74 6572        self.inter
+00003180: 6661 6365 203d 2073 656c 662e 726d 2e6f  face = self.rm.o
+00003190: 7065 6e5f 7265 736f 7572 6365 2873 656c  pen_resource(sel
+000031a0: 662e 6164 6472 6573 732c 0d0a 2020 2020  f.address,..    
+000031b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000031c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000031d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000031e0: 6561 645f 7465 726d 696e 6174 696f 6e3d  ead_termination=
+000031f0: 275c 6e27 2c0d 0a20 2020 2020 2020 2020  '\n',..         
+00003200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003220: 2020 2020 2020 2020 2020 7772 6974 655f            write_
+00003230: 7465 726d 696e 6174 696f 6e3d 275c 6e27  termination='\n'
+00003240: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00003250: 206d 6f64 656c 203d 2073 656c 662e 696e   model = self.in
+00003260: 7465 7266 6163 652e 6d6f 6465 6c5f 6e61  terface.model_na
+00003270: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
+00003280: 6966 206d 6f64 656c 203d 3d20 2744 5331  if model == 'DS1
+00003290: 3030 305a 2053 6572 6965 7327 3a0d 0a20  000Z Series':.. 
+000032a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000032b0: 656c 662e 636f 6e6e 6563 7465 6420 3d20  elf.connected = 
+000032c0: 5472 7565 0d0a 2020 2020 2020 2020 2020  True..          
+000032d0: 2020 2020 2020 7365 6c66 2e73 6574 7570        self.setup
+000032e0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+000032f0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00003300: 2020 2020 2020 2073 656c 662e 636f 6e6e         self.conn
+00003310: 6563 7465 6420 3d20 4661 6c73 650d 0a20  ected = False.. 
+00003320: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00003330: 656c 662e 696e 7465 7266 6163 652e 636c  elf.interface.cl
+00003340: 6f73 6528 290d 0a20 2020 2020 2020 2020  ose()..         
+00003350: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+00003360: 6570 7469 6f6e 280d 0a20 2020 2020 2020  eption(..       
+00003370: 2020 2020 2020 2020 2020 2020 2066 2749               f'I
+00003380: 6e76 616c 6964 2069 6e73 7472 756d 656e  nvalid instrumen
+00003390: 7420 6d6f 6465 6c2c 206f 6e6c 7920 4453  t model, only DS
+000033a0: 3130 3030 5a20 5365 7269 6573 2073 636f  1000Z Series sco
+000033b0: 7065 7320 6172 6520 7375 7070 6f72 7465  pes are supporte
+000033c0: 642c 2067 6f74 203a 207b 6d6f 6465 6c7d  d, got : {model}
+000033d0: 2729 0d0a 0d0a 2020 2020 2020 2020 6578  ')....        ex
+000033e0: 6365 7074 2073 656c 662e 7079 7669 7361  cept self.pyvisa
+000033f0: 2e65 7272 6f72 732e 5669 7361 494f 4572  .errors.VisaIOEr
+00003400: 726f 723a 0d0a 2020 2020 2020 2020 2020  ror:..          
+00003410: 2020 7365 6c66 2e63 6f6e 6e65 6374 6564    self.connected
+00003420: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+00003430: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+00003440: 7074 696f 6e28 2743 6f6e 6e65 6374 696f  ption('Connectio
+00003450: 6e20 4661 696c 7572 652c 2075 6e61 626c  n Failure, unabl
+00003460: 6520 746f 206f 7065 6e20 5669 7361 2072  e to open Visa r
+00003470: 6573 6f75 7263 6527 290d 0a0d 0a20 2020  esource')....   
+00003480: 2023 2049 4545 4520 636f 6d70 6174 6962   # IEEE compatib
+00003490: 6c65 0d0a 0d0a 2020 2020 6465 6620 6964  le....    def id
+000034a0: 6e28 7365 6c66 293a 0d0a 2020 2020 2020  n(self):..      
+000034b0: 2020 7265 7475 726e 2073 656c 662e 7175    return self.qu
+000034c0: 6572 7928 272a 4944 4e3f 2729 0d0a 0d0a  ery('*IDN?')....
+000034d0: 2020 2020 2320 2d2d 2061 6371 7569 7369      # -- acquisi
+000034e0: 7469 6f6e 2073 7461 7465 0d0a 0d0a 2020  tion state....  
+000034f0: 2020 6465 6620 6175 746f 7363 616c 6528    def autoscale(
+00003500: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00003510: 2222 2245 6e61 626c 6520 7468 6520 7761  """Enable the wa
+00003520: 7665 666f 726d 2061 7574 6f20 7365 7474  veform auto sett
+00003530: 696e 6720 6675 6e63 7469 6f6e 2e20 5468  ing function. Th
+00003540: 6520 6f73 6369 6c6c 6f73 636f 7065 2077  e oscilloscope w
+00003550: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00003560: 7920 6164 6a75 7374 2074 6865 2076 6572  y adjust the ver
+00003570: 7469 6361 6c20 7363 616c 652c 2068 6f72  tical scale, hor
+00003580: 697a 6f6e 7461 6c20 7469 6d65 6261 7365  izontal timebase
+00003590: 2c20 616e 6420 7472 6967 6765 7220 6d6f  , and trigger mo
+000035a0: 6465 2061 6363 6f72 6469 6e67 2074 6f20  de according to 
+000035b0: 7468 6520 696e 7075 7420 7369 676e 616c  the input signal
+000035c0: 2074 6f20 7265 616c 697a 6520 6f70 7469   to realize opti
+000035d0: 6d75 6d20 7761 7665 666f 726d 2064 6973  mum waveform dis
+000035e0: 706c 6179 2222 220d 0a20 2020 2020 2020  play"""..       
+000035f0: 2073 656c 662e 7772 6974 6528 273a 4155   self.write(':AU
+00003600: 546f 7363 616c 6527 290d 0a0d 0a20 2020  Toscale')....   
+00003610: 2064 6566 2063 6c65 6172 2873 656c 6629   def clear(self)
+00003620: 3a0d 0a20 2020 2020 2020 2022 2222 436c  :..        """Cl
+00003630: 6561 7220 616c 6c20 7468 6520 7761 7665  ear all the wave
+00003640: 666f 726d 7320 6f6e 2074 6865 2073 6372  forms on the scr
+00003650: 6565 6e22 2222 0d0a 2020 2020 2020 2020  een"""..        
+00003660: 7365 6c66 2e77 7269 7465 2827 3a43 4c45  self.write(':CLE
+00003670: 6172 2729 0d0a 0d0a 2020 2020 6465 6620  ar')....    def 
+00003680: 7275 6e28 7365 6c66 293a 0d0a 2020 2020  run(self):..    
+00003690: 2020 2020 2222 2253 7461 7274 7320 7761      """Starts wa
+000036a0: 7665 666f 726d 2061 6371 7569 7369 7469  veform acquisiti
+000036b0: 6f6e 2222 220d 0a20 2020 2020 2020 2073  on"""..        s
+000036c0: 656c 662e 7772 6974 6528 273a 5255 4e27  elf.write(':RUN'
+000036d0: 290d 0a0d 0a20 2020 2064 6566 2073 746f  )....    def sto
+000036e0: 7028 7365 6c66 293a 0d0a 2020 2020 2020  p(self):..      
+000036f0: 2020 2222 2253 746f 7073 2077 6176 6566    """Stops wavef
+00003700: 6f72 6d20 6163 7175 6973 6974 696f 6e22  orm acquisition"
+00003710: 2222 0d0a 2020 2020 2020 2020 7365 6c66  ""..        self
+00003720: 2e77 7269 7465 2827 3a53 544f 5027 290d  .write(':STOP').
+00003730: 0a0d 0a20 2020 2064 6566 2073 696e 676c  ...    def singl
+00003740: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
+00003750: 2020 2222 2253 6574 2074 6865 206f 7363    """Set the osc
+00003760: 696c 6c6f 7363 6f70 6520 746f 2074 6865  illoscope to the
+00003770: 2073 696e 676c 6520 7472 6967 6765 7220   single trigger 
+00003780: 6d6f 6465 2e22 2222 0d0a 2020 2020 2020  mode."""..      
+00003790: 2020 7365 6c66 2e77 7269 7465 2827 3a53    self.write(':S
+000037a0: 494e 476c 6527 290d 0a0d 0a20 2020 2064  INGle')....    d
+000037b0: 6566 2066 6f72 6365 5f74 7269 6767 6572  ef force_trigger
+000037c0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+000037d0: 2022 2222 4765 6e65 7261 7465 2061 2074   """Generate a t
+000037e0: 7269 6767 6572 2073 6967 6e61 6c20 666f  rigger signal fo
+000037f0: 7263 6566 756c 6c79 2e20 5468 6973 2063  rcefully. This c
+00003800: 6f6d 6d61 6e64 2069 7320 6f6e 6c79 2061  ommand is only a
+00003810: 7070 6c69 6361 626c 6520 746f 2074 6865  pplicable to the
+00003820: 206e 6f72 6d61 6c20 616e 6420 7369 6e67   normal and sing
+00003830: 6c65 2074 7269 6767 6572 206d 6f64 6573  le trigger modes
+00003840: 2222 220d 0a20 2020 2020 2020 2073 656c  """..        sel
+00003850: 662e 7772 6974 6528 2754 464f 5263 6527  f.write('TFORce'
+00003860: 290d 0a0d 0a20 2020 2023 202d 2d20 6163  )....    # -- ac
+00003870: 7175 6972 655f 7365 6374 696f 6e0d 0a0d  quire_section...
+00003880: 0a20 2020 2064 6566 2061 7665 7261 6765  .    def average
+00003890: 7328 7365 6c66 2c20 6e3a 2069 6e74 203d  s(self, n: int =
+000038a0: 204e 6f6e 6529 3a0d 0a20 2020 2020 2020   None):..       
+000038b0: 2022 2222 5365 7420 6f72 2071 7565 7279   """Set or query
+000038c0: 2074 6865 206e 756d 6265 7220 6f66 2061   the number of a
+000038d0: 7665 7261 6765 7320 756e 6465 7220 7468  verages under th
+000038e0: 6520 6176 6572 6167 6520 6163 7175 6973  e average acquis
+000038f0: 6974 696f 6e20 6d6f 6465 2e22 2222 0d0a  ition mode."""..
+00003900: 2020 2020 2020 2020 636d 6420 3d20 273a          cmd = ':
+00003910: 4143 5175 6972 653a 4156 4552 6167 6573  ACQuire:AVERages
+00003920: 270d 0a20 2020 2020 2020 2069 6620 6e20  '..        if n 
+00003930: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+00003940: 2020 2020 2020 636d 6420 2b3d 2027 3f27        cmd += '?'
+00003950: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00003960: 7475 726e 2073 656c 662e 7175 6572 7928  turn self.query(
+00003970: 636d 6429 0d0a 2020 2020 2020 2020 656c  cmd)..        el
+00003980: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00003990: 2076 616c 203d 2073 656c 662e 6d61 7468   val = self.math
+000039a0: 2e6c 6f67 3228 6e29 0d0a 2020 2020 2020  .log2(n)..      
+000039b0: 2020 2020 2020 726f 756e 645f 7661 6c20        round_val 
+000039c0: 3d20 726f 756e 6428 7661 6c29 0d0a 2020  = round(val)..  
+000039d0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+000039e0: 662e 6d61 7468 2e69 7363 6c6f 7365 2876  f.math.isclose(v
+000039f0: 616c 2c20 726f 756e 645f 7661 6c29 3a0d  al, round_val):.
+00003a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003a10: 2076 616c 203d 2069 6e74 2873 656c 662e   val = int(self.
+00003a20: 6d61 7468 2e6c 6f67 3228 6e29 290d 0a20  math.log2(n)).. 
+00003a30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00003a40: 6d64 202b 3d20 6627 207b 6e7d 270d 0a20  md += f' {n}'.. 
+00003a50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00003a60: 656c 662e 7772 6974 6528 636d 6429 0d0a  elf.write(cmd)..
+00003a70: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00003a80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00003a90: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+00003aa0: 6f6e 280d 0a20 2020 2020 2020 2020 2020  on(..           
+00003ab0: 2020 2020 2020 2020 2066 2761 7665 7261           f'avera
+00003ac0: 6765 206f 7574 7369 6465 2076 616c 6964  ge outside valid
+00003ad0: 2072 616e 6765 2032 5e6e 2066 6f72 206e   range 2^n for n
+00003ae0: 2069 6e20 312d 3130 2c20 6769 7665 6e3a   in 1-10, given:
+00003af0: 207b 6e7d 2729 0d0a 0d0a 2020 2020 6465   {n}')....    de
+00003b00: 6620 6163 7175 6972 655f 6d65 6d6f 7279  f acquire_memory
+00003b10: 5f64 6570 7468 2873 656c 662c 2064 6570  _depth(self, dep
+00003b20: 7468 3a69 6e74 203d 204e 6f6e 6529 3a0d  th:int = None):.
+00003b30: 0a20 2020 2020 2020 2022 2222 5365 7420  .        """Set 
+00003b40: 6f72 2071 7565 7279 2074 6865 206d 656d  or query the mem
+00003b50: 6f72 7920 6465 7074 6820 6f66 2074 6865  ory depth of the
+00003b60: 206f 7363 696c 6c6f 7363 6f70 6520 286e   oscilloscope (n
+00003b70: 616d 656c 7920 7468 6520 6e75 6d62 6572  amely the number
+00003b80: 206f 6620 7761 7665 666f 726d 2070 6f69   of waveform poi
+00003b90: 6e74 7320 7468 6174 2063 616e 2062 6520  nts that can be 
+00003ba0: 7374 6f72 6564 2069 6e20 6120 7369 6e67  stored in a sing
+00003bb0: 6c65 2074 7269 6767 6572 2073 616d 706c  le trigger sampl
+00003bc0: 6529 2e20 5468 6520 6465 6661 756c 7420  e). The default 
+00003bd0: 756e 6974 2069 7320 7074 7320 2870 6f69  unit is pts (poi
+00003be0: 6e74 7329 206f 7220 2741 5554 4f27 2e22  nts) or 'AUTO'."
+00003bf0: 2222 0d0a 2020 2020 2020 2020 636d 6420  ""..        cmd 
+00003c00: 3d20 273a 4143 5175 6972 653a 4d44 4550  = ':ACQuire:MDEP
+00003c10: 7468 270d 0a20 2020 2020 2020 2069 6620  th'..        if 
+00003c20: 6465 7074 6820 6973 204e 6f6e 653a 0d0a  depth is None:..
+00003c30: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
+00003c40: 2b3d 2027 3f27 0d0a 2020 2020 2020 2020  += '?'..        
+00003c50: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00003c60: 2020 2020 2020 2020 2020 7661 6c20 3d20            val = 
+00003c70: 666c 6f61 7428 7365 6c66 2e71 7565 7279  float(self.query
+00003c80: 2863 6d64 2929 0d0a 2020 2020 2020 2020  (cmd))..        
+00003c90: 2020 2020 6578 6365 7074 2056 616c 7565      except Value
+00003ca0: 4572 726f 723a 0d0a 2020 2020 2020 2020  Error:..        
+00003cb0: 2020 2020 2020 2020 7661 6c20 3d20 2d31          val = -1
+00003cc0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00003cd0: 6c66 2e6d 656d 6f72 795f 6465 7074 6820  lf.memory_depth 
+00003ce0: 3d20 7661 6c0d 0a20 2020 2020 2020 2065  = val..        e
+00003cf0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00003d00: 2020 7061 7373 2020 2320 746f 646f 0d0a    pass  # todo..
+00003d10: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00003d20: 656c 662e 6d65 6d6f 7279 5f64 6570 7468  elf.memory_depth
+00003d30: 0d0a 0d0a 2020 2020 6465 6620 6163 7175  ....    def acqu
+00003d40: 6972 655f 6d6f 6465 2873 656c 662c 206d  ire_mode(self, m
+00003d50: 6f64 653a 2073 7472 203d 204e 6f6e 6529  ode: str = None)
+00003d60: 3a0d 0a20 2020 2020 2020 2066 2222 2253  :..        f"""S
+00003d70: 6574 206f 7220 7175 6572 7920 7468 6520  et or query the 
+00003d80: 6163 7175 6973 6974 696f 6e20 6d6f 6465  acquisition mode
+00003d90: 206f 6620 7468 6520 6f73 6369 6c6c 6f73   of the oscillos
+00003da0: 636f 7065 2c20 7661 6c69 643a 7b73 656c  cope, valid:{sel
+00003db0: 662e 5f76 616c 6964 5f61 6371 7569 7265  f._valid_acquire
+00003dc0: 5f6d 6f64 657d 2022 2222 0d0a 2020 2020  _mode} """..    
+00003dd0: 2020 2020 636d 6420 3d20 273a 4143 5175      cmd = ':ACQu
+00003de0: 6972 653a 5459 5045 270d 0a20 2020 2020  ire:TYPE'..     
+00003df0: 2020 2069 6620 6d6f 6465 2069 7320 4e6f     if mode is No
+00003e00: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00003e10: 2063 6d64 202b 3d20 273f 270d 0a20 2020   cmd += '?'..   
+00003e20: 2020 2020 2020 2020 206d 6f64 6520 3d20           mode = 
+00003e30: 7365 6c66 2e71 7565 7279 2863 6d64 290d  self.query(cmd).
+00003e40: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00003e50: 662e 5f61 6371 7569 7265 5f6d 6f64 6520  f._acquire_mode 
+00003e60: 3d20 6d6f 6465 0d0a 2020 2020 2020 2020  = mode..        
+00003e70: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00003e80: 2020 2069 6620 6d6f 6465 2069 6e20 7365     if mode in se
+00003e90: 6c66 2e5f 7661 6c69 645f 6163 7175 6972  lf._valid_acquir
+00003ea0: 655f 6d6f 6465 3a0d 0a20 2020 2020 2020  e_mode:..       
+00003eb0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00003ec0: 2e5f 6163 7175 6972 655f 6d6f 6465 2021  ._acquire_mode !
+00003ed0: 3d20 6d6f 6465 3a0d 0a20 2020 2020 2020  = mode:..       
+00003ee0: 2020 2020 2020 2020 2020 2020 2063 6d64               cmd
+00003ef0: 202b 3d20 6627 207b 6d6f 6465 7d27 0d0a   += f' {mode}'..
+00003f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f10: 2020 2020 7365 6c66 2e77 7269 7465 2863      self.write(c
+00003f20: 6d64 290d 0a20 2020 2020 2020 2020 2020  md)..           
+00003f30: 2020 2020 2020 2020 2073 656c 662e 5f61           self._a
+00003f40: 6371 7569 7265 5f6d 6f64 6520 3d20 6d6f  cquire_mode = mo
+00003f50: 6465 0d0a 2020 2020 2020 2020 2020 2020  de..            
+00003f60: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00003f70: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+00003f80: 6570 7469 6f6e 2866 2769 6e76 616c 6964  eption(f'invalid
+00003f90: 2061 6371 7569 7265 206d 6f64 6520 7b6d   acquire mode {m
+00003fa0: 6f64 657d 2729 0d0a 2020 2020 2020 2020  ode}')..        
+00003fb0: 7265 7475 726e 2073 656c 662e 5f61 6371  return self._acq
+00003fc0: 7569 7265 5f6d 6f64 650d 0a0d 0a20 2020  uire_mode....   
+00003fd0: 2064 6566 2061 6371 7569 7265 5f73 616d   def acquire_sam
+00003fe0: 706c 655f 7261 7465 2873 656c 6629 3a0d  ple_rate(self):.
+00003ff0: 0a20 2020 2020 2020 2022 2222 5175 6572  .        """Quer
+00004000: 7920 7468 6520 6375 7272 656e 7420 7361  y the current sa
+00004010: 6d70 6c65 2072 6174 652e 2054 6865 2064  mple rate. The d
+00004020: 6566 6175 6c74 2075 6e69 7420 6973 2053  efault unit is S
+00004030: 612f 7322 2222 0d0a 2020 2020 2020 2020  a/s"""..        
+00004040: 7661 6c20 3d20 7365 6c66 2e71 7565 7279  val = self.query
+00004050: 2827 3a41 4351 7569 7265 3a53 5241 5465  (':ACQuire:SRATe
+00004060: 3f27 290d 0a20 2020 2020 2020 2073 656c  ?')..        sel
+00004070: 662e 7361 6d70 6c65 5f72 6174 6520 3d20  f.sample_rate = 
+00004080: 7661 6c0d 0a20 2020 2020 2020 2072 6574  val..        ret
+00004090: 7572 6e20 7661 6c0d 0a0d 0a20 2020 2023  urn val....    #
+000040a0: 202d 2d20 6361 6c69 6272 6174 696f 6e0d   -- calibration.
+000040b0: 0a0d 0a20 2020 2064 6566 2073 7461 7274  ...    def start
+000040c0: 5f63 616c 2873 656c 6629 3a0d 0a20 2020  _cal(self):..   
+000040d0: 2020 2020 2022 2222 5468 6520 6f73 6369       """The osci
+000040e0: 6c6c 6f73 636f 7065 2073 7461 7274 7320  lloscope starts 
+000040f0: 746f 2065 7865 6375 7465 2073 656c 662d  to execute self-
+00004100: 6361 6c69 6272 6174 696f 6e22 2222 0d0a  calibration"""..
+00004110: 2020 2020 2020 2020 7365 6c66 2e77 7269          self.wri
+00004120: 7465 2827 3a43 414c 6962 7261 7465 3a53  te(':CALibrate:S
+00004130: 5441 5274 2729 0d0a 0d0a 2020 2020 6465  TARt')....    de
+00004140: 6620 7374 6f70 5f63 616c 2873 656c 6629  f stop_cal(self)
+00004150: 3a0d 0a20 2020 2020 2020 2022 2222 4578  :..        """Ex
+00004160: 6974 2074 6865 2073 656c 662d 6361 6c69  it the self-cali
+00004170: 6272 6174 696f 6e20 6174 2061 6e79 2074  bration at any t
+00004180: 696d 6522 2222 0d0a 2020 2020 2020 2020  ime"""..        
+00004190: 7365 6c66 2e77 7269 7465 2827 3a43 414c  self.write(':CAL
+000041a0: 6962 7261 7465 3a51 5549 5427 290d 0a0d  ibrate:QUIT')...
+000041b0: 0a20 2020 2023 202d 2d20 6d65 6173 7572  .    # -- measur
+000041c0: 656d 656e 7420 6675 6e63 7469 6f6e 730d  ement functions.
+000041d0: 0a20 2020 2064 6566 2061 6464 5f6d 6561  .    def add_mea
+000041e0: 7375 7265 6d65 6e74 2873 656c 662c 206d  surement(self, m
+000041f0: 6561 733a 2057 6176 6566 6f72 6d4d 6561  eas: WaveformMea
+00004200: 7375 7265 6d65 6e74 2c20 6368 616e 6e65  surement, channe
+00004210: 6c5f 613a 2043 6861 6e6e 656c 2c20 6368  l_a: Channel, ch
+00004220: 616e 6e65 6c5f 623a 2043 6861 6e6e 656c  annel_b: Channel
+00004230: 203d 204e 6f6e 652c 206b 6579 3d4e 6f6e   = None, key=Non
+00004240: 6529 3a0d 0a20 2020 2020 2020 2069 6620  e):..        if 
+00004250: 6c65 6e28 7365 6c66 2e5f 6d65 6173 7572  len(self._measur
+00004260: 656d 656e 7473 2920 3e20 7365 6c66 2e5f  ements) > self._
+00004270: 6d61 785f 6d65 6173 7572 656d 656e 7473  max_measurements
+00004280: 3a0d 0a20 2020 2020 2020 2020 2020 2066  :..            f
+00004290: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
+000042a0: 6e28 7365 6c66 2e5f 6d65 6173 7572 656d  n(self._measurem
+000042b0: 656e 7473 2929 3a0d 0a20 2020 2020 2020  ents)):..       
+000042c0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+000042d0: 7365 6c66 2e5f 6d65 6173 7572 656d 656e  self._measuremen
+000042e0: 745b 695d 2e61 6374 6976 653a 0d0a 2020  t[i].active:..  
+000042f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004300: 2020 7365 6c66 2e5f 6d65 6173 7572 656d    self._measurem
+00004310: 656e 7473 2e70 6f70 2869 290d 0a20 2020  ents.pop(i)..   
+00004320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004330: 2073 656c 662e 5f6d 6561 7375 7265 6d65   self._measureme
+00004340: 6e74 732e 6170 7065 6e64 280d 0a20 2020  nts.append(..   
+00004350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004360: 2020 2020 204d 6561 7375 7265 286c 656e       Measure(len
+00004370: 2873 656c 662e 5f6d 6561 7375 7265 6d65  (self._measureme
+00004380: 6e74 7329 2b31 2c20 7365 6c66 2c20 6d65  nts)+1, self, me
+00004390: 6173 2c20 6368 616e 6e65 6c5f 612c 2063  as, channel_a, c
+000043a0: 6861 6e6e 656c 5f62 2c20 6b65 7929 290d  hannel_b, key)).
+000043b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000043c0: 2020 2020 2072 6574 7572 6e0d 0a20 2020       return..   
+000043d0: 2020 2020 2020 2020 2073 656c 662e 5f6d           self._m
+000043e0: 6561 7375 7265 6d65 6e74 732e 706f 7028  easurements.pop(
+000043f0: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00004400: 7365 6c66 2e5f 6d65 6173 7572 656d 656e  self._measuremen
+00004410: 7473 2e61 7070 656e 6428 0d0a 2020 2020  ts.append(..    
+00004420: 2020 2020 2020 2020 2020 2020 4d65 6173              Meas
+00004430: 7572 6528 6c65 6e28 7365 6c66 2e5f 6d65  ure(len(self._me
+00004440: 6173 7572 656d 656e 7473 292b 312c 2073  asurements)+1, s
+00004450: 656c 662c 206d 6561 732c 2063 6861 6e6e  elf, meas, chann
+00004460: 656c 5f61 2c20 6368 616e 6e65 6c5f 622c  el_a, channel_b,
+00004470: 206b 6579 2929 0d0a 2020 2020 2020 2020   key))..        
+00004480: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00004490: 2020 2073 656c 662e 5f6d 6561 7375 7265     self._measure
+000044a0: 6d65 6e74 732e 6170 7065 6e64 280d 0a20  ments.append(.. 
+000044b0: 2020 2020 2020 2020 2020 2020 2020 204d                 M
+000044c0: 6561 7375 7265 286c 656e 2873 656c 662e  easure(len(self.
+000044d0: 5f6d 6561 7375 7265 6d65 6e74 7329 2b31  _measurements)+1
+000044e0: 2c20 7365 6c66 2c20 6d65 6173 2c20 6368  , self, meas, ch
+000044f0: 616e 6e65 6c5f 612c 2063 6861 6e6e 656c  annel_a, channel
+00004500: 5f62 2c20 6b65 7929 290d 0a0d 0a20 2020  _b, key))....   
+00004510: 2064 6566 205f 6765 745f 6d65 6173 7572   def _get_measur
+00004520: 656d 656e 745f 6279 5f6b 6579 2873 656c  ement_by_key(sel
+00004530: 662c 206b 6579 293a 0d0a 2020 2020 2020  f, key):..      
+00004540: 2020 6966 2074 7970 6528 6b65 7929 203d    if type(key) =
+00004550: 3d20 696e 743a 0d0a 2020 2020 2020 2020  = int:..        
+00004560: 2020 2020 6966 2030 203c 3d20 6b65 7920      if 0 <= key 
+00004570: 3c3d 206c 656e 2873 656c 662e 6368 616e  <= len(self.chan
+00004580: 6e65 6c73 293a 0d0a 2020 2020 2020 2020  nels):..        
+00004590: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000045a0: 656c 662e 5f6d 6561 7375 7265 6d65 6e74  elf._measurement
+000045b0: 735b 6b65 795d 0d0a 2020 2020 2020 2020  s[key]..        
+000045c0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+000045d0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000045e0: 2045 7863 6570 7469 6f6e 2827 6b65 7920   Exception('key 
+000045f0: 6f75 7420 6f66 2072 616e 6765 2729 0d0a  out of range')..
+00004600: 2020 2020 2020 2020 656c 6966 2074 7970          elif typ
+00004610: 6528 6b65 7929 203d 3d20 7374 723a 0d0a  e(key) == str:..
+00004620: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00004630: 6d20 696e 2073 656c 662e 5f6d 6561 7375  m in self._measu
+00004640: 7265 6d65 6e74 733a 0d0a 2020 2020 2020  rements:..      
+00004650: 2020 2020 2020 2020 2020 6966 206d 2e6b            if m.k
+00004660: 6579 203d 3d20 6b65 793a 0d0a 2020 2020  ey == key:..    
+00004670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004680: 7265 7475 726e 206d 0d0a 2020 2020 2020  return m..      
+00004690: 2020 2020 2020 7261 6973 6520 4578 6365        raise Exce
+000046a0: 7074 696f 6e28 276b 6579 206e 6f74 2066  ption('key not f
+000046b0: 6f75 6e64 2729 0d0a 2020 2020 2020 2020  ound')..        
+000046c0: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+000046d0: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+000046e0: 6f6e 2827 696e 7661 6c69 6420 6b65 7920  on('invalid key 
+000046f0: 7479 7065 2729 0d0a 0d0a 2020 2020 6465  type')....    de
+00004700: 6620 636c 6561 725f 6d65 6173 7572 656d  f clear_measurem
+00004710: 656e 7428 7365 6c66 2c20 6b65 7929 3a0d  ent(self, key):.
+00004720: 0a20 2020 2020 2020 2069 6420 3d20 7365  .        id = se
+00004730: 6c66 2e5f 6765 745f 6d65 6173 7572 656d  lf._get_measurem
+00004740: 656e 745f 6279 5f6b 6579 286b 6579 292e  ent_by_key(key).
+00004750: 6964 2d31 0d0a 2020 2020 2020 2020 7365  id-1..        se
+00004760: 6c66 2e5f 6d65 6173 7572 656d 656e 7473  lf._measurements
+00004770: 5b69 645d 2e63 6c65 6172 2829 0d0a 0d0a  [id].clear()....
+00004780: 2020 2020 6465 6620 7265 6164 5f6d 6561      def read_mea
+00004790: 7375 7265 6d65 6e74 2873 656c 662c 206b  surement(self, k
+000047a0: 6579 293a 0d0a 2020 2020 2020 2020 7265  ey):..        re
+000047b0: 7475 726e 2066 6c6f 6174 2873 656c 662e  turn float(self.
+000047c0: 5f67 6574 5f6d 6561 7375 7265 6d65 6e74  _get_measurement
+000047d0: 5f62 795f 6b65 7928 6b65 7929 2e72 6561  _by_key(key).rea
+000047e0: 6428 2929 0d0a 0d0a 2020 2020 2320 2d2d  d())....    # --
+000047f0: 2077 6176 6566 6f72 6d20 6765 7420 6675   waveform get fu
+00004800: 6e63 7469 6f6e 730d 0a0d 0a20 2020 2064  nctions....    d
+00004810: 6566 2077 6176 6566 6f72 6d5f 7265 6164  ef waveform_read
+00004820: 5f6d 6f64 6528 7365 6c66 2c20 6d6f 6465  _mode(self, mode
+00004830: 3d4e 6f6e 6529 3a0d 0a20 2020 2020 2020  =None):..       
+00004840: 2063 6d64 203d 2027 3a57 4156 6566 6f72   cmd = ':WAVefor
+00004850: 6d3a 4d4f 4445 270d 0a20 2020 2020 2020  m:MODE'..       
+00004860: 2069 6620 6d6f 6465 2069 7320 4e6f 6e65   if mode is None
+00004870: 3a0d 0a20 2020 2020 2020 2020 2020 2063  :..            c
+00004880: 6d64 202b 3d20 273f 270d 0a20 2020 2020  md += '?'..     
+00004890: 2020 2020 2020 206d 6f64 6520 3d20 7365         mode = se
+000048a0: 6c66 2e71 7565 7279 2863 6d64 290d 0a20  lf.query(cmd).. 
+000048b0: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
+000048c0: 2069 6e20 7365 6c66 2e5f 7661 6c69 645f   in self._valid_
+000048d0: 7761 7665 666f 726d 5f6d 6f64 653a 0d0a  waveform_mode:..
+000048e0: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
+000048f0: 2b3d 2066 2720 7b6d 6f64 657d 270d 0a20  += f' {mode}'.. 
+00004900: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00004910: 7772 6974 6528 636d 6429 0d0a 2020 2020  write(cmd)..    
+00004920: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00004930: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+00004940: 6570 7469 6f6e 2866 2769 6e76 616c 6964  eption(f'invalid
+00004950: 2077 6176 6566 6f72 6d20 6d6f 6465 207b   waveform mode {
+00004960: 6d6f 6465 7d27 290d 0a20 2020 2020 2020  mode}')..       
+00004970: 2073 656c 662e 5f77 6176 6566 6f72 6d5f   self._waveform_
+00004980: 7265 7475 726e 5f66 6f72 6d61 7420 3d20  return_format = 
+00004990: 6d6f 6465 0d0a 2020 2020 2020 2020 7265  mode..        re
+000049a0: 7475 726e 206d 6f64 650d 0a0d 0a20 2020  turn mode....   
+000049b0: 2064 6566 2077 6176 6566 6f72 6d5f 7265   def waveform_re
+000049c0: 7475 726e 5f66 6f72 6d61 7428 7365 6c66  turn_format(self
+000049d0: 2c20 666f 726d 6174 3a20 7374 7220 3d20  , format: str = 
+000049e0: 4e6f 6e65 293a 0d0a 2020 2020 2020 2020  None):..        
+000049f0: 636d 6420 3d20 273a 5741 5665 666f 726d  cmd = ':WAVeform
+00004a00: 3a46 4f52 4d61 7427 0d0a 2020 2020 2020  :FORMat'..      
+00004a10: 2020 6966 2066 6f72 6d61 7420 6973 204e    if format is N
+00004a20: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00004a30: 2020 636d 6420 2b3d 2027 3f27 0d0a 2020    cmd += '?'..  
+00004a40: 2020 2020 2020 2020 2020 666f 726d 6174            format
+00004a50: 203d 2073 656c 662e 7175 6572 7928 636d   = self.query(cm
+00004a60: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
+00004a70: 7365 6c66 2e5f 7761 7665 666f 726d 5f72  self._waveform_r
+00004a80: 6574 7572 6e5f 666f 726d 6174 203d 2066  eturn_format = f
+00004a90: 6f72 6d61 740d 0a20 2020 2020 2020 2065  ormat..        e
+00004aa0: 6c69 6620 666f 726d 6174 2069 6e20 7365  lif format in se
+00004ab0: 6c66 2e5f 7661 6c69 645f 7761 7665 666f  lf._valid_wavefo
+00004ac0: 726d 5f66 6f72 6d61 743a 0d0a 2020 2020  rm_format:..    
+00004ad0: 2020 2020 2020 2020 636d 6420 2b3d 2066          cmd += f
+00004ae0: 2720 7b66 6f72 6d61 747d 270d 0a20 2020  ' {format}'..   
+00004af0: 2020 2020 2020 2020 2073 656c 662e 5f77           self._w
+00004b00: 6176 6566 6f72 6d5f 7265 7475 726e 5f66  aveform_return_f
+00004b10: 6f72 6d61 7420 3d20 666f 726d 6174 0d0a  ormat = format..
+00004b20: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00004b30: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00004b40: 2045 7863 6570 7469 6f6e 2866 2769 6e76   Exception(f'inv
+00004b50: 616c 6964 2077 6176 6566 6f72 6d20 6d6f  alid waveform mo
+00004b60: 6465 207b 666f 726d 6174 7d27 290d 0a20  de {format}').. 
+00004b70: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00004b80: 6c66 2e5f 7761 7665 666f 726d 5f72 6574  lf._waveform_ret
+00004b90: 7572 6e5f 666f 726d 6174 0d0a 0d0a 2020  urn_format....  
+00004ba0: 2020 6465 6620 7761 7665 666f 726d 5f73    def waveform_s
+00004bb0: 6f75 7263 6528 7365 6c66 2c20 736f 7572  ource(self, sour
+00004bc0: 6365 3a20 7374 7220 3d20 4e6f 6e65 293a  ce: str = None):
+00004bd0: 0d0a 2020 2020 2020 2020 636d 6420 3d20  ..        cmd = 
+00004be0: 273a 5741 5665 666f 726d 3a53 4f55 5263  ':WAVeform:SOURc
+00004bf0: 6527 0d0a 2020 2020 2020 2020 6966 2073  e'..        if s
+00004c00: 6f75 7263 6520 6973 204e 6f6e 653a 0d0a  ource is None:..
+00004c10: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
+00004c20: 2b3d 2027 3f27 0d0a 2020 2020 2020 2020  += '?'..        
+00004c30: 2020 2020 7661 6c20 3d20 7365 6c66 2e71      val = self.q
+00004c40: 7565 7279 2863 6d64 290d 0a20 2020 2020  uery(cmd)..     
+00004c50: 2020 2020 2020 2073 656c 662e 5f77 6176         self._wav
+00004c60: 6566 6f72 6d5f 736f 7572 6365 203d 2076  eform_source = v
+00004c70: 616c 0d0a 2020 2020 2020 2020 656c 6966  al..        elif
+00004c80: 2073 656c 662e 7265 2e73 7562 2872 275b   self.re.sub(r'[
+00004c90: 612d 7a5d 2c27 2c20 736f 7572 6365 2920  a-z],', source) 
+00004ca0: 696e 2073 656c 662e 5f76 616c 6964 5f63  in self._valid_c
+00004cb0: 6861 6e6e 656c 733a 2020 2320 616e 7920  hannels:  # any 
+00004cc0: 6c6f 7765 7263 6173 6520 6967 6e6f 7265  lowercase ignore
+00004cd0: 640d 0a20 2020 2020 2020 2020 2020 2069  d..            i
+00004ce0: 6620 736f 7572 6365 2021 3d20 7365 6c66  f source != self
+00004cf0: 2e5f 7761 7665 666f 726d 5f73 6f75 7263  ._waveform_sourc
+00004d00: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00004d10: 2020 2020 636d 6420 2b3d 2066 2720 7b73      cmd += f' {s
+00004d20: 6f75 7263 657d 270d 0a20 2020 2020 2020  ource}'..       
+00004d30: 2020 2020 2020 2020 2073 656c 662e 7772           self.wr
+00004d40: 6974 6528 636d 6429 0d0a 2020 2020 2020  ite(cmd)..      
+00004d50: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00004d60: 7761 7665 666f 726d 5f73 6f75 7263 6520  waveform_source 
+00004d70: 3d20 736f 7572 6365 0d0a 2020 2020 2020  = source..      
+00004d80: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00004d90: 2020 2020 2072 6169 7365 2045 7863 6570       raise Excep
+00004da0: 7469 6f6e 2866 2769 6e76 616c 6964 2077  tion(f'invalid w
+00004db0: 6176 6566 6f72 6d20 736f 7572 6365 207b  aveform source {
+00004dc0: 736f 7572 6365 7d27 290d 0a20 2020 2020  source}')..     
+00004dd0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00004de0: 7761 7665 666f 726d 5f73 6f75 7263 650d  waveform_source.
+00004df0: 0a0d 0a20 2020 2064 6566 2067 6574 5f77  ...    def get_w
+00004e00: 6176 6566 6f72 6d5f 7072 6561 6d62 6c65  aveform_preamble
+00004e10: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00004e20: 2072 6574 7572 6e20 5761 7665 666f 726d   return Waveform
+00004e30: 5072 6561 6d62 6c65 2873 656c 662e 7175  Preamble(self.qu
+00004e40: 6572 7928 273a 5741 5665 666f 726d 3a50  ery(':WAVeform:P
+00004e50: 5245 616d 626c 653f 2729 290d 0a0d 0a20  REamble?')).... 
+00004e60: 2020 2064 6566 2067 6574 5f77 6176 6566     def get_wavef
+00004e70: 6f72 6d28 7365 6c66 2c20 6368 616e 6e65  orm(self, channe
+00004e80: 6c3d 4e6f 6e65 293a 0d0a 2020 2020 2020  l=None):..      
+00004e90: 2020 7365 6c66 2e77 6176 6566 6f72 6d5f    self.waveform_
+00004ea0: 736f 7572 6365 2863 6861 6e6e 656c 290d  source(channel).
+00004eb0: 0a20 2020 2020 2020 2073 656c 662e 7761  .        self.wa
+00004ec0: 7665 666f 726d 5f72 6574 7572 6e5f 666f  veform_return_fo
+00004ed0: 726d 6174 2827 4153 4327 290d 0a20 2020  rmat('ASC')..   
+00004ee0: 2020 2020 2073 656c 662e 7761 7665 666f       self.wavefo
+00004ef0: 726d 5f72 6561 645f 6d6f 6465 2827 4e4f  rm_read_mode('NO
+00004f00: 524d 2729 0d0a 2020 2020 2020 2020 7365  RM')..        se
+00004f10: 6c66 2e73 746f 7028 2920 2023 2064 6174  lf.stop()  # dat
+00004f20: 6120 6361 6e20 6265 2074 7261 6e73 6665  a can be transfe
+00004f30: 7272 6564 206f 6e6c 7920 696e 2073 746f  rred only in sto
+00004f40: 7020 7374 6174 650d 0a20 2020 2020 2020  p state..       
+00004f50: 2023 2076 6572 6966 7920 6461 7461 206c   # verify data l
+00004f60: 656e 6774 680d 0a20 2020 2020 2020 2070  ength..        p
+00004f70: 7265 616d 626c 6520 3d20 7365 6c66 2e67  reamble = self.g
+00004f80: 6574 5f77 6176 6566 6f72 6d5f 7072 6561  et_waveform_prea
+00004f90: 6d62 6c65 2829 0d0a 2020 2020 2020 2020  mble()..        
+00004fa0: 7761 7665 666f 726d 203d 204e 6f6e 650d  waveform = None.
+00004fb0: 0a20 2020 2020 2020 2069 6620 7072 6561  .        if prea
+00004fc0: 6d62 6c65 2e70 6f69 6e74 7320 3e20 3135  mble.points > 15
+00004fd0: 3632 353a 2020 2320 6d61 7820 7661 6c75  625:  # max valu
+00004fe0: 6520 666f 7220 6173 6369 6920 7472 616e  e for ascii tran
+00004ff0: 7366 6572 0d0a 2020 2020 2020 2020 2020  sfer..          
+00005000: 2020 7365 676d 656e 7473 203d 205b 5d0d    segments = [].
+00005010: 0a20 2020 2020 2020 2020 2020 2070 6f73  .            pos
+00005020: 6974 696f 6e20 3d20 310d 0a20 2020 2020  ition = 1..     
+00005030: 2020 2020 2020 2077 6869 6c65 2070 6f73         while pos
+00005040: 6974 696f 6e20 3c20 7072 6561 6d62 6c65  ition < preamble
+00005050: 2e70 6f69 6e74 733a 0d0a 2020 2020 2020  .points:..      
+00005060: 2020 2020 2020 2020 2020 7365 6c66 2e77            self.w
+00005070: 7269 7465 2866 273a 5741 563a 5354 4152  rite(f':WAV:STAR
+00005080: 207b 706f 7369 7469 6f6e 7d27 290d 0a20   {position}').. 
+00005090: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000050a0: 656c 662e 7772 6974 6528 6627 3a57 4156  elf.write(f':WAV
+000050b0: 3a53 544f 5020 7b70 6f73 6974 696f 6e20  :STOP {position 
+000050c0: 2b20 3135 3632 357d 2729 0d0a 2020 2020  + 15625}')..    
+000050d0: 2020 2020 2020 2020 2020 2020 7365 676d              segm
+000050e0: 656e 7473 2e61 7070 656e 6428 7365 6c66  ents.append(self
+000050f0: 2e71 7565 7279 2827 3a57 4156 3a44 4154  .query(':WAV:DAT
+00005100: 413f 2729 290d 0a20 2020 2020 2020 2020  A?'))..         
+00005110: 2020 2020 2020 2070 6f73 6974 696f 6e20         position 
+00005120: 2b3d 2031 3536 3235 0d0a 2020 2020 2020  += 15625..      
+00005130: 2020 2020 2020 7761 7665 666f 726d 203d        waveform =
+00005140: 2057 6176 6566 6f72 6d28 7365 676d 656e   Waveform(segmen
+00005150: 7473 2c20 7072 6561 6d62 6c65 290d 0a20  ts, preamble).. 
+00005160: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00005170: 2020 2020 2020 2020 2020 7761 7665 666f            wavefo
+00005180: 726d 203d 2057 6176 6566 6f72 6d28 7365  rm = Waveform(se
+00005190: 6c66 2e71 7565 7279 2827 3a57 4156 3a44  lf.query(':WAV:D
+000051a0: 4154 413f 2729 2c20 7072 6561 6d62 6c65  ATA?'), preamble
+000051b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000051c0: 7275 6e28 290d 0a20 2020 2020 2020 2072  run()..        r
+000051d0: 6574 7572 6e20 7761 7665 666f 726d 0d0a  eturn waveform..
```

### Comparing `PyRigol_DS1000x-0.2/PyRigol_DS1000x.egg-info/PKG-INFO` & `PyRigol_DS1000x-0.3/PyRigol_DS1000x.egg-info/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: PyRigol-DS1000x
-Version: 0.2
+Version: 0.3
 Summary: module to easily contorl a Rigol DS1000x series scope and quickly build a measurement setup
 Home-page: https://github.com/Minu-IU3IRR/PyRigol_DS1000x
 Author: Manuel Minutello
 License: MIT
 License-File: LICENSE
 
 module to easily implement a measurement with your Rigol DS1000x scope.
```

### Comparing `PyRigol_DS1000x-0.2/setup.py` & `PyRigol_DS1000x-0.3/setup.py`

 * *Files identical despite different names*

